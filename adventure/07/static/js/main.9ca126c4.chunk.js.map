{"version":3,"sources":["_CORE/pipeLines/initPipeLine.js","chapter07/src/constants/const_structures.js","chapter07/src/constants/constants_elements.js","_CORE/helpers/helper_LoadAssets.js","_CORE/helpers/helper_Emitter.js","_CORE/helpers/helper_FrameUpdater_02.js","chapter07/src/Entities/Studio.js","_CORE/helpers/helper_KeyBoard.js","chapter07/src/helpers/checkerDevice.js","chapter07/src/Entities/player.js","_CORE/helpers/helper_CollisionsItems_v02.js","chapter07/src/systems/system_PlayerMoveOnLevel.js","chapter07/src/Entities/Structure03/map3SHelper.js","chapter07/src/Entities/Structure03/map3SCreaterFromTiles.js","chapter07/src/helpers/m4.js","chapter07/src/helpers/geomHelpers.js","chapter07/src/Entities/Structure03/geometries/uvAtlas.js","chapter07/src/Entities/Structure03/geometries/geomElemColumn.js","chapter07/src/Entities/Structure03/geometries/geomElemPlatform.js","chapter07/src/Entities/Structure03/geometries/geomElemBallustrade.js","chapter07/src/Entities/Structure03/geometries/geometryTileL.js","chapter07/src/Entities/Structure03/geometries/geomElemArc.js","chapter07/src/Entities/Structure03/geometries/geometryTileI.js","chapter07/src/Entities/Structure03/geometries/geometryTileX.js","chapter07/src/Entities/Structure03/geometries/geometryTileT.js","chapter07/src/Entities/Structure03/geometries/geometryTileXY.js","chapter07/src/Entities/Structure03/geometries/geometryTileStairs.js","chapter07/src/Entities/Structure03/geometries/geometryTileToTop.js","chapter07/src/Entities/Structure03/geometries/geometryTileFromBot.js","chapter07/src/Entities/Structure03/geometries/geometryTileTopPlatform.js","chapter07/src/Entities/Structure03/geometries/createBufferGeom.js","chapter07/src/Entities/Structure03/structure03.js","chapter07/src/Entities/Structure03/tilesMakerData.js","chapter07/src/Entities/Structure03/threeMesh.js","chapter07/src/Entities/sprites.js","chapter07/src/Entities/Flyer/flyer.js","chapter07/src/Entities/Structure03/geometries/geomElemDrive.js","chapter07/src/Entities/Structure03/geometries/geomElemCylinder.js","chapter07/src/Entities/fuel.js","chapter07/src/systems/system_PlayerNearLevelItems.js","chapter07/src/actions/flyTonewStructure.js","chapter07/src/Entities/Structure03/geometries/geomElemFinal.js","chapter07/src/Entities/finalItem.js","_CORE/helpers/helper_translate.js","_CORE/ui/containersReact/Info.js","_CORE/constants/default_voc.js","_CORE/ui/containersReact/PlayerControls.js","_CORE/ui/containersReact/App.js","_CORE/ui/store/defaultUiData.js","_CORE/ui/UI.js","_CORE/ui/store/createStore.js","chapter07/src/constants/constants_replicies.js","chapter07/src/ui/UserReplicies.js","chapter07/src/ui/BotAnswers.js","chapter07/src/ui/CustomReactComponent.js","chapter07/src/constants/const_dialogs.js","chapter07/src/ui/store.js","assets/chapter07/texture01.jpg","assets/chapter07/texture01_inv.jpg","chapter07/src/systems/system_Sound.js","assets/chapter06/audio/steps.mp3","chapter07/src/constants/constants_modules.js","_CORE/helpers/helper_DeviceResizer.js","_CORE/helpers/helper_TweenUpdater.js","assets/chapter07/ambient_07.mp3","assets/chapter07/fly.mp3","chapter07/src/ui/Ui.js","chapter07/src/actions/actions.js","chapter07/src/index.js"],"names":["gameModules","CONSTANTS","a","initModulesByState","root","loaderAssets","dataToLoad","getAssetsFromModulesData","loadAssets","assets","state","modulesData","i","length","key","constr","initStateKey","arr","assetsToLoad","j","push","W","c","Color","console","log","r","g","b","items","k","maybeTilesInds","queue","ind","calk","resultTileIndex","tileData","keyModel","rotationY","Math","PI","FINAL_MAP","iterateAll","f","FINAL_ENV_COLOR","FINAL_STRUCTURE","ENV_COLOR","FOG","color","near","far","time","COLOR_00","mat","X","Y","Z","mapFill","tile","place","STRUCTURE_BIG_HOLE","SIZE_X","SIZE_Y","SIZE_Z","STRUCTURE_TOP_RIGHT","STRUCTURE_TOP_LEFT","STRUCTURE_LONG_LEFT","STRUCTURE_TWO_HOUSES","H","STRUCTURES","studioConfig","canId","rendererCon","antialias","amb","strength","composerAddPass","playerConfig","speed","speedRot","speedDown","offsetFromFloor","offsetFromFloorFactor","offsetWallCollision","level","startPos","cameraData","fov","ratio","window","innerWidth","innerHeight","pos","frontObjPos","backObjPos","lightDataOne","dist","decay","createLoaders","objLoader","textureLoader","gltfLoader","cubeTextureLoader","soundLoader","path","type","Promise","resolve","OBJLoader","GLTFLoader","THREE","getterLoader","load","LoaderAssets","this","resources","_load","data","iterate","index","EventEmitter","_storage","id","getOrCreateArrFromObj","forEach","action","callback","filter","item","s","obj","FrameUpdater","_subscribers","delta","count","oldTime","update","R","Date","now","isNaN","dataFromChine","animate","requestAnimationFrame","fn","Studio","_root","emitter","canvas","document","getElementById","_renderer","setClearColor","setPixelRatio","devicePixelRatio","setSize","_scene","fog","_playerCamera","_controlsCamera","position","set","controls","OrbitControls","domElement","target","vec3","isPlayerView","subscribe","getWorldPosition","resize","size","width","height","aspect","updateProjectionMatrix","addEventListener","addToScene","mesh","add","removeFromScene","remove","drawFrame","render","cam","sceneFogData","startData","endData","TWEEN","to","onUpdate","start","colorTarget","getHex","KeyBoard","gameContext","keys","keysEnabled","keyUpdate","keyCode","isDown","emit","event","is","checkTouch","navigator","maxTouchPoints","documentElement","checkIsCanOrientation","orientation","checkDeviceByUserAgent","mode","isIphone","userAgent","match","isChrome","isFirefoxIOS","isFirefox","indexOf","isWebViewIOS","test","Player","studio","_camera","isBlocked","isFreeze","device","isCanTouch","isCanChangeOrientation","deviceByBrowserProps","deviceType","deviceByUserAgent","checkDevice","isNeedControls","fromArray","PointerLockControls","body","rotation","userData","bottomObj","frontObj","backObj","strenth","light","setCamera","controlsLock","pointerLockElement","z","x","val","isFeeze","y","lock","unlock","helper_CollisionsItems_v02","_arrMeshes","_vecStart","_vecDir","_rayCaster","objFrom","objTo","sub","intersects","intersectObjects","distance","system_PlayerMoveOnLevel","player","_collisionsBottom","_collisionsWalls","toggleBlocked","isCanMove","toggleCanMove","dir","_isTabCurrent","visibilityState","isSoundWalk","savedPos","isLocked","moveRight","rotateY","checkCollisions","isCollision","collision","object","moveForward","translateZ","checkAndMoveFront","checkAndMoveBack","system_Sound","stopWalk","isMustStartSound","translateY","checkBottomAndDropDownPlayer","startWalk","setItemToCollision","removeItemFromCollision","createMap3X","tiles","dataStructure","arrY","arrZ","arrX","map","m","indInsert","indComplete","q","floor","makeQueue","sizeZ","sizeY","sizeX","checkNextMapItemIndexes","next","nextY","nextZ","nextX","actionsWithMapItem","choiceFinalTileFromExists","dataAction","src","mapItem","Number","isInteger","indTile","random","filterMaybeArrByCompare","with","yWith","zWith","xWith","withProp","arrNotChange","arrCurrent","newArr","arrCanBe","filteredArr","isIn","createMap","generateMap","maxCallStack","res","calculateMapItem","rej","actions","createPipelineActionsWithMapItem","iterateAction","indAction","pipelineActions","then","hasOwnProperty","nextItem","destroyMap","MatType","Float32Array","subtractVectors","dst","normalize","v","sqrt","cross","distanceSq","dx","dy","dz","inverse","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","d","m4","copy","lookAt","cameraPosition","up","zAxis","xAxis","yAxis","addVectors","scaleVector","compose","translation","quaternion","scale","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","slice","determinate","matrix","invSX","invSY","invSZ","trace","quatFromRotationMatrix","dot","identity","transpose","lengthSq","orthographic","left","right","bottom","top","frustum","perspective","fieldOfViewInRadians","tan","rangeInv","tx","ty","tz","translate","xRotation","angleInRadians","cos","sin","yRotation","zRotation","xRotate","yRotate","zRotate","axisRotation","axis","n","oneMinusCosine","axisRotate","r00","r01","r02","r10","r11","r12","r20","r21","r22","scaling","multiply","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","transformVector","transformPoint","v0","v1","v2","transformDirection","transformNormal","mi","setDefaultType","Ctor","OldType","createFace","v3","v4","createUv","fillColorFace","rotateArrY","angle","vector","translateArr","v033","v066","tileUv","l","randomTile","createColumnData","h","bottomW","bottomH","topH","u","h1","h2","h3","R1","R2","colorPolygon","a0","a1","savedL","currentL","col","hpW","createPlatformData","nX_pZ","pX_pZ","pX_nZ","nX_nZ","minusH","colorSide","createBallustrade","createGeomL","column","fill","copyV","copyCol","platform","createElemArcData","segmentsNum","startAngle","stepAngle","r0","r1","hR0","topBlockWBottom","topBlockWTop","topBlockLevelBottom","num","angle0","angle1","createGeomI","arc","createGeomX","createGeomT","createGeomXY","createGeomStairs","createGeomToTop","createGeomFromBot","createGeomTopPlatform","createGeomFromBuffer","vertices","setAttribute","colors","uv","computeVertexNormals","createStructure3","arrTiles","sideNX","sidePX","sideNY","sidePY","sideNZ","sidePZ","I","t","DATA_TILES","canConnectNX","canConnectPX","canConnectNY","canConnectPY","canConnectNZ","canConnectPZ","includes","topElemItems","split","bottomElemItems","isCan","topKey","bottomKey","prepareCacheSidesConnect","createDataTiles","makerMesh","meshCollision","materials","structureMaterial","basicMat","tilesGeom","generateMeshes","mapData","structureData","copyVCollision","gCollision","visible","addItemToPlayerCollision","setPosition","destroyStructure","geometry","dispose","removeItemFromPlayerCollision","createrMesh","generateStructure","structure","result","generateStructureFinal","getCoordsForItem","rY","rZ","rX","createS","createFlyer","elemDive","h0","h00","w0","h11","w1","createElemDrive","viewGeom","collisionGeom","addItemToPlayerCollisionWalls","playerNearObj","arrow","objectForCheck","createFuel","elem","points","createElemCylinder","system_PlayerNearLevelItems","_itemsToCheck","vec","distanceTo","nearPlayerIsNearPlayer","nearPlayerItemNear","nearPlayerItemKey","itemKey","nearPlayerItemFar","itemIn","pause","setTimeout","startFly","flyer","frameUpdater","spd","unsubscribe1","on","vals","onComplete","easyFly","targetZ","endFly","easing","Quadratic","Out","animateFuelBarMore","bar","createElement","style","backgroundColor","minHeight","minWidth","classList","querySelector","appendChild","findFuel","fuel","setItemToCheck","unsubscribe","removeItemFromCheck","goToPlatform","parentNode","removeChild","animateFuelBarLess","countStruct","dispatcher","abs","startCar","changeFog","changeEnvColor","coordsFuel","unsubscribe2","stopCar","dispatch","flyToNewStructure","finalItem","finalTrigger","isFinal","controlsUnlock","buttonMouse","display","flyProcess","flyProcessToFinal","S","S2","SM","SMH","createFinalItem","matNotFog","matNotFogOuter","colorPolygonInner","createElemFinal","viewGeom2","meshOuter","lang","createTranslater","vocab","word","connect","infoPanelData","props","className","onClick","title","topText","chapters","href","text","currentChapterIndex","bottomText","afterWords","aText","isInfo","isShowControls","isShowControlSound","isMute","useState","isShowFullScreenButt","changeShowFullScreenButt","useEffect","onMouseUp","onTouchEnd","onMouseDown","onTouchStart","CustomReactComponent","startDefaultStoreData","loader","offsetLoader","isAnimateLoader","loaderTimeOut","marginLeft","UI","store","customStore","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","applyMiddleware","thunk","prepareStore","ReactDOM","startButtons","progressWrapper","hideStartScreen","e","dataset","changeLang","TRANSLATE_WORLDS","CORE","UserReplicies","userReplicies","ui","phrase","BotAnswers","botAnswers","isButtonDialog","isShowFinalMessage","isShowPalleteDialog","isShowButtonDrawCar","valButtonDrawCar","isShowButtonToggleOpenLocationsList","isLocationListOpened","currentLocationOfList","locationsList","location","replace","RESULT_DIALOGS","uiState","currentLocation","phrasesData","location01","isComplete","phraseIndex","phrases","location02","location03","listener","getCamera","_sound","setBuffer","soundAmbient","setLoop","setVolume","_soundCar","soundPlatform","_w","soundStep","_isMuted","isPlaying","stop","play","_timer","clearTimeout","GAME_MODULES","appWrapper","openAppFullScreenIfMobile","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","fontSize","max","min","fullscreenElement","soundStepsSrc","newLocation","keyPerson","nextPhraseIndex","changeTargetLocation","createCustomStore","textureTiles","magFilter","minFilter","vertexColors","textureTilesInv","structureMaterialInv","sprites","arrSprites","removeAll","createSystemSprites","unsubscribeCheckNearPlatform","setToPos","showStartButton","playAmbient","wrap","pipeLineForInit"],"mappings":"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","file":"static/js/main.9ca126c4.chunk.js","sourcesContent":["export async function pipeLineForInit (gameModules, CONSTANTS) {\r\n    const root = { CONSTANTS }\r\n\r\n    initModulesByState('pageLoaded', gameModules, root)\r\n\r\n    const { loaderAssets } = root\r\n\r\n    const dataToLoad = getAssetsFromModulesData(gameModules)\r\n    root.assets = await loaderAssets.loadAssets(dataToLoad)\r\n\r\n    initModulesByState('beforeStartPlay', gameModules, root)\r\n}\r\n\r\n\r\nconst initModulesByState = (state, modulesData, root) => {\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        const {  key, constr, initStateKey } = modulesData[i]\r\n        initStateKey === state && (root[key] = new constr(root))\r\n    }\r\n}\r\n\r\nconst getAssetsFromModulesData = modulesData => {\r\n    const arr = []\r\n    for (let i = 0; i < modulesData.length; ++i) {\r\n        if (modulesData[i].assetsToLoad && modulesData[i].assetsToLoad.length) {\r\n            for (let j = 0; j < modulesData[i].assetsToLoad.length; ++j) {\r\n                arr.push(modulesData[i].assetsToLoad[j])\r\n            }\r\n        }\r\n    }\r\n    return arr\r\n}","import { Color } from 'three'\r\n\r\nexport const W = 160\r\n\r\n\r\nconst c = new Color(0xa76815)\r\nconsole.log(c.r + ', ' + c.g + ', ' + c.b)\r\n\r\nconst items = [\r\n    {i: 0, j: 0, k: 0, maybeTilesInds: [2], queue:{ind: 22, calk: true}, resultTileIndex:2, tileData: { keyModel: 't_I', rotationY: Math.PI / 2 }},\r\n    {i: 0, j: 0, k: 1, maybeTilesInds: [2], queue:{ind: 22, calk: true}, resultTileIndex:2, tileData: { keyModel: 't_I', rotationY: Math.PI / 2 }},\r\n    {i: 0, j: 0, k: 2, maybeTilesInds: [2], queue:{ind: 22, calk: true}, resultTileIndex:2, tileData: { keyModel: 't_I', rotationY: Math.PI / 2 }},\r\n    {i: 0, j: 0, k: 3, maybeTilesInds: [2], queue:{ind: 22, calk: true}, resultTileIndex:2, tileData: { keyModel: 't_I', rotationY: Math.PI / 2 }},\r\n    {i: 0, j: 0, k: 4, maybeTilesInds: [2], queue:{ind: 22, calk: true}, resultTileIndex:2, tileData: { keyModel: 't_I', rotationY: Math.PI / 2 }},\r\n]\r\nexport const FINAL_MAP = {\r\n    iterateAll: f => {\r\n        for (let i = 0; i < items.length; ++i) {\r\n            f(items[i])\r\n        }\r\n    }\r\n}\r\nexport const FINAL_ENV_COLOR = new Color(1, 1, 0)\r\nexport const FINAL_STRUCTURE = {\r\n    ENV_COLOR: FINAL_ENV_COLOR,\r\n    FOG: { color: 0xffff00, near: 150, far: 1000, time: 2000 },\r\n    COLOR_00: [1, 1, 0],\r\n    mat: 'structureMaterial',\r\n    X: -800,\r\n    Y: -100,\r\n    Z: 160,\r\n    mapFill: [\r\n        { tile: 'empty', place: [3, 4, 2] },\r\n        { tile: 'empty', place: [3, 3, 2] },\r\n        { tile: 'empty', place: [3, 2, 2] },\r\n        { tile: 'empty', place: [3, 1, 2] },\r\n        { tile: 'empty', place: [3, 0, 2] },\r\n    ],\r\n}\r\n\r\n\r\n\r\nexport const STRUCTURE_BIG_HOLE = (() => {\r\n    const mapFill = []\r\n    for (let i = 3; i < 6; ++i) {\r\n        for (let j = 0; j < 5; ++j) {\r\n            for (let k = 2; k < 7; ++k) {\r\n               mapFill.push({ tile: 'empty', place: [i, j, k] })\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        ENV_COLOR: new Color(.9, .9, 0),\r\n        FOG: { color: 0x00aaaa, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [0.8, 0.1, .9],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 9,\r\n        SIZE_Y: 10,\r\n        SIZE_Z: 5,\r\n        X: -W * 5,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill,\r\n    }\r\n})()\r\n\r\n\r\nexport const STRUCTURE_TOP_RIGHT = (() => {\r\n    const mapFill = []\r\n    for (let i = 3; i < 15; ++i) {\r\n        for (let j = 0; j < 5; ++j) {\r\n            for (let k = 0; k < 3; ++k) {\r\n               mapFill.push({ tile: 'empty', place: [i, j, k] })\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        ENV_COLOR: new Color(.9, .9, .9),\r\n        FOG: { color: 0x00aaaa, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [0.1, 0.1, .9],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 7,\r\n        SIZE_Y: 15,\r\n        SIZE_Z: 5,\r\n        X: -W,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill,\r\n    }\r\n})()\r\n\r\n\r\n\r\n\r\nexport const STRUCTURE_TOP_LEFT = (() => {\r\n    const mapFill = []\r\n    for (let i = 3; i < 15; ++i) {\r\n        for (let j = 0; j < 5; ++j) {\r\n            for (let k = 4; k < 7; ++k) {\r\n               mapFill.push({ tile: 'empty', place: [i, j, k] })\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        ENV_COLOR: new Color(.3, 0, .3),\r\n        FOG: { color: 0x559955, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [.9, 0, .7],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 7,\r\n        SIZE_Y: 15,\r\n        SIZE_Z: 5,\r\n        X: -W * 5,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill,\r\n    }\r\n})()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const STRUCTURE_LONG_LEFT = (() => {\r\n    const mapFill = []\r\n\r\n    return {\r\n        ENV_COLOR: new Color(0.403921568627451, 0.5019607843137255, 0.5176470588235295),\r\n        FOG: { color: 0x132229, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [0.5764705882352941, 0.8117647058823529, 0.8509803921568627],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 5,\r\n        SIZE_Y: 5,\r\n        SIZE_Z: 15,\r\n        X: -W * 5,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill,\r\n    }\r\n})()\r\n\r\n\r\nexport const STRUCTURE_TWO_HOUSES = (() => {\r\n\r\n    const mapFill = []\r\n    for (let i = 0; i < 7; ++i) {\r\n        for (let j = 0; j < 5; ++j) {\r\n            for (let k = 4; k < 5; ++k) {\r\n               mapFill.push({ tile: 'empty', place: [i, j, k] })\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        ENV_COLOR: new Color(.6, 0, 0),\r\n        FOG: { color: 0x550000, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [.35, .35, .35],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 9,\r\n        SIZE_Y: 8,\r\n        SIZE_Z: 5,\r\n        X: -640,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill,\r\n    }\r\n})()\r\n\r\n","import { Color } from 'three'\r\nimport {\r\n    STRUCTURE_TWO_HOUSES,\r\n    STRUCTURE_LONG_LEFT,\r\n    STRUCTURE_TOP_LEFT,\r\n    STRUCTURE_TOP_RIGHT,\r\n    STRUCTURE_BIG_HOLE,\r\n} from './const_structures'\r\nexport const W = 160\r\nexport const H = 80\r\nexport const SIZE_X = 7\r\nexport const SIZE_Y = 15\r\nexport const SIZE_Z = 7\r\nexport const COLOR_00 = [1, .3, 1]\r\n\r\n//const c = new Color(0xffcc4c)\r\n//console.log(c.r + ', ' + c.g + ', ' + c.b)\r\n\r\nexport const STRUCTURES = [\r\n\r\n    /** 0 start center hole */\r\n    {\r\n        ENV_COLOR: new Color(0.6, 0, 0),\r\n        FOG: { color: 0x440000, near: 150, far: 1000, time: 2000 },\r\n        COLOR_00: [1, .3, 1],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 5,\r\n        SIZE_Y: 7,\r\n        SIZE_Z: 5,\r\n        X: -320,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill: [\r\n            { tile: 'empty', place: [3, 4, 2] },\r\n            { tile: 'empty', place: [3, 3, 2] },\r\n            { tile: 'empty', place: [3, 2, 2] },\r\n            { tile: 'empty', place: [3, 1, 2] },\r\n            { tile: 'empty', place: [3, 0, 2] },\r\n        ],\r\n    },\r\n\r\n        /** 8 */\r\n    /** center hole */\r\n    {\r\n        ENV_COLOR: new Color(0.7, 0.8, 0.7),\r\n        FOG: { color: 0x005555, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [0.5725490196078431, 0.3803921568627451, 0.5725490196078431],\r\n        SIZE_X: 5,\r\n        SIZE_Y: 7,\r\n        SIZE_Z: 5,\r\n        X: -320,\r\n        Y: -270,\r\n        Z: -170,\r\n        mapFill: [\r\n            { tile: 'empty', place: [3, 4, 2] },\r\n            { tile: 'empty', place: [3, 3, 2] },\r\n            { tile: 'empty', place: [3, 2, 2] },\r\n            { tile: 'empty', place: [3, 1, 2] },\r\n            { tile: 'empty', place: [3, 0, 2] },\r\n        ],\r\n    },\r\n\r\n    /** 3 */\r\n    STRUCTURE_TOP_LEFT,\r\n\r\n    /** 4 */\r\n    STRUCTURE_LONG_LEFT,\r\n\r\n    /** 2 */\r\n    STRUCTURE_TOP_RIGHT,\r\n\r\n    /** 7 */\r\n    /** light */\r\n    {\r\n        ENV_COLOR: new Color(0.5725490196078431, 0.5529411764705883, 0.396078431372549),\r\n        FOG: { color: 0x2f2922, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [0.9686274509803922, 0.9490196078431372, 0.8196078431372549],\r\n        mat: 'structureMaterial',\r\n        SIZE_X: 5,\r\n        SIZE_Y: 17,\r\n        SIZE_Z: 5,\r\n        X: -480,\r\n        Y: -430,\r\n        Z: -170,\r\n        mapFill: [\r\n            { tile: 'empty', place: [5, 4, 3] },\r\n            { tile: 'empty', place: [5, 3, 3] },\r\n            { tile: 'empty', place: [5, 2, 3] },\r\n            { tile: 'empty', place: [5, 1, 3] },\r\n            { tile: 'empty', place: [5, 0, 3] },\r\n        ],\r\n    },\r\n\r\n    /** 5 */\r\n    STRUCTURE_TWO_HOUSES,\r\n\r\n    /** 10 */\r\n    /** right */\r\n    {\r\n        ENV_COLOR: new Color(0.05, 0.1, 0.2),\r\n        //ENV_COLOR: new Color(0.1, 0.1, 0.3),\r\n        FOG: { color: 0x34364c, near: 150, far: 1000, time: 2000 },\r\n        COLOR_00: [.1, 1, .5],\r\n        mat: 'structureMaterialInv',\r\n        SIZE_X: 5,\r\n        SIZE_Y: 8,\r\n        SIZE_Z: 5,\r\n        X: 150,\r\n        Y: -300,\r\n        Z: -200,\r\n        mapFill: [],\r\n    },\r\n\r\n\r\n\r\n    /** 6 */\r\n    /** light inverted */\r\n    {\r\n        ENV_COLOR: new Color(.8, .8, .8),\r\n        FOG: { color: 0x888888, near: 150, far: 400, time: 2000 },\r\n        COLOR_00: [1, 1, 1],\r\n        mat: 'structureMaterialInv',\r\n        SIZE_X: 6,\r\n        SIZE_Y: 10,\r\n        SIZE_Z: 6,\r\n        X: -470,\r\n        Y: -500,\r\n        Z: -200,\r\n        mapFill: [\r\n            { tile: 'empty', place: [6, 5, 3] },\r\n            { tile: 'empty', place: [6, 4, 3] },\r\n            { tile: 'empty', place: [6, 3, 3] },\r\n            { tile: 'empty', place: [6, 2, 3] },\r\n            { tile: 'empty', place: [6, 1, 3] },\r\n            { tile: 'empty', place: [6, 0, 3] },\r\n        ],\r\n    },\r\n\r\n    /** 1 */\r\n    STRUCTURE_BIG_HOLE,\r\n\r\n\r\n    /** 9 */\r\n    /** left */\r\n    {\r\n        ENV_COLOR: new Color(0, 0, 0),\r\n        FOG: { color: 0x000000, near: 150, far: 1000, time: 2000 },\r\n        COLOR_00: [1, 1, 1],\r\n        SIZE_X: 5,\r\n        SIZE_Y: 8,\r\n        SIZE_Z: 5,\r\n        X: -780,\r\n        Y: -300,\r\n        Z: -200,\r\n        mapFill: [],\r\n    },\r\n\r\n\r\n\r\n    /** 11 */\r\n    /** inverted */\r\n    {\r\n        ENV_COLOR: new Color(0, 0, 0),\r\n        FOG: { color: 0x2f2922, near: 150, far: 700, time: 2000 },\r\n        COLOR_00: [1, 1, 1],\r\n        mat: 'structureMaterialInv',\r\n        SIZE_X: 7,\r\n        SIZE_Y: 10,\r\n        SIZE_Z: 5,\r\n        X: -480,\r\n        Y: -250,\r\n        Z: -170,\r\n        mapFill: [\r\n            { tile: 'empty', place: [3, 4, 3] },\r\n            { tile: 'empty', place: [3, 3, 3] },\r\n            { tile: 'empty', place: [3, 2, 3] },\r\n            { tile: 'empty', place: [3, 1, 3] },\r\n            { tile: 'empty', place: [3, 0, 3] },\r\n        ],\r\n    },\r\n]\r\n\r\n\r\n\r\nexport const studioConfig = {\r\n    canId: 'webgl-canvas',\r\n    rendererCon: {\r\n        antialias: true\r\n    },\r\n    amb: {\r\n        color: 0xffffff,\r\n        strength: 0.1,\r\n    },\r\n    composerAddPass: 'Saturate',\r\n    //composerAddPass: 'Saturate2',\r\n}\r\n\r\n\r\n\r\n\r\nexport const playerConfig = {\r\n    speed: 0.8,\r\n    speedRot: 0.02,\r\n    speedDown: -0.45,\r\n    offsetFromFloor: 10.0,\r\n    offsetFromFloorFactor: 0.5,\r\n    offsetWallCollision: 3.5,\r\n    level: -13,\r\n    //startPos: [0, -45, 400],\r\n    startPos: [0, -45, 150],\r\n    cameraData: {\r\n        fov: 90,\r\n        ratio: window.innerWidth / window.innerHeight,\r\n        near: 0.1,\r\n        far: 10000,\r\n        pos: [0, 2, -0.5],\r\n    },\r\n    frontObjPos: [0, 0, -1],\r\n    backObjPos: [0, 0, 1],\r\n   lightDataOne: {\r\n        // color: 0x888888,\r\n        // strength: 1,\r\n        // dist: 0,\r\n        // decay: .001,\r\n        // pos: [0, 10, 0],\r\n        color: 0x555555,\r\n        strength: 1,\r\n        dist: 0,\r\n        decay: .001,\r\n        pos: [0, 10, 0],\r\n    },\r\n}\r\n","import * as THREE from 'three'\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\r\nimport { GLTFLoader } from  'three/examples/jsm/loaders/GLTFLoader'\r\n\r\n\r\n\r\n\r\nconst createLoaders = () => {\r\n    let objLoader = null,\r\n        textureLoader = null,\r\n        gltfLoader = null,\r\n        cubeTextureLoader = null,\r\n        soundLoader = null\r\n\r\n\r\n    const getterLoader = type => {\r\n        if (type === 'obj')\r\n            return objLoader = (objLoader || new OBJLoader())\r\n        if (type === 'glb' || type === 'gltf')\r\n            return gltfLoader = (gltfLoader || new GLTFLoader())\r\n        if (type === 'img')\r\n            return textureLoader = (textureLoader || new THREE.TextureLoader())\r\n        if (type === 'cubeTextures') {\r\n            return cubeTextureLoader = (cubeTextureLoader || new THREE.CubeTextureLoader())\r\n        }\r\n        if (type === 'soundMp3') {\r\n            return soundLoader = (soundLoader || new THREE.AudioLoader())\r\n        }\r\n\r\n    }\r\n\r\n    return (path, type) => new Promise(resolve => {\r\n        getterLoader(type).load(path, resolve)\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nexport class LoaderAssets {\r\n\r\n    constructor () {\r\n        this.resources = {}\r\n        this._load = createLoaders()\r\n    }\r\n\r\n    loadAssets (data) {\r\n        return new Promise(resolve => {\r\n\r\n            const load = this._load\r\n            const resources = this.resources\r\n\r\n            async function iterate (index) {\r\n                if (data[index]) {\r\n                    const { key, path, type } = data[index]\r\n                    resources[key] = await load(path, type)\r\n                }\r\n\r\n                ++index\r\n                !data[index]\r\n                    ? resolve(resources)\r\n                    : await iterate(index)\r\n            }\r\n\r\n           void iterate(0)\r\n        })\r\n    }\r\n}\r\n","export class EventEmitter {\r\n    constructor() {\r\n        this._storage = {}\r\n    }\r\n\r\n    emit (id) {\r\n        return data => getOrCreateArrFromObj(this._storage)(id).forEach(action => action(data))\r\n    }\r\n\r\n    subscribe (id) {\r\n        return callback => {\r\n            getOrCreateArrFromObj(this._storage)(id).push(callback)\r\n            return () => this._storage[id] = this._storage[id].filter(item => item !== callback)\r\n        }\r\n    }\r\n\r\n    showAll () {\r\n        const s = {}\r\n        for (let key in this._storage) {\r\n            s[key] = this._storage[key].length\r\n        }\r\n        console.log(s)\r\n    }\r\n}\r\n\r\n\r\nconst getOrCreateArrFromObj = obj => key => obj[key] = obj[key] || []\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as R from 'ramda'\r\n\r\n\r\nexport class FrameUpdater {\r\n    constructor () {\r\n        this._subscribers = []\r\n\r\n\r\n        let data = {\r\n            time: 0,\r\n            delta: 0,\r\n            count: 0,\r\n            oldTime: 0\r\n        }\r\n\r\n        const getDataFromGlobalVar = () => data\r\n\r\n        const updateTime = data => {\r\n            data.time = Date.now()\r\n            return data\r\n        }\r\n\r\n        const updateDelta = data => {\r\n            data.delta = (data.time - data.oldTime) * 0.001\r\n            if (isNaN(data.delta) || data.delta > 1000 || data.delta === 0 ) {\r\n                data.delta = 1000 / 60 * 0.001\r\n            }\r\n            return data\r\n        }\r\n\r\n        const updateCount = data => {\r\n            data.count = data.delta / (1/60)\r\n            return data\r\n        }\r\n\r\n        // const emit = data => {\r\n        //     emitFrameUpdate(data)\r\n        //     return data\r\n        // }\r\n\r\n        const updateOldTime = data => {\r\n            data.oldTime = data.time\r\n            return data\r\n        }\r\n\r\n        const saveDataInGlobalVar = dataFromChine => {\r\n            data = dataFromChine\r\n            return data\r\n        }\r\n\r\n        const updateSubscribers = data => {\r\n            for (let i = 0; i < this._subscribers.length; ++i) {\r\n                this._subscribers[i]({...data })\r\n            }\r\n            return data;\r\n        }\r\n\r\n        const update = R.pipe(\r\n            getDataFromGlobalVar,\r\n            updateTime,\r\n            updateDelta,\r\n            updateCount,\r\n            updateSubscribers,\r\n            updateOldTime,\r\n            saveDataInGlobalVar\r\n        )\r\n\r\n        const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            update(data)\r\n        }\r\n        animate()\r\n    }\r\n\r\n    on (fn) {\r\n        this._subscribers.push(fn)\r\n        return () => {\r\n            this._subscribers = this._subscribers.filter(item => item !== fn)\r\n        }\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\nimport * as TWEEN from '@tweenjs/tween.js'\r\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js'\r\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js'\r\n// import { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js'\r\n// import { Saturate } from '../../../_CORE/shaders/saturate'\r\n// import { Saturate2 } from '../../../_CORE/shaders/saturate2'\r\n\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\n\r\n\r\nexport class Studio {\r\n    constructor(root) {\r\n        this._root = root\r\n        const { assets, emitter, } = root\r\n        const { canId, rendererCon } = root.CONSTANTS.studioConfig\r\n\r\n        rendererCon.canvas = document.getElementById(canId)\r\n\r\n        this._renderer = new THREE.WebGLRenderer(rendererCon)\r\n        this._renderer.setClearColor(0x990000)\r\n        this._renderer.setPixelRatio(window.devicePixelRatio)\r\n        this._renderer.setSize(window.innerWidth, window.innerHeight)\r\n\r\n        this._scene = new THREE.Scene()\r\n        this._scene.fog = new THREE.Fog(0x440000, 150, 1000)\r\n\r\n\r\n        this._playerCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 5000)\r\n        this._controlsCamera.position.set(0, 500, 100)\r\n        const controls = new OrbitControls(this._controlsCamera, this._renderer.domElement)\r\n        controls.target.set(0, 0, 0)\r\n        controls.update();\r\n\r\n        /** toggle view camera to debug by orbitControls */\r\n        const vec3 = new THREE.Vector3()\r\n        let isPlayerView = true\r\n        let saveFogData = null\r\n\r\n\r\n        const toggleView = () => {\r\n            if (isPlayerView) {\r\n                //saveFogData = { ...this._scene.fog }\r\n                //this._scene.fog.near = 10000\r\n                //this._scene.fog.far = 20000\r\n                isPlayerView = false\r\n\r\n                //this._renderPass.camera = this._controlsCamera\r\n                this._playerCamera.getWorldPosition(vec3)\r\n                //this._controlsCamera.position.x = vec3.x + 100\r\n                //this._controlsCamera.position.y = vec3.y + 100\r\n                //this._controlsCamera.position.z = vec3.z\r\n                //controls.target.set(vec3.x, vec3.y, vec3.z)\r\n                controls.update()\r\n\r\n                // this._scene.fog.near = saveFogData.near\r\n                // this._scene.fog.far = saveFogData.far\r\n\r\n            } else {\r\n                //this._scene.fog.near = saveFogData.near\r\n                //this._scene.fog.far = saveFogData.far\r\n                isPlayerView = true\r\n                //this._renderPass.camera = this._playerCamera\r\n            }\r\n        }\r\n\r\n        emitter.subscribe('keyEvent')(data => {\r\n            if (!data['o']) {\r\n                return;\r\n            }\r\n\r\n            toggleView()\r\n        })\r\n\r\n\r\n\r\n        const resize = () => {\r\n            const size = { width: window.innerWidth, height: window.innerHeight }\r\n            this._renderer.setSize(size.width, size.height)\r\n            // this._composer.setSize(size.width, size.height)\r\n            if (this._controlsCamera) {\r\n                this._controlsCamera.aspect = size.width / size.height\r\n                this._controlsCamera.updateProjectionMatrix()\r\n            }\r\n            if (this._playerCamera) {\r\n                this._playerCamera.aspect = size.width/size.height\r\n                this._playerCamera.updateProjectionMatrix()\r\n            }\r\n        }\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n\r\n\r\n\r\n\r\n        this.addToScene = mesh => this._scene.add(mesh)\r\n        this.removeFromScene = mesh => this._scene.remove(mesh)\r\n\r\n\r\n\r\n        let f = 0\r\n        this.drawFrame = () => {\r\n            f += 0.01\r\n            //l.position.x = Math.sin(f) * 5\r\n            //l.position.z = Math.cos(f) * 5\r\n            if (isPlayerView) {\r\n                this._renderer.render(this._scene, this._playerCamera)\r\n            } else {\r\n                this._renderer.render(this._scene, this._controlsCamera)\r\n            }\r\n           // this._composer.render(this._scene, this._controlsCamera)\r\n        }\r\n\r\n       // setTimeout(() => { toggleView() }, 200)\r\n    }\r\n\r\n\r\n    /** PUBLIC ****************************************/\r\n\r\n    setCamera (cam) {\r\n        cam.aspect = window.innerWidth / window.innerHeight\r\n        cam.updateProjectionMatrix()\r\n        this._playerCamera = cam\r\n        //this._renderPass.camera = this._playerCamera\r\n    }\r\n\r\n    changeFog (sceneFogData) {\r\n        const { near, far, color, time } = sceneFogData\r\n\r\n        const startData = {\r\n            color: this._scene.fog.color,\r\n            near: this._scene.fog.near,\r\n            far: this._scene.fog.far,\r\n        }\r\n        const endData = {\r\n            color: new THREE.Color(color),\r\n            near: near,\r\n            far: far,\r\n        }\r\n\r\n        new TWEEN.Tween(startData)\r\n            .to(endData, time)\r\n            .onUpdate(() => {\r\n                this._scene.fog.color = startData.color\r\n                this._scene.fog.near = startData.near\r\n                this._scene.fog.far = startData.far\r\n            })\r\n            .start()\r\n    }\r\n\r\n    changeEnvColor (colorTarget) {\r\n        const startData = {\r\n            color: this._scene.fog.color,\r\n        } \r\n        const endData = {\r\n            color: colorTarget,\r\n        }\r\n\r\n        new TWEEN.Tween(startData)\r\n        .to(endData, 3000)\r\n        .onUpdate(() => {\r\n            this._scene.fog.color = startData.color\r\n            this._renderer.setClearColor(startData.color.getHex())\r\n        })\r\n        .start()\r\n\r\n    }\r\n}\r\n\r\n","\r\nexport class KeyBoard {\r\n    constructor (gameContext) {\r\n        const { emitter } = gameContext\r\n\r\n        const keys = {\r\n            'up': false,\r\n            'down': false,\r\n            'left': false,\r\n            'right': false,\r\n            'p': false,\r\n        }\r\n\r\n        const keysEnabled = {\r\n            'up': true,\r\n            'down': true,\r\n            'left': true,\r\n            'right': true,\r\n        }\r\n\r\n        this.keysEnabled = keysEnabled\r\n        this.keys = keys\r\n\r\n\r\n        const keyUpdate = function ( keyCode, isDown ) {\r\n            switch( keyCode ) {\r\n                case 38:\r\n                case 87:\r\n                    keysEnabled['up'] && (keys['up'] = isDown)\r\n                    break;\r\n                case 40:\r\n                case 83:\r\n                    keysEnabled['down'] && (keys['down'] = isDown)\r\n                    break;\r\n                case 37:\r\n                case 65:\r\n                    keys['left'] = isDown\r\n                    break;\r\n                case 39:\r\n                case 68:\r\n                    keys['right'] = isDown\r\n                    break;\r\n                case 79: \r\n                    keys['o'] = isDown\r\n                    break;                \r\n                case 80: \r\n                    keys['p'] = isDown\r\n                    break;\r\n                default:\r\n            }\r\n            emitter.emit('keyEvent')(keys)\r\n        }\r\n\r\n\r\n\r\n        document.addEventListener('keydown', event => keyUpdate(event.keyCode, true))\r\n        document.addEventListener('keyup', event => keyUpdate(event.keyCode, false))\r\n\r\n\r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, true)\r\n            if (key === 'butt-right') keyUpdate(39, true)\r\n            if (key === 'butt-front') keyUpdate(38, true)\r\n            if (key === 'butt-back') keyUpdate(40, true)\r\n        })\r\n        emitter.subscribe('mouseUp')(key => {\r\n            if (key === 'butt-left') keyUpdate(37, false)\r\n            if (key === 'butt-right') keyUpdate(39, false)\r\n            if (key === 'butt-front') keyUpdate(38, false)\r\n            if (key === 'butt-back') keyUpdate(40, false)\r\n        })\r\n    }\r\n\r\n    toggleEnableKeys (key, is) {\r\n        this.keysEnabled[key] = is\r\n        !is && (this.keys[key] = false)\r\n    }\r\n}\r\n\r\n","\r\n\r\nexport const checkDevice = () => {\r\n    const isCanTouch = checkTouch()\r\n    const isCanChangeOrientation = checkIsCanOrientation()\r\n\r\n    let deviceByBrowserProps = 'desktop'\r\n    if (isCanTouch && isCanChangeOrientation) {\r\n        deviceByBrowserProps = 'phone'\r\n    }\r\n\r\n    const deviceByUserAgent = checkDeviceByUserAgent()\r\n\r\n    let deviceType\r\n    if (deviceByBrowserProps === 'desktop') {\r\n        deviceType = 'desktop'\r\n    } else {\r\n        if (deviceByUserAgent.mode === 'tablet') {\r\n            deviceType = 'tablet'\r\n        }\r\n        if (deviceByUserAgent.mode === 'phone') {\r\n            if (deviceByUserAgent.isIphone) {\r\n                deviceType = 'iOS_phone'\r\n            } else {\r\n                deviceType = 'Android_phone'\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return {\r\n        mode: deviceByBrowserProps,\r\n        isIphone: deviceByUserAgent.isIphone,\r\n        isChrome: deviceByUserAgent.isChrome,\r\n        isFirefox: deviceByUserAgent.isFirefox,\r\n        isFirefoxIOS: deviceByUserAgent.isFirefoxIOS,\r\n        isWebViewIOS: deviceByUserAgent.isWebViewIOS,\r\n        deviceType,\r\n    }\r\n}\r\n\r\n\r\n\r\nconst checkTouch = () =>\r\n    navigator.maxTouchPoints || 'ontouchstart' in document.documentElement\r\n\r\n\r\n\r\nconst checkIsCanOrientation = () =>\r\n    typeof window.orientation !== 'undefined'\r\n\r\n\r\n\r\nconst checkDeviceByUserAgent = () => {\r\n    let mode = null\r\n    let isIphone = false\r\n\r\n    if (window.navigator.userAgent.match(/iPhone/i)) {\r\n        isIphone = true\r\n    }\r\n\r\n    if (window.navigator.userAgent.match(/Mobile/i)\r\n        || window.navigator.userAgent.match(/iPhone/i)\r\n        || window.navigator.userAgent.match(/iPod/i)\r\n        || window.navigator.userAgent.match(/IEMobile/i)\r\n        || window.navigator.userAgent.match(/Windows Phone/i)\r\n        || window.navigator.userAgent.match(/Android/i)\r\n        || window.navigator.userAgent.match(/BlackBerry/i)\r\n        || window.navigator.userAgent.match(/webOS/i)) {\r\n        mode = 'phone';\r\n    }\r\n\r\n    if (window.navigator.userAgent.match(/Tablet/i)\r\n        || window.navigator.userAgent.match(/iPad/i)\r\n        || window.navigator.userAgent.match(/Nexus 7/i)\r\n        || window.navigator.userAgent.match(/Nexus 10/i)\r\n        || window.navigator.userAgent.match(/KFAPWI/i)) {\r\n        mode = 'tablet'\r\n    }\r\n\r\n    if (window.navigator.userAgent.match(/Intel Mac/i)) {\r\n        mode = 'desktop'\r\n    }\r\n\r\n    let isChrome = false\r\n    if (navigator.userAgent.match('CriOS')) {\r\n        isChrome = true\r\n    }\r\n\r\n    let isFirefoxIOS = false\r\n    if (navigator.userAgent.match(\"FxiOS\")) {\r\n        isFirefoxIOS = true\r\n    }\r\n\r\n    let isFirefox = false\r\n    if (navigator.userAgent.indexOf(\"Firefox\") > 0) {\r\n        isFirefox = true\r\n    }\r\n\r\n    const isWebViewIOS = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);\r\n\r\n\r\n    return { mode, isIphone, isChrome, isFirefox, isFirefoxIOS, isWebViewIOS }\r\n}\r\n","import * as THREE from 'three'\r\nimport { PointerLockControls } from 'three/examples/jsm/controls/PointerLockControls.js';\r\nimport { checkDevice } from '../helpers/checkerDevice'\r\n\r\n\r\nexport class Player {\r\n    constructor (root) {\r\n        const { studio, CONSTANTS } = root\r\n\r\n        const {\r\n            cameraData,\r\n            lightDataOne,\r\n        } = CONSTANTS.playerConfig\r\n\r\n\r\n        this._camera = null\r\n        this.isBlocked = true\r\n        this.isFreeze = true\r\n\r\n        const device = checkDevice()\r\n        this.isNeedControls = device.deviceType === 'desktop'\r\n        console.log(device.deviceType)\r\n\r\n\r\n        this.mesh = new THREE.Object3D()\r\n\r\n        {\r\n            const { fov, ratio, near, far } = cameraData\r\n            this._camera = new THREE.PerspectiveCamera(fov, ratio, near, far)\r\n            this._camera.position.fromArray([0, 0, -2])\r\n            if (this.isNeedControls) {\r\n                this.controls = new PointerLockControls(this._camera, document.body );\r\n                this.mesh = this._camera\r\n            } else {\r\n                this.mesh.add(this._camera)\r\n            }\r\n        }\r\n\r\n\r\n        this.mesh.rotation.fromArray([0, 0, 0])\r\n        this.mesh.userData.type = 'player'\r\n\r\n\r\n        this.bottomObj = new THREE.Object3D()\r\n        this.bottomObj.position.fromArray([0, -.02, 0])\r\n        this.mesh.add(this.bottomObj)\r\n\r\n        this.frontObj = new THREE.Object3D()\r\n        this.frontObj.position.fromArray([0, 0, -.02])\r\n        this.mesh.add(this.frontObj)\r\n\r\n        this.backObj = new THREE.Object3D()\r\n        this.backObj.position.fromArray([0, 0, 0.02])\r\n        this.mesh.add(this.backObj)\r\n\r\n\r\n\r\n\r\n        if (lightDataOne) {\r\n            const { color, strenth, pos } = lightDataOne\r\n            const light = new THREE.PointLight(color, strenth)\r\n            light.position.fromArray(pos)\r\n            this.mesh.add(light)\r\n        }\r\n\r\n        ///////////// TEST /////////////\r\n\r\n        studio.setCamera(this._camera)\r\n        studio.addToScene(this.mesh)\r\n\r\n\r\n        root.emitter.subscribe('clickButtonMouse')(() => {\r\n            this.controlsLock()\r\n        })\r\n\r\n        document.addEventListener(\"pointerlockchange\", () => {\r\n            if (document.pointerLockElement === document.body) {\r\n            } else {\r\n                this._camera.rotation.z = 0\r\n                this._camera.rotation.x = 0\r\n            }\r\n        })\r\n    }\r\n\r\n    // toggleBlocked (val) {\r\n    //     this.isFeeze = val\r\n    // }\r\n\r\n    toggleFeeze (val) {\r\n        this.isFeeze = val\r\n    }\r\n\r\n    toggleCanMove(key, val) {\r\n        //this._isCanMove[key] = val\r\n    }\r\n\r\n    getObj () {\r\n        return this.mesh\r\n    }\r\n\r\n    getCamera () {\r\n        return this._camera\r\n    }\r\n    \r\n    setToPos (x, y, z) {\r\n        this.mesh.position.set(x, y, z)\r\n    }\r\n\r\n    controlsLock () {\r\n        if (this.controls) {\r\n            this.controls.lock()\r\n        }\r\n    }\r\n\r\n    controlsUnlock () {\r\n        if (this.controls) {\r\n            this.controls.unlock()\r\n            this._camera.rotation.z = 0\r\n            this._camera.rotation.x = 0\r\n        }\r\n    }\r\n}\r\n","import * as THREE from \"three\";\r\n\r\n\r\nexport class helper_CollisionsItems_v02 {\r\n    constructor () {\r\n        this._arrMeshes = []\r\n\r\n\r\n        this._vecStart = new THREE.Vector3()\r\n        this._vecDir = new THREE.Vector3()\r\n        this._rayCaster = new THREE.Raycaster(this._vecStart, this._vecDir)\r\n    }\r\n\r\n    setItemToCollision (mesh) {\r\n        for (let i = 0; i < this._arrMeshes.length; ++i) {\r\n            if (this._arrMeshes[i] === mesh) {\r\n                return;\r\n            }\r\n        }\r\n        this._arrMeshes.push(mesh)\r\n    }\r\n\r\n\r\n    removeItemFromCollision (mesh) {\r\n        this._arrMeshes = this._arrMeshes.filter(item => item !== mesh)\r\n    }\r\n\r\n\r\n    checkCollisions (objFrom, objTo, dist) {\r\n        objFrom.getWorldPosition(this._vecStart)\r\n        objTo.getWorldPosition(this._vecDir)\r\n\r\n        this._vecDir.sub(this._vecStart)\r\n\r\n        //console.log(this._arrMeshes)\r\n        const intersects = this._rayCaster.intersectObjects(this._arrMeshes)\r\n\r\n        if (intersects[0] && intersects[0].distance < dist) {\r\n            return [ true, intersects[0] ]\r\n        }\r\n        return [ false, null ]\r\n    }\r\n}","import { helper_CollisionsItems_v02 } from '../../../_CORE/helpers/helper_CollisionsItems_v02'\r\nimport * as THREE from 'three'\r\n\r\n\r\n\r\nexport class system_PlayerMoveOnLevel {\r\n    constructor (root) {\r\n\r\n\r\n        const {\r\n            emitter,\r\n            CONSTANTS,\r\n            player,\r\n            assets,\r\n            studio,\r\n        } = root\r\n\r\n\r\n        //player.mesh.position.fromArray([0, -40, 0])\r\n        player.mesh.position.fromArray([0, 0, 0])\r\n\r\n        this._collisionsBottom = new helper_CollisionsItems_v02()\r\n        this._collisionsWalls = new helper_CollisionsItems_v02()\r\n\r\n        const {\r\n            speed,\r\n            speedDown,\r\n            speedRot,\r\n        } = CONSTANTS.playerConfig\r\n\r\n        let isBlocked = true\r\n        player.toggleBlocked = val => isBlocked = val\r\n\r\n        this.isCanMove = {\r\n            'forward': true,\r\n            'back': true,\r\n        }\r\n        player.toggleCanMove = (dir, val) => this.isCanMove[dir] = val\r\n\r\n\r\n        this._isTabCurrent = true\r\n        document.addEventListener(\"visibilitychange\", function() {\r\n            if (document.visibilityState === 'visible') {\r\n                this._isTabCurrent = true\r\n            } else {\r\n                this._isTabCurrent = false\r\n            }\r\n        });\r\n\r\n        this.isFreeze = false\r\n        let keys = {}\r\n\r\n        const OFFSET_FROM_PLANES = 17\r\n        const OFFSET_FROM_PLANES_TO_DROP = 17.2\r\n\r\n\r\n\r\n\r\n        const checkBottomAndDropDownPlayer = data => {\r\n            const [isCollision, collision] = this._collisionsBottom.checkCollisions(player.mesh, player.bottomObj, OFFSET_FROM_PLANES_TO_DROP)\r\n\r\n            /** move player to top if on stairs */\r\n            if (isCollision && OFFSET_FROM_PLANES > collision.distance) {\r\n                player.mesh.translateY(OFFSET_FROM_PLANES - collision.distance)\r\n\r\n                return;\r\n            }\r\n\r\n\r\n            //console.log(data.count)\r\n            /** free down without intercepts */\r\n            if (!isCollision) {\r\n                player.mesh.position.y += (speedDown * data.count)\r\n            }\r\n\r\n        }\r\n\r\n\r\n        const checkAndMoveFront = data => {\r\n            const [isCollision, collision] = this._collisionsWalls.checkCollisions(player.mesh, player.frontObj, OFFSET_FROM_PLANES)\r\n\r\n            /** update level new area */\r\n            if (isCollision) {\r\n                if (collision.object.userData.type && collision.object.userData.type === 'alert') {\r\n                    emitter.emit('collision')(collision.object.userData.event)\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (player.controls && player.controls.isLocked) {\r\n                player.controls.moveForward(speed * data.count)\r\n            } else {\r\n                player.mesh.translateZ(-speed * data.count)\r\n            }\r\n\r\n\r\n            emitter.emit('playerMove')('forward')\r\n        }\r\n\r\n\r\n\r\n        const checkAndMoveBack = data => {\r\n            const [isCollision] = this._collisionsWalls.checkCollisions(player.mesh, player.backObj, OFFSET_FROM_PLANES)\r\n            if (isCollision) return;\r\n\r\n            if (player.controls && player.controls.isLocked) {\r\n                player.controls.moveForward(-speed * data.count)\r\n            } else {\r\n                player.mesh.translateZ(speed * data.count)\r\n            }\r\n\r\n\r\n            emitter.emit('playerMove')('back')\r\n        }\r\n\r\n\r\n        let isSoundWalk = false\r\n        let savedPos = new THREE.Vector3()\r\n\r\n        this.update = data => {\r\n            if (!this._isTabCurrent) {\r\n                return;\r\n            }\r\n\r\n            if (this.isFreeze) {\r\n                return;\r\n            }\r\n\r\n            if (player.controls && player.controls.isLocked) {\r\n                keys['left'] && player.controls.moveRight(-speedRot * data.count * 40)\r\n                keys['right'] && player.controls.moveRight(speedRot * data.count * 40)\r\n            } else {\r\n                keys['left'] && player.mesh.rotateY(speedRot * data.count)\r\n                keys['right'] && player.mesh.rotateY(-speedRot * data.count)\r\n            }\r\n\r\n\r\n\r\n            if (isBlocked) return;\r\n            \r\n\r\n            savedPos.x = player.mesh.position.x\r\n            savedPos.y = player.mesh.position.y\r\n            savedPos.z = player.mesh.position.z\r\n\r\n\r\n            keys['up'] && this.isCanMove['forward'] && checkAndMoveFront(data)\r\n            keys['down'] && this.isCanMove['back'] && checkAndMoveBack(data)\r\n\r\n\r\n\r\n            if (\r\n                savedPos.x === player.mesh.position.x &&\r\n                savedPos.z === player.mesh.position.z &&\r\n                isSoundWalk\r\n            ) {\r\n                isSoundWalk = false\r\n                root.system_Sound.stopWalk()\r\n            }\r\n\r\n\r\n            let isMustStartSound = false\r\n            if (\r\n                (savedPos.x !== player.mesh.position.x || savedPos.z !== player.mesh.position.z) &&\r\n                !isSoundWalk\r\n            ) {\r\n                isMustStartSound = true\r\n            }\r\n\r\n\r\n            checkBottomAndDropDownPlayer(data)\r\n\r\n            if (savedPos.y > player.mesh.position.y) {\r\n                isSoundWalk = false\r\n                root.system_Sound.stopWalk()\r\n                isMustStartSound = false\r\n            }\r\n\r\n            if (isMustStartSound) {\r\n                isSoundWalk = true\r\n                root.system_Sound.startWalk()\r\n            }\r\n\r\n            keys['p'] && console.log(`player.mesh.position.fromArray([${player.mesh.position.x}, ${player.mesh.position.y}, ${player.mesh.position.z}])`)\r\n        }\r\n\r\n\r\n\r\n        emitter.subscribe('keyEvent')(data => keys = data)\r\n        //emitter.subscribe('frameUpdate')(update)\r\n    }\r\n\r\n\r\n    addItemToPlayerCollision (item) {\r\n        this._collisionsBottom.setItemToCollision(item)\r\n    }\r\n\r\n    removeItemFromPlayerCollision (item) {\r\n        this._collisionsBottom.removeItemFromCollision(item)\r\n    }\r\n\r\n    addItemToPlayerCollisionWalls (item) {\r\n        this._collisionsWalls.setItemToCollision(item)\r\n    }\r\n    \r\n    removeItemToPlayerCollisionWalls (item) {\r\n        this._collisionsWalls.removeItemFromCollision(item)\r\n    }\r\n\r\n    toggleFreeze (val = !this.isFreeze) {\r\n        this.isFreeze = val\r\n    }\r\n}\r\n\r\n\r\n","\r\n\r\nconst makeQueue = (map, SIZE_X, SIZE_Y, SIZE_Z) => {\r\n    const m = {}\r\n    for (let i = 0; i < map.length; ++i) {\r\n        for (let j = 0; j < map[i].length; ++j) {\r\n            for (let k = 0; k < map[i][j].length; ++k) {\r\n                m[i + '_' + j + '_' + k] = map[i][j][k]\r\n            }\r\n        }\r\n    }\r\n\r\n    let indInsert = 0\r\n    let indComplete = 0\r\n    const q = []\r\n    const iterate = (i, j, k) => {\r\n        if (!m[`${ i }_${ j }_${ k }`]) {\r\n            return;\r\n        }\r\n\r\n        if (!m[`${ i }_${ j }_${ k }`].queue) {\r\n            q.push([i, j, k])\r\n            ++indComplete\r\n            ++indInsert\r\n            m[`${ i }_${ j }_${ k }`].queue = { ind: indInsert, calk: true }\r\n        } else {\r\n            ++indComplete\r\n            m[`${ i }_${ j }_${ k }`].queue.calk = true\r\n        }\r\n\r\n        if (m[`${ i }_${ j }_${ k + 1 }`] && !m[`${ i }_${ j }_${ k + 1 }`].queue) {\r\n            q.push([i, j, k + 1])\r\n            ++indInsert\r\n            m[`${ i }_${ j }_${ k + 1 }`].queue = { ind: indInsert }\r\n        }\r\n\r\n        if (m[`${ i }_${ j }_${ k - 1 }`] && !m[`${ i }_${ j }_${ k - 1 }`].queue) {\r\n            q.push([i, j, k - 1])\r\n            ++indInsert\r\n            m[`${ i }_${ j }_${ k - 1 }`].queue = { ind: indInsert }\r\n        }\r\n\r\n        if (m[`${ i }_${ j + 1 }_${ k }`] && !m[`${ i }_${ j + 1 }_${ k }`].queue) {\r\n            q.push([i, j + 1, k])\r\n            ++indInsert\r\n            m[`${ i }_${ j + 1 }_${ k }`].queue = { ind: indInsert }\r\n        }\r\n\r\n        if (m[`${ i }_${ j - 1 }_${ k }`] && !m[`${ i }_${ j - 1 }_${ k }`].queue) {\r\n            q.push([i, j - 1, k])\r\n            ++indInsert\r\n            m[`${ i }_${ j - 1 }_${ k }`].queue = { ind: indInsert }\r\n        }\r\n        if (q[indComplete + 1]) {\r\n            iterate(...q[indComplete + 1])\r\n        } else {\r\n            iterate(i + 1, 4, 4)\r\n        }\r\n\r\n    }\r\n    iterate(0, Math.floor(SIZE_Z / 2), Math.floor(SIZE_X / 2))\r\n    return q\r\n}\r\n\r\n\r\n\r\nexport const createMap3X = (tiles, dataStructure) => {\r\n    const { SIZE_X, SIZE_Y, SIZE_Z } = dataStructure\r\n\r\n    const arrY = []\r\n    for (let i = 0; i < SIZE_Y; ++i) {\r\n        const arrZ = []\r\n        for (let j = 0; j < SIZE_Z; ++j) {\r\n            const arrX = []\r\n            for (let k = 0; k < SIZE_X; ++k) {\r\n                const s = []\r\n                tiles.map((item, index) => { s.push(index) })\r\n                arrX.push({\r\n                    resultTileIndex: null,\r\n                    maybeTilesInds: s,\r\n                    i,\r\n                    j,\r\n                    k,\r\n                })\r\n            }\r\n            arrZ.push(arrX)\r\n        }\r\n        arrY.push(arrZ)\r\n    }\r\n\r\n\r\n    const queue = makeQueue(arrY, SIZE_X, SIZE_Y, SIZE_Z)\r\n    let ind = 0\r\n\r\n    return {\r\n        sizeZ: SIZE_Z,\r\n        sizeY: SIZE_Y,\r\n        sizeX: SIZE_X,\r\n        items: arrY,\r\n        checkNextMapItemIndexes: (y, z, x) => {\r\n            if (queue[ind]) {\r\n                const next = queue[ind]\r\n                ++ind\r\n                return { nextY: next[0], nextZ: next[1], nextX: next[2] }\r\n            } else {\r\n                return { nextY: null, nextZ: null, nextX: null }\r\n            }\r\n        },\r\n        iterateAll: (f) => {\r\n            for (let i = 0; i < SIZE_Y; ++i) {\r\n                for (let j = 0; j < SIZE_Z; ++j) {\r\n                    for (let k = 0; k < SIZE_X; ++k) {\r\n                        f(arrY[i][j][k])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { createMap3X } from './map3SHelper'\r\n//import { map3SArtifactsFilter } from './map3SArtefactsFilter'\r\n\r\n// const button = document.createElement('button')\r\n// button.innerText = 'NEXT'\r\n// document.body.appendChild(button)\r\n// button.style.position = 'absolute'\r\n// button.style.zIndex = '100'\r\n// button.style.top = '0'\r\n// let f = null\r\n\r\n\r\nconst choiceFinalTileFromExists = (dataAction, map) => {\r\n    const [y, z, x] = dataAction.src\r\n    const mapItem = map[y][z][x]\r\n    //console.log(y, z, x, mapItem)\r\n\r\n    if (Number.isInteger(mapItem.resultTileIndex)) {\r\n        return;\r\n    }\r\n    if (!mapItem.maybeTilesInds.length) {\r\n        mapItem.resultTileIndex = -1 //Math.floor(Math.random() * 16)\r\n        mapItem.maybeTilesInds = []\r\n        return;\r\n    }\r\n\r\n    const indTile = mapItem.maybeTilesInds[Math.floor(Math.random() * mapItem.maybeTilesInds.length)]\r\n    mapItem.resultTileIndex = indTile\r\n    mapItem.maybeTilesInds = [indTile]\r\n}\r\n\r\nconst filterMaybeArrByCompare = (dataAction, map, tiles) => {\r\n    const [y, z, x] = dataAction.src\r\n    const [yWith, zWith, xWith] = dataAction.with\r\n    const { withProp } = dataAction\r\n\r\n    if (!map[y] || !map[y][z] || !map[y][z][x]) {\r\n        return;\r\n    }\r\n    if (Number.isInteger(map[y][z][x].resultTileIndex)) {\r\n        return;\r\n    }\r\n\r\n    if (!map[yWith] || !map[yWith][zWith] || !map[yWith][zWith][xWith]) {\r\n        return;\r\n    }\r\n\r\n\r\n    const arrNotChange = map[yWith][zWith][xWith].maybeTilesInds\r\n    const arrCurrent = map[y][z][x].maybeTilesInds\r\n\r\n    if (!arrNotChange || !arrNotChange.length || !arrCurrent || !arrCurrent.length) {\r\n        return;\r\n    }\r\n\r\n    const newArr = []\r\n    for (let i = 0; i < arrNotChange.length; ++i) {\r\n        const arrCanBe = tiles[arrNotChange[i]][withProp]\r\n        for (let j = 0; j < arrCanBe.length; ++j) {\r\n            for (let k = 0; k < arrCurrent.length; ++k) {\r\n                if (arrCanBe[j] === arrCurrent[k]) {\r\n                    newArr.push(arrCurrent[k])\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const filteredArr = []\r\n    for (let i = 0; i < newArr.length; ++i) {\r\n        let isIn = false\r\n        for (let j = 0; j < filteredArr.length; ++j) {\r\n            if (filteredArr[j] === newArr[i]) {\r\n                isIn = true\r\n            }\r\n        }\r\n        if (!isIn) {\r\n            filteredArr.push(newArr[i])\r\n        }\r\n    }\r\n\r\n    map[y][z][x].maybeTilesInds = filteredArr\r\n}\r\n\r\n\r\n\r\nconst actionsWithMapItem = {\r\n    choiceFinalTileFromExists,\r\n    filterMaybeArrByCompare,\r\n}\r\n\r\n\r\n\r\n\r\nconst createPipelineActionsWithMapItem = (y, z, x, map) => {\r\n    const actions = [\r\n        { action: 'choiceFinalTileFromExists', src: [y, z, x], },\r\n\r\n        /** Z */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z - 1, x],  with: [y, z, x], withProp: 'canConnectNZ' },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z + 1, x], with: [y, z, x], withProp: 'canConnectPZ' },\r\n\r\n        /** X */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z, x - 1], with: [y, z, x], withProp: 'canConnectNX'  },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z, x + 1], with: [y, z, x], withProp: 'canConnectPX'  },\r\n\r\n        /** Z - 1, X - 1 */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z - 1, x - 1], with: [y, z - 1, x], withProp: 'canConnectNX'  },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z - 1, x - 1], with: [y, z, x - 1], withProp: 'canConnectNZ'  },\r\n\r\n        /** Z - 1, X + 1 */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z - 1, x + 1], with: [y, z - 1, x], withProp: 'canConnectPX'  },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z - 1, x + 1], with: [y, z, x + 1], withProp: 'canConnectNZ'  },\r\n\r\n        /** Z + 1, X + 1 */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z + 1, x + 1], with: [y, z, x + 1], withProp: 'canConnectPZ'  },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z + 1, x + 1], with: [y, z + 1, x], withProp: 'canConnectPX'  },\r\n\r\n        /** Z + 1, X - 1 */\r\n        { action: 'filterMaybeArrByCompare', src: [y, z + 1, x - 1], with: [y, z + 1, x], withProp: 'canConnectNX'  },\r\n        { action: 'filterMaybeArrByCompare', src: [y, z + 1, x - 1], with: [y, z, x - 1], withProp: 'canConnectPZ'  },\r\n\r\n        /** -- Y */\r\n\r\n        /** ++Y */\r\n        { action: 'filterMaybeArrByCompare', src: [y + 1, z, x], with: [y, z, x], withProp: 'canConnectPY' },\r\n\r\n        { action: 'filterMaybeArrByCompare', src: [y + 1, z - 1, x], with: [y, z - 1, x], withProp: 'canConnectPY' },\r\n        { action: 'filterMaybeArrByCompare', src: [y + 1, z + 1, x], with: [y, z + 1, x], withProp: 'canConnectPY' },\r\n        { action: 'filterMaybeArrByCompare', src: [y + 1, z, x - 1], with: [y, z, x - 1], withProp: 'canConnectPY' },\r\n        { action: 'filterMaybeArrByCompare', src: [y + 1, z, x - 1], with: [y, z, x - 1], withProp: 'canConnectPY' },\r\n    ]\r\n\r\n    return actions\r\n}\r\n\r\n\r\n\r\nexport const createMap = (tiles) => {\r\n    let map\r\n\r\n    return {\r\n        generateMap: (dataStructure) => {\r\n            let maxCallStack = 10000\r\n\r\n            return new Promise(res => {\r\n                console.log('!!! tiles', tiles)\r\n                /** create start map */\r\n\r\n                map = createMap3X(tiles, dataStructure)\r\n                console.log('!!! map', map)\r\n\r\n                const { mapFill } = dataStructure\r\n                for (let i = 0; i < mapFill.length; ++i) {\r\n                    const { place } = mapFill[i]\r\n                    map.items[place[0]][place[1]][place[2]].resultTileIndex = 0\r\n                    map.items[place[0]][place[1]][place[2]].maybeTilesInds = [0]\r\n                }\r\n\r\n\r\n                /** pipeline actions with tile */\r\n                const pipelineActions = (y, z, x, map) => {\r\n                    return new Promise(res => {\r\n                        const actions = createPipelineActionsWithMapItem(y, z, x, map)\r\n                        const iterateAction = (indAction) => {\r\n                            if (!actions[indAction]) {\r\n                                return res();\r\n                            }\r\n                            const action = actions[indAction]\r\n                            actionsWithMapItem[action.action](action, map.items, tiles)\r\n\r\n                            // if (f) {\r\n                            //     button.removeEventListener('click', f)\r\n                            // }\r\n                            // f = () => {\r\n                            //     iterateAction(indAction + 1)\r\n                            // }\r\n                            // button.addEventListener('click', f)\r\n                            //setTimeout(() => {iterateAction(indAction + 1)}, 0)\r\n                            iterateAction(indAction + 1)\r\n                        }\r\n                        iterateAction(0)\r\n                    })\r\n                }\r\n\r\n\r\n                const calculateMapItem = (y, z, x) => {\r\n                    return new Promise((res, rej) => {\r\n                        --maxCallStack\r\n                        if (maxCallStack < 0) {\r\n                            console.log('max stack:', maxCallStack )\r\n                            return rej();\r\n                        }\r\n\r\n                        /** choice tile and filter neighbours */\r\n                        pipelineActions(y, z, x, map).then(() => {\r\n                            /** add mesh to scene */\r\n                            if (map.items[y][z][x].hasOwnProperty('resultTileIndex') && Number.isInteger(map.items[y][z][x].resultTileIndex)) {\r\n                                map.items[y][z][x].tileData = tiles[map.items[y][z][x].resultTileIndex]\r\n                                //makerMesh.addMesh(map.items[y][z][x])\r\n                            }\r\n                            res()\r\n                        })\r\n                    })\r\n                }\r\n\r\n                const nextItem = () => {\r\n                    const {nextY, nextZ, nextX} = map.checkNextMapItemIndexes()\r\n                    if (\r\n                        Number.isInteger(nextY) &&\r\n                        Number.isInteger(nextZ) &&\r\n                        Number.isInteger(nextX)\r\n                    ) {\r\n                        calculateMapItem(nextY, nextZ, nextX).then(nextItem)\r\n                        //setTimeout(() => {  }, 0)\r\n                    } else {\r\n                        console.log('$$$$--')\r\n                        res(map)\r\n                    }\r\n                }\r\n\r\n                nextItem()\r\n            })\r\n        },\r\n        destroyMap: () => {\r\n            for (let i = 0; i < map.items.length; ++i) {\r\n                for (let j = 0; j < map.items[i].length; ++j) {\r\n                    for (let k = 0; k < map.items[i][j].length; ++k) {\r\n                        for (let key in map.items[i][j][k]) {\r\n                            delete map.items[i][j][k][key]\r\n                        }\r\n                        delete map.items[i][j][k]\r\n                    }\r\n                    delete map.items[i][j]\r\n                }\r\n                delete map.items[i]\r\n            }\r\n            map = null\r\n        },\r\n    }\r\n}\r\n","/*\r\n * Copyright 2021 GFXFundamentals.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of GFXFundamentals. nor the names of his\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n    /**\r\n     * An array or typed array with 3 values.\r\n     * @typedef {number[]|TypedArray} Vector3\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 4 values.\r\n     * @typedef {number[]|TypedArray} Vector4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n    /**\r\n     * An array or typed array with 16 values.\r\n     * @typedef {number[]|TypedArray} Matrix4\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n\r\n\r\n    let MatType = Float32Array;\r\n\r\n    /**\r\n     * Sets the type this library creates for a Mat4\r\n     * @param {constructor} Ctor the constructor for the type. Either `Float32Array` or `Array`\r\n     * @return {constructor} previous constructor for Mat4\r\n     */\r\n    function setDefaultType(Ctor) {\r\n        const OldType = MatType;\r\n        MatType = Ctor;\r\n        return OldType;\r\n    }\r\n\r\n    /**\r\n     * Takes two 4-by-4 matrices, a and b, and computes the product in the order\r\n     * that pre-composes b with a.  In other words, the matrix returned will\r\n     * transform by b first and then a.  Note this is subtly different from just\r\n     * multiplying the matrices together.  For given a and b, this function returns\r\n     * the same object in both row-major and column-major mode.\r\n     * @param {Matrix4} a A matrix.\r\n     * @param {Matrix4} b A matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function multiply(a, b, dst) {\r\n        dst = dst || new MatType(16);\r\n        var b00 = b[0 * 4 + 0];\r\n        var b01 = b[0 * 4 + 1];\r\n        var b02 = b[0 * 4 + 2];\r\n        var b03 = b[0 * 4 + 3];\r\n        var b10 = b[1 * 4 + 0];\r\n        var b11 = b[1 * 4 + 1];\r\n        var b12 = b[1 * 4 + 2];\r\n        var b13 = b[1 * 4 + 3];\r\n        var b20 = b[2 * 4 + 0];\r\n        var b21 = b[2 * 4 + 1];\r\n        var b22 = b[2 * 4 + 2];\r\n        var b23 = b[2 * 4 + 3];\r\n        var b30 = b[3 * 4 + 0];\r\n        var b31 = b[3 * 4 + 1];\r\n        var b32 = b[3 * 4 + 2];\r\n        var b33 = b[3 * 4 + 3];\r\n        var a00 = a[0 * 4 + 0];\r\n        var a01 = a[0 * 4 + 1];\r\n        var a02 = a[0 * 4 + 2];\r\n        var a03 = a[0 * 4 + 3];\r\n        var a10 = a[1 * 4 + 0];\r\n        var a11 = a[1 * 4 + 1];\r\n        var a12 = a[1 * 4 + 2];\r\n        var a13 = a[1 * 4 + 3];\r\n        var a20 = a[2 * 4 + 0];\r\n        var a21 = a[2 * 4 + 1];\r\n        var a22 = a[2 * 4 + 2];\r\n        var a23 = a[2 * 4 + 3];\r\n        var a30 = a[3 * 4 + 0];\r\n        var a31 = a[3 * 4 + 1];\r\n        var a32 = a[3 * 4 + 2];\r\n        var a33 = a[3 * 4 + 3];\r\n        dst[ 0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;\r\n        dst[ 1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;\r\n        dst[ 2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;\r\n        dst[ 3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;\r\n        dst[ 4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;\r\n        dst[ 5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;\r\n        dst[ 6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;\r\n        dst[ 7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;\r\n        dst[ 8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;\r\n        dst[ 9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;\r\n        dst[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;\r\n        dst[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;\r\n        dst[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;\r\n        dst[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;\r\n        dst[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;\r\n        dst[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;\r\n        return dst;\r\n    }\r\n\r\n\r\n    /**\r\n     * adds 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function addVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] + b[0];\r\n        dst[1] = a[1] + b[1];\r\n        dst[2] = a[2] + b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * subtracts 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function subtractVectors(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[0] - b[0];\r\n        dst[1] = a[1] - b[1];\r\n        dst[2] = a[2] - b[2];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * scale vectors3\r\n     * @param {Vector3} v vector\r\n     * @param {Number} s scale\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaleVector(v, s, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = v[0] * s;\r\n        dst[1] = v[1] * s;\r\n        dst[2] = v[2] * s;\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * normalizes a vector.\r\n     * @param {Vector3} v vector to normalize\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function normalize(v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var length = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n        // make sure we don't divide by 0.\r\n        if (length > 0.00001) {\r\n            dst[0] = v[0] / length;\r\n            dst[1] = v[1] / length;\r\n            dst[2] = v[2] / length;\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the length of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length of vector\r\n     */\r\n    function length(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the length squared of a vector\r\n     * @param {Vector3} v vector to take length of\r\n     * @return {number} length sqaured of vector\r\n     */\r\n    function lengthSq(v) {\r\n        return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];\r\n    }\r\n\r\n    /**\r\n     * Computes the cross product of 2 vectors3s\r\n     * @param {Vector3} a a\r\n     * @param {Vector3} b b\r\n     * @param {Vector3} dst optional vector3 to store result\r\n     * @return {Vector3} dst or new Vector3 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function cross(a, b, dst) {\r\n        dst = dst || new MatType(3);\r\n        dst[0] = a[1] * b[2] - a[2] * b[1];\r\n        dst[1] = a[2] * b[0] - a[0] * b[2];\r\n        dst[2] = a[0] * b[1] - a[1] * b[0];\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes the dot product of two vectors; assumes both vectors have\r\n     * three entries.\r\n     * @param {Vector3} a Operand vector.\r\n     * @param {Vector3} b Operand vector.\r\n     * @return {number} dot product\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function dot(a, b) {\r\n        return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\r\n    }\r\n\r\n    /**\r\n     * Computes the distance squared between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance squared between a and b\r\n     */\r\n    function distanceSq(a, b) {\r\n        const dx = a[0] - b[0];\r\n        const dy = a[1] - b[1];\r\n        const dz = a[2] - b[2];\r\n        return dx * dx + dy * dy + dz * dz;\r\n    }\r\n\r\n    /**\r\n     * Computes the distance between 2 points\r\n     * @param {Vector3} a\r\n     * @param {Vector3} b\r\n     * @return {number} distance between a and b\r\n     */\r\n    function distance(a, b) {\r\n        return Math.sqrt(distanceSq(a, b));\r\n    }\r\n\r\n    /**\r\n     * Makes an identity matrix.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function identity(dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Transposes a matrix.\r\n     * @param {Matrix4} m matrix to transpose.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transpose(m, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = m[0];\r\n        dst[ 1] = m[4];\r\n        dst[ 2] = m[8];\r\n        dst[ 3] = m[12];\r\n        dst[ 4] = m[1];\r\n        dst[ 5] = m[5];\r\n        dst[ 6] = m[9];\r\n        dst[ 7] = m[13];\r\n        dst[ 8] = m[2];\r\n        dst[ 9] = m[6];\r\n        dst[10] = m[10];\r\n        dst[11] = m[14];\r\n        dst[12] = m[3];\r\n        dst[13] = m[7];\r\n        dst[14] = m[11];\r\n        dst[15] = m[15];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Creates a lookAt matrix.\r\n     * This is a world matrix for a camera. In other words it will transform\r\n     * from the origin to a place and orientation in the world. For a view\r\n     * matrix take the inverse of this.\r\n     * @param {Vector3} cameraPosition position of the camera\r\n     * @param {Vector3} target position of the target\r\n     * @param {Vector3} up direction\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function lookAt(cameraPosition, target, up, dst) {\r\n        dst = dst || new MatType(16);\r\n        var zAxis = normalize(\r\n            subtractVectors(cameraPosition, target));\r\n        var xAxis = normalize(cross(up, zAxis));\r\n        var yAxis = normalize(cross(zAxis, xAxis));\r\n\r\n        dst[ 0] = xAxis[0];\r\n        dst[ 1] = xAxis[1];\r\n        dst[ 2] = xAxis[2];\r\n        dst[ 3] = 0;\r\n        dst[ 4] = yAxis[0];\r\n        dst[ 5] = yAxis[1];\r\n        dst[ 6] = yAxis[2];\r\n        dst[ 7] = 0;\r\n        dst[ 8] = zAxis[0];\r\n        dst[ 9] = zAxis[1];\r\n        dst[10] = zAxis[2];\r\n        dst[11] = 0;\r\n        dst[12] = cameraPosition[0];\r\n        dst[13] = cameraPosition[1];\r\n        dst[14] = cameraPosition[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the angular height\r\n     * of the frustum, the aspect ratio, and the near and far clipping planes.  The\r\n     * arguments define a frustum extending in the negative z direction.  The given\r\n     * angle is the vertical angle of the frustum, and the horizontal angle is\r\n     * determined to produce the given aspect ratio.  The arguments near and far are\r\n     * the distances to the near and far clipping planes.  Note that near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  The matrix generated sends the viewing frustum to the unit box.\r\n     * We assume a unit box extending from -1 to 1 in the x and y dimensions and\r\n     * from -1 to 1 in the z dimension.\r\n     * @param {number} fieldOfViewInRadians field of view in y axis.\r\n     * @param {number} aspect aspect of viewport (width / height)\r\n     * @param {number} near near Z clipping plane\r\n     * @param {number} far far Z clipping plane\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function perspective(fieldOfViewInRadians, aspect, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n        var f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewInRadians);\r\n        var rangeInv = 1.0 / (near - far);\r\n\r\n        dst[ 0] = f / aspect;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = f;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = (near + far) * rangeInv;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = near * far * rangeInv * 2;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 orthographic projection matrix given the coordinates of the\r\n     * planes defining the axis-aligned, box-shaped viewing volume.  The matrix\r\n     * generated sends that box to the unit box.  Note that although left and right\r\n     * are x coordinates and bottom and top are y coordinates, near and far\r\n     * are not z coordinates, but rather they are distances along the negative\r\n     * z-axis.  We assume a unit box extending from -1 to 1 in the x and y\r\n     * dimensions and from -1 to 1 in the z dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function orthographic(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 2 / (right - left);\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 / (top - bottom);\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 2 / (near - far);\r\n        dst[11] = 0;\r\n        dst[12] = (left + right) / (left - right);\r\n        dst[13] = (bottom + top) / (bottom - top);\r\n        dst[14] = (near + far) / (near - far);\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Computes a 4-by-4 perspective transformation matrix given the left, right,\r\n     * top, bottom, near and far clipping planes. The arguments define a frustum\r\n     * extending in the negative z direction. The arguments near and far are the\r\n     * distances to the near and far clipping planes. Note that near and far are not\r\n     * z coordinates, but rather they are distances along the negative z-axis. The\r\n     * matrix generated sends the viewing frustum to the unit box. We assume a unit\r\n     * box extending from -1 to 1 in the x and y dimensions and from -1 to 1 in the z\r\n     * dimension.\r\n     * @param {number} left The x coordinate of the left plane of the box.\r\n     * @param {number} right The x coordinate of the right plane of the box.\r\n     * @param {number} bottom The y coordinate of the bottom plane of the box.\r\n     * @param {number} top The y coordinate of the right plane of the box.\r\n     * @param {number} near The negative z coordinate of the near plane of the box.\r\n     * @param {number} far The negative z coordinate of the far plane of the box.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function frustum(left, right, bottom, top, near, far, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var dx = right - left;\r\n        var dy = top - bottom;\r\n        var dz = far - near;\r\n\r\n        dst[ 0] = 2 * near / dx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 2 * near / dy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = (left + right) / dx;\r\n        dst[ 9] = (top + bottom) / dy;\r\n        dst[10] = -(far + near) / dz;\r\n        dst[11] = -1;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = -2 * near * far / dz;\r\n        dst[15] = 0;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a translation matrix\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translation(tx, ty, tz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = tx;\r\n        dst[13] = ty;\r\n        dst[14] = tz;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by translation matrix.\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} tx x translation.\r\n     * @param {number} ty y translation.\r\n     * @param {number} tz z translation.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function translate(m, tx, ty, tz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, translation(tx, ty, tz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m00;\r\n            dst[ 1] = m01;\r\n            dst[ 2] = m02;\r\n            dst[ 3] = m03;\r\n            dst[ 4] = m10;\r\n            dst[ 5] = m11;\r\n            dst[ 6] = m12;\r\n            dst[ 7] = m13;\r\n            dst[ 8] = m20;\r\n            dst[ 9] = m21;\r\n            dst[10] = m22;\r\n            dst[11] = m23;\r\n        }\r\n\r\n        dst[12] = m00 * tx + m10 * ty + m20 * tz + m30;\r\n        dst[13] = m01 * tx + m11 * ty + m21 * tz + m31;\r\n        dst[14] = m02 * tx + m12 * ty + m22 * tz + m32;\r\n        dst[15] = m03 * tx + m13 * ty + m23 * tz + m33;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an x rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = 1;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = c;\r\n        dst[ 6] = s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = -s;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an x rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function xRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, xRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[4]  = c * m10 + s * m20;\r\n        dst[5]  = c * m11 + s * m21;\r\n        dst[6]  = c * m12 + s * m22;\r\n        dst[7]  = c * m13 + s * m23;\r\n        dst[8]  = c * m20 - s * m10;\r\n        dst[9]  = c * m21 - s * m11;\r\n        dst[10] = c * m22 - s * m12;\r\n        dst[11] = c * m23 - s * m13;\r\n\r\n        if (m !== dst) {\r\n            dst[ 0] = m[ 0];\r\n            dst[ 1] = m[ 1];\r\n            dst[ 2] = m[ 2];\r\n            dst[ 3] = m[ 3];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an y rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = -s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = 1;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = s;\r\n        dst[ 9] = 0;\r\n        dst[10] = c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an y rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function yRotate(m, angleInRadians, dst) {\r\n        // this is the optimized version of\r\n        // return multiply(m, yRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 - s * m20;\r\n        dst[ 1] = c * m01 - s * m21;\r\n        dst[ 2] = c * m02 - s * m22;\r\n        dst[ 3] = c * m03 - s * m23;\r\n        dst[ 8] = c * m20 + s * m00;\r\n        dst[ 9] = c * m21 + s * m01;\r\n        dst[10] = c * m22 + s * m02;\r\n        dst[11] = c * m23 + s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 4] = m[ 4];\r\n            dst[ 5] = m[ 5];\r\n            dst[ 6] = m[ 6];\r\n            dst[ 7] = m[ 7];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an z rotation matrix\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotation(angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c;\r\n        dst[ 1] = s;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = -s;\r\n        dst[ 5] = c;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = 1;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an z rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function zRotate(m, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, zRotation(angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n\r\n        dst[ 0] = c * m00 + s * m10;\r\n        dst[ 1] = c * m01 + s * m11;\r\n        dst[ 2] = c * m02 + s * m12;\r\n        dst[ 3] = c * m03 + s * m13;\r\n        dst[ 4] = c * m10 - s * m00;\r\n        dst[ 5] = c * m11 - s * m01;\r\n        dst[ 6] = c * m12 - s * m02;\r\n        dst[ 7] = c * m13 - s * m03;\r\n\r\n        if (m !== dst) {\r\n            dst[ 8] = m[ 8];\r\n            dst[ 9] = m[ 9];\r\n            dst[10] = m[10];\r\n            dst[11] = m[11];\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes an rotation matrix around an arbitrary axis\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotation(axis, angleInRadians, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        dst[ 0] = xx + (1 - xx) * c;\r\n        dst[ 1] = x * y * oneMinusCosine + z * s;\r\n        dst[ 2] = x * z * oneMinusCosine - y * s;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = x * y * oneMinusCosine - z * s;\r\n        dst[ 5] = yy + (1 - yy) * c;\r\n        dst[ 6] = y * z * oneMinusCosine + x * s;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = x * z * oneMinusCosine + y * s;\r\n        dst[ 9] = y * z * oneMinusCosine - x * s;\r\n        dst[10] = zz + (1 - zz) * c;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by an axis rotation matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {Vector3} axis axis to rotate around\r\n     * @param {number} angleInRadians amount to rotate\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function axisRotate(m, axis, angleInRadians, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, axisRotation(axis, angleInRadians), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        var x = axis[0];\r\n        var y = axis[1];\r\n        var z = axis[2];\r\n        var n = Math.sqrt(x * x + y * y + z * z);\r\n        x /= n;\r\n        y /= n;\r\n        z /= n;\r\n        var xx = x * x;\r\n        var yy = y * y;\r\n        var zz = z * z;\r\n        var c = Math.cos(angleInRadians);\r\n        var s = Math.sin(angleInRadians);\r\n        var oneMinusCosine = 1 - c;\r\n\r\n        var r00 = xx + (1 - xx) * c;\r\n        var r01 = x * y * oneMinusCosine + z * s;\r\n        var r02 = x * z * oneMinusCosine - y * s;\r\n        var r10 = x * y * oneMinusCosine - z * s;\r\n        var r11 = yy + (1 - yy) * c;\r\n        var r12 = y * z * oneMinusCosine + x * s;\r\n        var r20 = x * z * oneMinusCosine + y * s;\r\n        var r21 = y * z * oneMinusCosine - x * s;\r\n        var r22 = zz + (1 - zz) * c;\r\n\r\n        var m00 = m[0];\r\n        var m01 = m[1];\r\n        var m02 = m[2];\r\n        var m03 = m[3];\r\n        var m10 = m[4];\r\n        var m11 = m[5];\r\n        var m12 = m[6];\r\n        var m13 = m[7];\r\n        var m20 = m[8];\r\n        var m21 = m[9];\r\n        var m22 = m[10];\r\n        var m23 = m[11];\r\n\r\n        dst[ 0] = r00 * m00 + r01 * m10 + r02 * m20;\r\n        dst[ 1] = r00 * m01 + r01 * m11 + r02 * m21;\r\n        dst[ 2] = r00 * m02 + r01 * m12 + r02 * m22;\r\n        dst[ 3] = r00 * m03 + r01 * m13 + r02 * m23;\r\n        dst[ 4] = r10 * m00 + r11 * m10 + r12 * m20;\r\n        dst[ 5] = r10 * m01 + r11 * m11 + r12 * m21;\r\n        dst[ 6] = r10 * m02 + r11 * m12 + r12 * m22;\r\n        dst[ 7] = r10 * m03 + r11 * m13 + r12 * m23;\r\n        dst[ 8] = r20 * m00 + r21 * m10 + r22 * m20;\r\n        dst[ 9] = r20 * m01 + r21 * m11 + r22 * m21;\r\n        dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\r\n        dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Makes a scale matrix\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scaling(sx, sy, sz, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx;\r\n        dst[ 1] = 0;\r\n        dst[ 2] = 0;\r\n        dst[ 3] = 0;\r\n        dst[ 4] = 0;\r\n        dst[ 5] = sy;\r\n        dst[ 6] = 0;\r\n        dst[ 7] = 0;\r\n        dst[ 8] = 0;\r\n        dst[ 9] = 0;\r\n        dst[10] = sz;\r\n        dst[11] = 0;\r\n        dst[12] = 0;\r\n        dst[13] = 0;\r\n        dst[14] = 0;\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Multiply by a scaling matrix\r\n     * @param {Matrix4} m matrix to multiply\r\n     * @param {number} sx x scale.\r\n     * @param {number} sy y scale.\r\n     * @param {number} sz z scale.\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function scale(m, sx, sy, sz, dst) {\r\n        // This is the optimized version of\r\n        // return multiply(m, scaling(sx, sy, sz), dst);\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = sx * m[0 * 4 + 0];\r\n        dst[ 1] = sx * m[0 * 4 + 1];\r\n        dst[ 2] = sx * m[0 * 4 + 2];\r\n        dst[ 3] = sx * m[0 * 4 + 3];\r\n        dst[ 4] = sy * m[1 * 4 + 0];\r\n        dst[ 5] = sy * m[1 * 4 + 1];\r\n        dst[ 6] = sy * m[1 * 4 + 2];\r\n        dst[ 7] = sy * m[1 * 4 + 3];\r\n        dst[ 8] = sz * m[2 * 4 + 0];\r\n        dst[ 9] = sz * m[2 * 4 + 1];\r\n        dst[10] = sz * m[2 * 4 + 2];\r\n        dst[11] = sz * m[2 * 4 + 3];\r\n\r\n        if (m !== dst) {\r\n            dst[12] = m[12];\r\n            dst[13] = m[13];\r\n            dst[14] = m[14];\r\n            dst[15] = m[15];\r\n        }\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * creates a matrix from translation, quaternion, scale\r\n     * @param {Number[]} translation [x, y, z] translation\r\n     * @param {Number[]} quaternion [x, y, z, z] quaternion rotation\r\n     * @param {Number[]} scale [x, y, z] scale\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     */\r\n    function compose(translation, quaternion, scale, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        const x = quaternion[0];\r\n        const y = quaternion[1];\r\n        const z = quaternion[2];\r\n        const w = quaternion[3];\r\n\r\n        const x2 = x + x;\r\n        const y2 = y + y;\r\n        const z2 = z + z;\r\n\r\n        const xx = x * x2;\r\n        const xy = x * y2;\r\n        const xz = x * z2;\r\n\r\n        const yy = y * y2;\r\n        const yz = y * z2;\r\n        const zz = z * z2;\r\n\r\n        const wx = w * x2;\r\n        const wy = w * y2;\r\n        const wz = w * z2;\r\n\r\n        const sx = scale[0];\r\n        const sy = scale[1];\r\n        const sz = scale[2];\r\n\r\n        dst[0] = (1 - (yy + zz)) * sx;\r\n        dst[1] = (xy + wz) * sx;\r\n        dst[2] = (xz - wy) * sx;\r\n        dst[3] = 0;\r\n\r\n        dst[4] = (xy - wz) * sy;\r\n        dst[5] = (1 - (xx + zz)) * sy;\r\n        dst[6] = (yz + wx) * sy;\r\n        dst[7] = 0;\r\n\r\n        dst[ 8] = (xz + wy) * sz;\r\n        dst[ 9] = (yz - wx) * sz;\r\n        dst[10] = (1 - (xx + yy)) * sz;\r\n        dst[11] = 0;\r\n\r\n        dst[12] = translation[0];\r\n        dst[13] = translation[1];\r\n        dst[14] = translation[2];\r\n        dst[15] = 1;\r\n\r\n        return dst;\r\n    }\r\n\r\n    function quatFromRotationMatrix(m, dst) {\r\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n        const m11 = m[0];\r\n        const m12 = m[4];\r\n        const m13 = m[8];\r\n        const m21 = m[1];\r\n        const m22 = m[5];\r\n        const m23 = m[9];\r\n        const m31 = m[2];\r\n        const m32 = m[6];\r\n        const m33 = m[10];\r\n\r\n        const trace = m11 + m22 + m33;\r\n\r\n        if (trace > 0) {\r\n            const s = 0.5 / Math.sqrt(trace + 1);\r\n            dst[3] = 0.25 / s;\r\n            dst[0] = (m32 - m23) * s;\r\n            dst[1] = (m13 - m31) * s;\r\n            dst[2] = (m21 - m12) * s;\r\n        } else if (m11 > m22 && m11 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m11 - m22 - m33);\r\n            dst[3] = (m32 - m23) / s;\r\n            dst[0] = 0.25 * s;\r\n            dst[1] = (m12 + m21) / s;\r\n            dst[2] = (m13 + m31) / s;\r\n        } else if (m22 > m33) {\r\n            const s = 2 * Math.sqrt(1 + m22 - m11 - m33);\r\n            dst[3] = (m13 - m31) / s;\r\n            dst[0] = (m12 + m21) / s;\r\n            dst[1] = 0.25 * s;\r\n            dst[2] = (m23 + m32) / s;\r\n        } else {\r\n            const s = 2 * Math.sqrt(1 + m33 - m11 - m22);\r\n            dst[3] = (m21 - m12) / s;\r\n            dst[0] = (m13 + m31) / s;\r\n            dst[1] = (m23 + m32) / s;\r\n            dst[2] = 0.25 * s;\r\n        }\r\n    }\r\n\r\n    function decompose(mat, translation, quaternion, scale) {\r\n        let sx = m4.length(mat.slice(0, 3));\r\n        const sy = m4.length(mat.slice(4, 7));\r\n        const sz = m4.length(mat.slice(8, 11));\r\n\r\n        // if determinate is negative, we need to invert one scale\r\n        const det = determinate(mat);\r\n        if (det < 0) {\r\n            sx = -sx;\r\n        }\r\n\r\n        translation[0] = mat[12];\r\n        translation[1] = mat[13];\r\n        translation[2] = mat[14];\r\n\r\n        // scale the rotation part\r\n        const matrix = m4.copy(mat);\r\n\r\n        const invSX = 1 / sx;\r\n        const invSY = 1 / sy;\r\n        const invSZ = 1 / sz;\r\n\r\n        matrix[0] *= invSX;\r\n        matrix[1] *= invSX;\r\n        matrix[2] *= invSX;\r\n\r\n        matrix[4] *= invSY;\r\n        matrix[5] *= invSY;\r\n        matrix[6] *= invSY;\r\n\r\n        matrix[8] *= invSZ;\r\n        matrix[9] *= invSZ;\r\n        matrix[10] *= invSZ;\r\n\r\n        quatFromRotationMatrix(matrix, quaternion);\r\n\r\n        scale[0] = sx;\r\n        scale[1] = sy;\r\n        scale[2] = sz;\r\n    }\r\n\r\n    function determinate(m) {\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        return 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n    }\r\n\r\n    /**\r\n     * Computes the inverse of a matrix.\r\n     * @param {Matrix4} m matrix to compute inverse of\r\n     * @param {Matrix4} [dst] optional matrix to store result\r\n     * @return {Matrix4} dst or a new matrix if none provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function inverse(m, dst) {\r\n        dst = dst || new MatType(16);\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var tmp_12 = m20 * m31;\r\n        var tmp_13 = m30 * m21;\r\n        var tmp_14 = m10 * m31;\r\n        var tmp_15 = m30 * m11;\r\n        var tmp_16 = m10 * m21;\r\n        var tmp_17 = m20 * m11;\r\n        var tmp_18 = m00 * m31;\r\n        var tmp_19 = m30 * m01;\r\n        var tmp_20 = m00 * m21;\r\n        var tmp_21 = m20 * m01;\r\n        var tmp_22 = m00 * m11;\r\n        var tmp_23 = m10 * m01;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n            (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n            (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n            (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n            (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n\r\n        dst[0] = d * t0;\r\n        dst[1] = d * t1;\r\n        dst[2] = d * t2;\r\n        dst[3] = d * t3;\r\n        dst[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n            (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\r\n        dst[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n            (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\r\n        dst[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n            (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\r\n        dst[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n            (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\r\n        dst[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n            (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\r\n        dst[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n            (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\r\n        dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n            (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\r\n        dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n            (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\r\n        dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n            (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\r\n        dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n            (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\r\n        dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n            (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\r\n        dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n            (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a  matrix and a vector with 4 entries, transforms that vector by\r\n     * the matrix, and returns the result as a vector with 4 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector4} v The point in homogenous coordinates.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformVector(m, v, dst) {\r\n        dst = dst || new MatType(4);\r\n        for (var i = 0; i < 4; ++i) {\r\n            dst[i] = 0.0;\r\n            for (var j = 0; j < 4; ++j) {\r\n                dst[i] += v[j] * m[j * 4 + i];\r\n            }\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries,\r\n     * interprets the vector as a point, transforms that point by the matrix, and\r\n     * returns the result as a vector with 3 entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The point.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformPoint(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n        var d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];\r\n\r\n        dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;\r\n        dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;\r\n        dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix and a vector with 3 entries, interprets the vector as a\r\n     * direction, transforms that direction by the matrix, and returns the result;\r\n     * assumes the transformation of 3-dimensional space represented by the matrix\r\n     * is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion. Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The direction.\r\n     * @param {Vector4} dst optional vector4 to store result\r\n     * @return {Vector4} dst or new Vector4 if not provided\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformDirection(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\r\n        dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\r\n        dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    /**\r\n     * Takes a 4-by-4 matrix m and a vector v with 3 entries, interprets the vector\r\n     * as a normal to a surface, and computes a vector which is normal upon\r\n     * transforming that surface by the matrix. The effect of this function is the\r\n     * same as transforming v (as a direction) by the inverse-transpose of m.  This\r\n     * function assumes the transformation of 3-dimensional space represented by the\r\n     * matrix is parallel-preserving, i.e. any combination of rotation, scaling and\r\n     * translation, but not a perspective distortion.  Returns a vector with 3\r\n     * entries.\r\n     * @param {Matrix4} m The matrix.\r\n     * @param {Vector3} v The normal.\r\n     * @param {Vector3} [dst] The direction.\r\n     * @return {Vector3} The transformed direction.\r\n     * @memberOf module:webgl-3d-math\r\n     */\r\n    function transformNormal(m, v, dst) {\r\n        dst = dst || new MatType(3);\r\n        var mi = inverse(m);\r\n        var v0 = v[0];\r\n        var v1 = v[1];\r\n        var v2 = v[2];\r\n\r\n        dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];\r\n        dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];\r\n        dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];\r\n\r\n        return dst;\r\n    }\r\n\r\n    function copy(src, dst) {\r\n        dst = dst || new MatType(16);\r\n\r\n        dst[ 0] = src[ 0];\r\n        dst[ 1] = src[ 1];\r\n        dst[ 2] = src[ 2];\r\n        dst[ 3] = src[ 3];\r\n        dst[ 4] = src[ 4];\r\n        dst[ 5] = src[ 5];\r\n        dst[ 6] = src[ 6];\r\n        dst[ 7] = src[ 7];\r\n        dst[ 8] = src[ 8];\r\n        dst[ 9] = src[ 9];\r\n        dst[10] = src[10];\r\n        dst[11] = src[11];\r\n        dst[12] = src[12];\r\n        dst[13] = src[13];\r\n        dst[14] = src[14];\r\n        dst[15] = src[15];\r\n\r\n        return dst;\r\n    }\r\n\r\nexport const m4 = {\r\n        copy: copy,\r\n        lookAt: lookAt,\r\n        addVectors: addVectors,\r\n        subtractVectors: subtractVectors,\r\n        scaleVector: scaleVector,\r\n        distance: distance,\r\n        distanceSq: distanceSq,\r\n        normalize: normalize,\r\n        compose: compose,\r\n        cross: cross,\r\n        decompose: decompose,\r\n        dot: dot,\r\n        identity: identity,\r\n        transpose: transpose,\r\n        length: length,\r\n        lengthSq: lengthSq,\r\n        orthographic: orthographic,\r\n        frustum: frustum,\r\n        perspective: perspective,\r\n        translation: translation,\r\n        translate: translate,\r\n        xRotation: xRotation,\r\n        yRotation: yRotation,\r\n        zRotation: zRotation,\r\n        xRotate: xRotate,\r\n        yRotate: yRotate,\r\n        zRotate: zRotate,\r\n        axisRotation: axisRotation,\r\n        axisRotate: axisRotate,\r\n        scaling: scaling,\r\n        scale: scale,\r\n        multiply: multiply,\r\n        inverse: inverse,\r\n        transformVector: transformVector,\r\n        transformPoint: transformPoint,\r\n        transformDirection: transformDirection,\r\n        transformNormal: transformNormal,\r\n        setDefaultType: setDefaultType,\r\n}\r\n\r\n","import { m4 } from './m4'\r\n\r\nconst {\r\n    //floor,\r\n    random,\r\n} = Math\r\n//const ranN = (start, end) => start + floor(random() * (end - start))\r\nexport const ran = (start, end) => start + random() * (end - start)\r\n\r\n\r\n\r\nexport const createFace = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const createUv = (v1, v2, v3, v4) => [...v1, ...v2, ...v3, ...v1, ...v3, ...v4]\r\nexport const fillColorFace = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const fillColor6 = c => [...c, ...c, ...c, ...c, ...c, ...c]\r\nexport const getAngle = (x, y) => {\r\n    let inRads = Math.atan2(y, x);\r\n    return inRads - Math.PI / 2\r\n}\r\n\r\nexport const angleFromCoords = (x, y) => {\r\n    let rad = Math.atan(y / x)\r\n    x < 0 && y > 0 && (rad = Math.PI - Math.abs(rad))\r\n    x < 0 && y <= 0 && (rad = Math.PI + Math.abs(rad))\r\n    return rad\r\n}\r\n\r\n\r\n\r\nexport const createFaceWithSquare = (v1, v2, v3, v4, color1, color2, offset) => {\r\n    const maxW = v2[0] - v1[0]\r\n    const maxH = v3[1] - v1[1]\r\n\r\n    let innerW = ran(maxW * 0.3, maxW * 0.7)\r\n    let innerH = ran(maxH * 0.3, maxH * 0.7)\r\n\r\n    if (offset) {\r\n        innerW = maxW * offset\r\n        innerH = maxH * offset\r\n    }\r\n\r\n    const x1 = v1[0] + (maxW - innerW) / 2\r\n    const x2 = v2[0] - (maxW - innerW) / 2\r\n    const y1 = v1[1] + (maxH - innerH) / 2\r\n    const y2 = v3[1] - (maxH - innerH) / 2\r\n\r\n    const v1_i = [x1, y1, v1[2]]\r\n    const v2_i = [x2, y1, v1[2]]\r\n    const v3_i = [x2, y2, v1[2]]\r\n    const v4_i = [x1, y2, v1[2]]\r\n\r\n    const vArr = []\r\n    vArr.push(\r\n        ...createFace(v1_i, v2_i, v3_i, v4_i),\r\n        ...createFace(v1, v2, v2_i, v1_i),\r\n        ...createFace(v2_i, v2, v3, v3_i),\r\n        ...createFace(v4_i, v3_i, v3, v4),\r\n        ...createFace(v1, v1_i, v4_i, v4),\r\n    )\r\n\r\n    const cArr = fillColorFaceWithSquare(color1, color2)\r\n\r\n    const uArr = [\r\n        ...createUv(\r\n            [.5, .5],\r\n            [1, .5],\r\n            [1, 1],\r\n            [.5, 1],\r\n        ),\r\n\r\n        ...createUv(\r\n            [0, .5],\r\n            [.5, .5],\r\n            //[.5, 1],\r\n            //[0, 1],\r\n            [.4, .6],\r\n            [.1, .6],\r\n        ),\r\n        ...createUv(\r\n            [.4, .6],\r\n            [.5, .5],\r\n            [.5, 1],\r\n            [.4, .9],\r\n        ),\r\n        ...createUv(\r\n            [.1, .9],\r\n            [.4, .9],\r\n            [.5, 1],\r\n            [0, 1],\r\n        ),\r\n        ...createUv(\r\n            [0, .5],\r\n            [.1, .6],\r\n            [.1, .9],\r\n            [0, 1],\r\n        )\r\n    ]\r\n\r\n\r\n    return { \r\n        vArr,\r\n        cArr,\r\n        uArr,\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const fillColorFaceWithSquare = (c1, c2) => [\r\n    ...fillColorFace(c1),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n    ...fillColorFace(c2),\r\n]\r\n\r\n\r\n\r\nexport const transformArr = (arr, x = 0, y = 0, z = 0, r = 0) => {\r\n    let matrix = m4.yRotation(r);\r\n    matrix = m4.translate(matrix, x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArr = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrY = (arr, angle) => {\r\n    const matrix = m4.yRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const rotateArrZ = (arr, angle) => {\r\n    const matrix = m4.zRotation(angle);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\n\r\nexport const translateArr = (arr, x = 0, y = 0, z = 0) => {\r\n    const matrix = m4.translation(x, y, z);\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const scaleArr = (arr, sX, sY, sZ) => {\r\n    const matrix = m4.scaling(sX, sY, sZ)\r\n\r\n    for (let i = 0; i < arr.length; i += 3) {\r\n        const vector = m4.transformPoint(matrix, [arr[i + 0], arr[i + 1], arr[i + 2], 1])\r\n        arr[i + 0] = vector[0]\r\n        arr[i + 1] = vector[1]\r\n        arr[i + 2] = vector[2]\r\n    }\r\n}\r\n\r\nexport const inverseVertexOrder = copyV => {\r\n    for (let i = 0; i < copyV.length; i += 18) {\r\n        const n0_0 = copyV[i]\r\n        const n0_1 = copyV[i + 1]\r\n        const n0_2 = copyV[i + 2]\r\n\r\n        const n1_0 = copyV[i + 3]\r\n        const n1_1 = copyV[i + 3 + 1]\r\n        const n1_2 = copyV[i + 3 + 2]\r\n\r\n        const n4_0 = copyV[i + 12]\r\n        const n4_1 = copyV[i + 12 + 1]\r\n        const n4_2 = copyV[i + 12 + 2]\r\n\r\n        const n5_0 = copyV[i + 15]\r\n        const n5_1 = copyV[i + 15 + 1]\r\n        const n5_2 = copyV[i + 15 + 2]\r\n\r\n\r\n        copyV[i] = n1_0\r\n        copyV[i + 1] = n1_1\r\n        copyV[i + 2] = n1_2\r\n\r\n        copyV[i + 3] = n0_0\r\n        copyV[i + 3 + 1] = n0_1\r\n        copyV[i + 3 + 2] = n0_2\r\n\r\n        copyV[i + 12] = n5_0\r\n        copyV[i + 12 + 1] = n5_1\r\n        copyV[i + 12 + 2] = n5_2\r\n\r\n        copyV[i + 15] = n4_0\r\n        copyV[i + 15 + 1] = n4_1\r\n        copyV[i + 15 + 2] = n4_2\r\n    }\r\n}\r\n","import { createUv } from '../../../helpers/geomHelpers'\r\n\r\nconst v033 = 1 / 3\r\nconst v066 = v033 * 2\r\n\r\n\r\nexport const tileUv = {\r\n    'line_p0': createUv([0, 0.75], [0.25, 0.75], [0.25, 1], [0, 1]),\r\n    'line_p1': createUv([0, 0.5], [0.25, 0.5], [0.25, 0.75], [0, 0.75]),\r\n\r\n    'columnSide_0':  createUv([0, 0], [0.0625, 0], [0.0625, 0.25], [0, 0.25]),\r\n    'columnSide_1':  createUv([0.0625, 0], [0.125, 0], [0.125, 0.25], [0.0625, 0.25]),\r\n    'columnSide_2':  createUv([0.125, 0], [0.1875, 0], [0.1875, 0.25], [0.125, 0.25]),\r\n    'columnSide_3':  createUv([0.1875, 0], [0.25, 0], [0.25, 0.25], [0.1875, 0.25]),\r\n\r\n    'three': [0.125, 0.5,    0, 0.25,    0.25, 0.25],\r\n\r\n    'lines': createUv([0.5, 0], [0.75, 0], [0.75, .25], [0.5, .25]),\r\n    'points': createUv([0.25, 0], [0.5, 0], [0.5, .25], [0.25, .25]),\r\n    'empty': createUv([0.25, 0.25], [0.5, 0.25], [0.5, .5], [0.25, .5]),\r\n    'briks': createUv([0.75, 0], [1, 0], [1, .25], [0.75, .25]),\r\n\r\n    'gor_pattern_00': createUv([0.25, 0.96875], [0.5, 0.96875], [0.5, 1], [0.25, 1]),\r\n    'gor_pattern_01': createUv([0.25, 0.9375], [0.5, 0.9375], [0.5, 0.96875], [0.25, 0.96875]),\r\n\r\n    'face_00': createUv([0.5, 0.75], [0.75, 0.75], [0.75, 1], [0.5, 1]),\r\n\r\n    'white': createUv([0.75, 0.5], [1, 0.5], [1, .75], [0.75, .75]),\r\n\r\n\r\n    '0_0': createUv([0, 0], [v033, 0], [v033, v033], [0, v033]),\r\n    '1_0': createUv([v033, 0], [v066, 0], [v066, v033], [v033, v033]),\r\n    '2_0': createUv([v066, 0], [1, 0], [1, v033], [v066, v033]),\r\n\r\n    '0_1': createUv([0, v033], [v033, v033], [v033, v066], [0, v066]),\r\n    '1_1': createUv([v033, v033], [v066, v033], [v066, v066], [v033, v066]),\r\n    '2_1': createUv([v066, v033], [1, v033], [1, v066], [v066, v066]),\r\n\r\n    '0_2': createUv([0, v066], [v033, v066], [v033, 1], [0, 1]),\r\n    '1_2': createUv([v033, v066], [v066, v066], [v066, 1], [v033, 1]),\r\n    '2_2': createUv([v066, v066], [1, v066], [1, 1], [v066, 1]),\r\n}\r\n\r\nconst l = ['columnSide_1', 'columnSide_2', 'columnSide_3']\r\nexport const randomTile = () => {\r\n    const k = l[Math.floor(Math.random() * l.length)]\r\n    return tileUv[k]\r\n}\r\n","import {H} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {\r\n    tileUv,\r\n    randomTile,\r\n} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst { sin, cos } = Math\r\n\r\nexport const createColumnData = ({\r\n                              h = H,\r\n                              w = 3,\r\n                              bottomW = 5,\r\n                              bottomH = 5,\r\n                              topH =15,\r\n                          }) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const h1 = bottomH + 2\r\n    const h2 = h - topH - 2\r\n    const h3 = h - topH\r\n\r\n    const SIDES = 8\r\n    const R1 = w\r\n    const R2 = bottomW\r\n\r\n    const colorPolygon = fillColorFace(COLOR_00)\r\n\r\n    /** base *****/\r\n    for (let i = 0; i < SIDES; ++i) {\r\n        let a0 = (i - 1) / SIDES * Math.PI * 2\r\n        if (i === 0) {\r\n            a0 = (SIDES - 1) / SIDES * Math.PI * 2\r\n        }\r\n        const a1 = i / SIDES  * Math.PI * 2\r\n\r\n\r\n        v.push(\r\n            0, -8, 0,\r\n            sin(a1) * R2, 0, cos(a1) * R2,\r\n            sin(a0) * R2, 0, cos(a0) * R2,\r\n\r\n            ...createFace(\r\n                [sin(a0) * R2, 0, cos(a0) * R2],\r\n                [sin(a1) * R2, 0, cos(a1) * R2],\r\n                [sin(a1) * R2, bottomH, cos(a1) * R2],\r\n                [sin(a0) * R2, bottomH, cos(a0) * R2],\r\n            ),\r\n\r\n            ...createFace(\r\n                [sin(a0) * R2, bottomH, cos(a0) * R2],\r\n                [sin(a1) * R2, bottomH, cos(a1) * R2],\r\n                [sin(a1) * R1, h1, cos(a1) * R1],\r\n                [sin(a0) * R1, h1, cos(a0) * R1],\r\n            ),\r\n        )\r\n\r\n        u.push(\r\n            ...tileUv['three'],\r\n            ...tileUv['empty'],\r\n            ...tileUv['line_p1'],\r\n        )\r\n\r\n        c.push(\r\n            ...COLOR_00,\r\n            ...COLOR_00,\r\n            ...COLOR_00,\r\n            ...colorPolygon,\r\n            ...colorPolygon,\r\n        )\r\n    }\r\n\r\n    let savedL = h1\r\n    while (savedL < h2) {\r\n        let currentL = Math.random() * 30 + 2\r\n        if (savedL + currentL > h2) {\r\n            currentL = h2 - savedL\r\n        }\r\n\r\n        for (let i = 0; i < SIDES; ++i) {\r\n            let a0 = (i - 1) / SIDES * Math.PI * 2\r\n            if (i === 0) {\r\n                a0 = (SIDES - 1) / SIDES * Math.PI * 2\r\n            }\r\n            const a1 = i / SIDES * Math.PI * 2\r\n\r\n\r\n            v.push(\r\n                ...createFace(\r\n                    [sin(a0) * R1, savedL, cos(a0) * R1],\r\n                    [sin(a1) * R1, savedL, cos(a1) * R1],\r\n                    [sin(a1) * R1, savedL + currentL, cos(a1) * R1],\r\n                    [sin(a0) * R1, savedL + currentL, cos(a0) * R1],\r\n                ),\r\n            )\r\n\r\n            u.push(\r\n                ...randomTile(),\r\n            )\r\n\r\n            c.push(\r\n                ...colorPolygon,\r\n            )\r\n        }\r\n\r\n        savedL = savedL + currentL\r\n    }\r\n\r\n    /** top *****/\r\n    for (let i = 0; i < SIDES; ++i) {\r\n        let a0 = (i - 1) / SIDES * Math.PI * 2\r\n        if (i === 0) {\r\n            a0 = (SIDES - 1) / SIDES * Math.PI * 2\r\n        }\r\n        const a1 = i / SIDES  * Math.PI * 2\r\n\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [sin(a0) * R1, h2, cos(a0) * R1],\r\n                [sin(a1) * R1, h2, cos(a1) * R1],\r\n                [sin(a1) * R2, h3, cos(a1) * R2],\r\n                [sin(a0) * R2, h3, cos(a0) * R2],\r\n            ),\r\n\r\n            ...createFace(\r\n                [sin(a0) * R2, h3, cos(a0) * R2],\r\n                [sin(a1) * R2, h3, cos(a1) * R2],\r\n                [sin(a1) * R2, h, cos(a1) * R2],\r\n                [sin(a0) * R2, h, cos(a0) * R2],\r\n            ),\r\n\r\n            0, h + 12, 0,\r\n            sin(a0) * R2, h, cos(a0) * R2,\r\n            sin(a1) * R2, h, cos(a1) * R2,\r\n\r\n        )\r\n\r\n        u.push(\r\n            ...tileUv['empty'],\r\n            ...tileUv['line_p1'],\r\n            ...tileUv['three'],\r\n        )\r\n\r\n        c.push(\r\n            ...colorPolygon,\r\n            ...colorPolygon,\r\n\r\n            ...COLOR_00,\r\n            ...COLOR_00,\r\n            ...COLOR_00,\r\n        )\r\n    }\r\n\r\n\r\n    /** collision */\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [-w, 0, w],\r\n    //         [w, 0, w],\r\n    //         [w, h, w],\r\n    //         [-w, h, w],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w, 0, w],\r\n    //         [w, 0, -w],\r\n    //         [w, h, -w],\r\n    //         [w, h, w],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w, 0, -w],\r\n    //         [-w, 0, -w],\r\n    //         [-w, h, -w],\r\n    //         [w, h, -w],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [-w, 0, -w],\r\n    //         [-w, 0, w],\r\n    //         [-w, h, w],\r\n    //         [-w, h, -w],\r\n    //     ),\r\n    // )\r\n\r\n\r\n    return { v, col, u, c }\r\n}\r\n","import {H, W} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {tileUv} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst hpW = W / 6\r\n\r\nexport const createPlatformData = ({\r\n    nX_pZ = [-hpW, 0, hpW],\r\n    pX_pZ = [hpW, 0, hpW],\r\n    pX_nZ = [hpW, 0, -hpW],\r\n    nX_nZ = [-hpW, 0, -hpW],\r\n    minusH = -5,\r\n    w = 30,\r\n    d = 30,\r\n    color = COLOR_00\r\n}) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n\r\n    /** sides ***/\r\n\r\n\r\n\r\n    const colorPolygon = fillColorFace(color)\r\n    const colorSide = [\r\n        ...colorPolygon,\r\n    ]\r\n\r\n\r\n    /** top part **/\r\n    v.push(\r\n        ...createFace(\r\n            [...nX_pZ],\r\n            [...pX_pZ],\r\n            [...pX_nZ],\r\n            [...nX_nZ],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    //u.push(...tileUv['lines'])\r\n    u.push(...tileUv['empty'])\r\n    col.push(\r\n        ...createFace(\r\n            [...nX_pZ],\r\n            [...pX_pZ],\r\n            [...pX_nZ],\r\n            [...nX_nZ],\r\n        )\r\n    )\r\n\r\n    /** bottom part  ***/\r\n    v.push(\r\n        ...createFace(\r\n            [nX_nZ[0], nX_nZ[1] + minusH, nX_nZ[2]],\r\n            [pX_nZ[0], pX_nZ[1] + minusH, pX_nZ[2]],\r\n            [pX_pZ[0], pX_pZ[1] +  minusH, pX_pZ[2]],\r\n            [nX_pZ[0], nX_pZ[1] + minusH, nX_pZ[2]],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['points'])\r\n\r\n    /** front */\r\n    v.push(\r\n        ...createFace(\r\n            [nX_pZ[0], nX_pZ[1] + minusH, nX_pZ[2]],\r\n            [pX_pZ[0], pX_pZ[1] + minusH, pX_pZ[2]],\r\n            [pX_pZ[0], pX_pZ[1], pX_pZ[2]],\r\n            [nX_pZ[0], nX_pZ[1], nX_pZ[2]],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_00'])\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [nX_pZ[0], nX_pZ[1] + minusH, nX_pZ[2]],\r\n    //         [pX_pZ[0], pX_pZ[1] + minusH, pX_pZ[2]],\r\n    //         [pX_pZ[0], pX_pZ[1], pX_pZ[2]],\r\n    //         [nX_pZ[0], nX_pZ[1], nX_pZ[2]],\r\n    //     )\r\n    // )\r\n\r\n    /** left */\r\n    v.push(\r\n        ...createFace(\r\n            [nX_nZ[0], nX_nZ[1] + minusH, nX_nZ[2]],\r\n            [nX_pZ[0], nX_pZ[1] + minusH, nX_pZ[2]],\r\n            [nX_pZ[0], nX_pZ[1], nX_pZ[2]],\r\n            [nX_nZ[0], nX_nZ[1], nX_nZ[2]],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_00'])\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [nX_nZ[0], nX_nZ[1] + minusH, nX_nZ[2]],\r\n    //         [nX_pZ[0], nX_pZ[1] + minusH, nX_pZ[2]],\r\n    //         [nX_pZ[0], nX_pZ[1], nX_pZ[2]],\r\n    //         [nX_nZ[0], nX_nZ[1], nX_nZ[2]],\r\n    //     )\r\n    // )\r\n\r\n    /** right */\r\n    v.push(\r\n        ...createFace(\r\n            [pX_pZ[0], pX_pZ[1] + minusH, pX_pZ[2]],\r\n            [pX_nZ[0], pX_nZ[1] + minusH, pX_nZ[2]],\r\n            [pX_nZ[0], pX_nZ[1], pX_nZ[2]],\r\n            [pX_pZ[0], pX_pZ[1], pX_pZ[2]],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_00'])\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [pX_pZ[0], pX_pZ[1] + minusH, pX_pZ[2]],\r\n    //         [pX_nZ[0], pX_nZ[1] + minusH, pX_nZ[2]],\r\n    //         [pX_nZ[0], pX_nZ[1], pX_nZ[2]],\r\n    //         [pX_pZ[0], pX_pZ[1], pX_pZ[2]],\r\n    //     )\r\n    // )\r\n\r\n    /** back ***/\r\n    v.push(\r\n        ...createFace(\r\n            [pX_nZ[0], pX_nZ[1] + minusH, pX_nZ[2]],\r\n            [nX_nZ[0], nX_nZ[1] + minusH, nX_nZ[2]],\r\n            [nX_nZ[0], nX_nZ[1], nX_nZ[2]],\r\n            [pX_nZ[0], pX_nZ[1], pX_nZ[2]],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_00'])\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [pX_nZ[0], pX_nZ[1] + minusH, pX_nZ[2]],\r\n    //         [nX_nZ[0], nX_nZ[1] + minusH, nX_nZ[2]],\r\n    //         [nX_nZ[0], nX_nZ[1], nX_nZ[2]],\r\n    //         [pX_nZ[0], pX_nZ[1], pX_nZ[2]],\r\n    //     )\r\n    // )\r\n\r\n    return { v, col, u, c }\r\n}\r\n\r\n\r\n","import {H, W} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {tileUv} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst hpW = W / 6\r\n\r\nexport const createBallustrade = ({\r\n    w = hpW,\r\n    d = 3,\r\n    h = 12,\r\n    color = COLOR_00\r\n}) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n\r\n    /** sides ***/\r\n\r\n\r\n\r\n    const colorPolygon = fillColorFace(color)\r\n    const colorSide = [\r\n        ...colorPolygon,\r\n    ]\r\n\r\n\r\n    /** top part **/\r\n    v.push(\r\n        ...createFace(\r\n            [-w, h, d],\r\n            [w, h, d],\r\n            [w, h, -d],\r\n            [-w, h, -d],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_01'])\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [-w, h - 3, d],\r\n            [w, h - 3, d],\r\n            [w, h, d],\r\n            [-w, h, d],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_01'])\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [w, h - 3, -d],\r\n            [-w, h - 3, -d],\r\n            [-w, h, -d],\r\n            [w, h, -d],\r\n        )\r\n    )\r\n    c.push(...colorSide)\r\n    u.push(...tileUv['gor_pattern_01'])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    col.push(\r\n        ...createFace(\r\n            [-w, h, d],\r\n            [w, h, d],\r\n            [w, h, -d],\r\n            [-w, h, -d],\r\n        )\r\n    )\r\n\r\n\r\n    return { v, col, u, c }\r\n}\r\n\r\n\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    rotateArrY,\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport { createBallustrade } from './geomElemBallustrade'\r\n\r\n\r\nexport const createGeomL = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const b = createBallustrade({})\r\n\r\n        translateArr(b.v, 0, H / 2, -W / 6)\r\n        v.push(...b.v)\r\n        c.push(...b.c)\r\n        u.push(...b.u)\r\n        translateArr(b.col, 0, H / 2, -W / 6)\r\n        col.push(...b.col)\r\n    }\r\n\r\n    {\r\n        const b = createBallustrade({})\r\n\r\n        rotateArrY(b.v, -Math.PI / 2)\r\n        translateArr(b.v, -W / 6, H / 2, 0)\r\n        v.push(...b.v)\r\n        c.push(...b.c)\r\n        u.push(...b.u)\r\n        rotateArrY(b.col, -Math.PI / 2)\r\n        translateArr(b.col, -W / 6, H / 2, 0)\r\n        col.push(...b.col)\r\n    }\r\n\r\n\r\n    /** PZ */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n    /** NZ */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import {H, W} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {tileUv} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst hpW = W / 6\r\nconst { sin, cos } = Math\r\n\r\nexport const createElemArcData = ({\r\n    w = W / 3,\r\n    h = H - 5,\r\n    d = W / 3 / 2,\r\n    segmentsNum = 5,\r\n}) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const colorPolygon = fillColorFace(COLOR_00)\r\n\r\n\r\n\r\n    let startAngle = - Math.PI / 2\r\n    const num = 8\r\n    let stepAngle = Math.PI / num\r\n    const thickness = 5\r\n    const r0 = (w / 2) - thickness\r\n    const r1 = (w / 2)\r\n\r\n    const hR0 = h - r1 - 8\r\n\r\n    const topBlockWTop = 5\r\n    const topBlockWBottom = topBlockWTop - 1.3\r\n    const topBlockLevelBottom = hR0 + r0\r\n\r\n\r\n    for (let i = 1; i < num + 1; ++i) {\r\n        const angle0 = startAngle + (stepAngle * (i - 1))\r\n        const angle1 = startAngle + (stepAngle * (i))\r\n\r\n        /** front */\r\n        v.push(\r\n            ...createFace(\r\n                [sin(angle0) * r0, hR0 + cos(angle0) * r0, d],\r\n                [sin(angle1) * r0, hR0 + cos(angle1) * r0, d],\r\n                [sin(angle1) * r1, hR0 + cos(angle1) * r1, d],\r\n                [sin(angle0) * r1, hR0 + cos(angle0) * r1, d],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['empty'])\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [sin(angle0) * r1, hR0 + cos(angle0) * r1, d],\r\n                [sin(angle1) * r1, hR0 + cos(angle1) * r1, d],\r\n                [sin(angle1) * r1, h, d],\r\n                [sin(angle0) * r1, h, d],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['empty'])\r\n\r\n\r\n\r\n\r\n        /** bottom ark */\r\n        v.push(\r\n            ...createFace(\r\n                [sin(angle0) * r0, hR0 + cos(angle0) * r0, -d],\r\n                [sin(angle1) * r0, hR0 + cos(angle1) * r0, -d],\r\n                [sin(angle1) * r0, hR0 + cos(angle1) * r0, d],\r\n                [sin(angle0) * r0, hR0 + cos(angle0) * r0, d],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['columnSide_0'])\r\n\r\n\r\n\r\n        /** back sise */\r\n        v.push(\r\n            ...createFace(\r\n                [sin(angle1) * r0, hR0 + cos(angle1) * r0, -d],\r\n                [sin(angle0) * r0, hR0 + cos(angle0) * r0, -d],\r\n                [sin(angle0) * r1, hR0 + cos(angle0) * r1, -d],\r\n                [sin(angle1) * r1, hR0 + cos(angle1) * r1, -d],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['empty'])\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [sin(angle1) * r1, hR0 + cos(angle1) * r1, -d],\r\n                [sin(angle0) * r1, hR0 + cos(angle0) * r1, -d],\r\n                [sin(angle0) * r1, h, -d],\r\n                [sin(angle1) * r1, h, -d],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['empty'])\r\n    }\r\n\r\n\r\n\r\n    {\r\n        v.push(\r\n            ...createFace(\r\n                [-topBlockWBottom, topBlockLevelBottom, d + 1],\r\n                [topBlockWBottom, topBlockLevelBottom, d + 1],\r\n                [topBlockWTop, h, d + 1],\r\n                [-topBlockWTop, h, d + 1],\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['face_00'])\r\n    }\r\n\r\n\r\n    {\r\n        v.push(\r\n            ...createFace(\r\n                [topBlockWBottom, topBlockLevelBottom, -d - 1],\r\n                [-topBlockWBottom, topBlockLevelBottom, -d - 1],\r\n                [-topBlockWTop, h, -d - 1],\r\n                [topBlockWTop, h, -d - 1],\r\n\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['face_00'])\r\n    }\r\n\r\n\r\n    /** left ***/\r\n    {\r\n        v.push(\r\n            ...createFace(\r\n                [-w / 2 + 1, hR0, -d],\r\n                [-w / 2 + 1, hR0, d],\r\n                [-w / 2 + 1, h, d],\r\n                [-w / 2 + 1, h, -d],\r\n\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['briks'])\r\n    }\r\n\r\n    {\r\n        v.push(\r\n            ...createFace(\r\n                [w / 2 - 1, hR0, d],\r\n                [w / 2 - 1, hR0, -d],\r\n                [w / 2 - 1, h, -d],\r\n                [w / 2 - 1, h, d],\r\n\r\n            )\r\n        )\r\n        c.push(...colorPolygon)\r\n        u.push(...tileUv['briks'])\r\n    }\r\n\r\n\r\n    /** bottom */\r\n    v.push(\r\n        ...createFace(\r\n            [-w / 2, hR0, -d],\r\n            [-r0, hR0, -d],\r\n            [-r0, hR0, d],\r\n            [-w / 2, hR0, d],\r\n\r\n        )\r\n    )\r\n    c.push(...colorPolygon)\r\n    u.push(...tileUv['lines'])\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [r0, hR0, -d],\r\n            [w / 2, hR0, -d],\r\n            [w / 2, hR0, d],\r\n             [r0, hR0, d],\r\n\r\n        )\r\n    )\r\n    c.push(...colorPolygon)\r\n    u.push(...tileUv['lines'])\r\n\r\n\r\n    return { v, col, u, c }\r\n}\r\n\r\n\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n    rotateArrY,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\nimport { createBallustrade } from './geomElemBallustrade'\r\n\r\n\r\n\r\nexport const createGeomI = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const b = createBallustrade({})\r\n\r\n        rotateArrY(b.v, -Math.PI / 2)\r\n        translateArr(b.v, -W / 6, H / 2, 0)\r\n        v.push(...b.v)\r\n        c.push(...b.c)\r\n        u.push(...b.u)\r\n        rotateArrY(b.col, -Math.PI / 2)\r\n        translateArr(b.col, -W / 6, H / 2, 0)\r\n        col.push(...b.col)\r\n    }\r\n\r\n    {\r\n        const b = createBallustrade({})\r\n\r\n        rotateArrY(b.v, -Math.PI / 2)\r\n        translateArr(b.v, W / 6, H / 2, 0)\r\n        v.push(...b.v)\r\n        c.push(...b.c)\r\n        u.push(...b.u)\r\n        rotateArrY(b.col, -Math.PI / 2)\r\n        translateArr(b.col, W / 6, H / 2, 0)\r\n        col.push(...b.col)\r\n    }\r\n    /** bottom */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, -W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, -W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const arc = createElemArcData({})\r\n        translateArr(arc.v, 0, -H / 2, 0)\r\n        v.push(...arc.v)\r\n        c.push(...arc.c)\r\n        u.push(...arc.u)\r\n    }\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\n\r\n\r\n\r\nexport const createGeomX = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, -W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, -W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, -W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, -W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const arc = createElemArcData({})\r\n        translateArr(arc.v, 0, -H / 2, 0)\r\n        v.push(...arc.v)\r\n        c.push(...arc.c)\r\n        u.push(...arc.u)\r\n    }\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n    rotateArrY,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\nimport { createBallustrade } from './geomElemBallustrade'\r\n\r\n\r\n\r\nexport const createGeomT = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n    /** bottom */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n    /** top */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H / 2, -W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H / 2, -W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n    /** right */\r\n    {\r\n        const platform = createPlatformData({w: W / 3, d: W / 3})\r\n\r\n        translateArr(platform.v, W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n\r\n    {\r\n        const b = createBallustrade({})\r\n\r\n        rotateArrY(b.v, -Math.PI / 2)\r\n        translateArr(b.v, -W / 6, H / 2, 0)\r\n        v.push(...b.v)\r\n        c.push(...b.c)\r\n        u.push(...b.u)\r\n        rotateArrY(b.col, -Math.PI / 2)\r\n        translateArr(b.col, -W / 6, H / 2, 0)\r\n        col.push(...b.col)\r\n    }\r\n\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport { createElemArcData } from './geomElemArc'\r\n\r\nconst hpW = W / 6\r\n\r\n\r\n\r\nexport const createGeomXY = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    /** N */\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW , 0, -hpW],\r\n            pX_pZ: [hpW, 0, -hpW ],\r\n            pX_nZ: [hpW, H / 2, -80],\r\n            nX_nZ: [-hpW, H / 2, -80],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [hpW, H, hpW],\r\n            pX_pZ: [W / 2, H / 2, hpW],\r\n            pX_nZ: [W / 2, H / 2, -hpW],\r\n            nX_nZ: [hpW, H, -hpW],\r\n        })\r\n\r\n        //translateArr(platform.v, W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        //translateArr(platform.col, W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW, H / 2, W / 2],\r\n            pX_pZ: [hpW, H / 2, W / 2],\r\n            pX_nZ: [hpW, 0, hpW],\r\n            nX_nZ: [-hpW, 0, hpW],\r\n        })\r\n\r\n        //translateArr(platform.v, -W / 3, H / 2, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        //translateArr(platform.col, -W / 3, H / 2, 0)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-W / 2, H / 2, hpW],\r\n            pX_pZ: [-hpW, H, hpW],\r\n            pX_nZ: [-hpW, H, -hpW],\r\n            nX_nZ: [-W / 2, H / 2, -hpW],\r\n        })\r\n\r\n        //translateArr(platform.v, 0, H / 2, -W / 3)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n       // translateArr(platform.col, 0, H / 2, -W / 3)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n\r\n    {\r\n        const arc = createElemArcData({})\r\n        v.push(...arc.v)\r\n        c.push(...arc.c)\r\n        u.push(...arc.u)\r\n    }\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\n\r\nconst hpW = W / 6\r\n\r\n\r\n\r\nexport const createGeomStairs = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    /** N */\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW , 0, -hpW],\r\n            pX_pZ: [hpW, 0, -hpW ],\r\n            pX_nZ: [hpW, H / 4, -60],\r\n            nX_nZ: [-hpW, H / 4, -60],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW , H / 4, -60],\r\n            pX_pZ: [hpW, H / 4, -60],\r\n            pX_nZ: [hpW, H / 4, -80],\r\n            nX_nZ: [-hpW, H / 4, -80],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW * 2 , H / 2.5, -60],\r\n            pX_pZ: [-hpW, H / 4, -60],\r\n            pX_nZ: [-hpW, H / 4, -80],\r\n            nX_nZ: [-hpW * 2, H / 2.5, -80],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-80, H / 2.5, -60],\r\n            pX_pZ: [-hpW * 2, H / 2.5, -60],\r\n            pX_nZ: [-hpW * 2, H / 2.5, -80],\r\n            nX_nZ: [-80, H / 2.5, -80],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-80, H / 2, -hpW],\r\n            pX_pZ: [-hpW * 2, H / 2, -hpW],\r\n            pX_nZ: [-hpW * 2, H / 2.5, -60],\r\n            nX_nZ: [-80, H / 2.5, -60],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    /** L */\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-80, H / 2, hpW],\r\n            pX_pZ: [-hpW * 2, H / 2, hpW],\r\n            pX_nZ: [-hpW * 2, H / 2, -hpW],\r\n            nX_nZ: [-80, H / 2, -hpW],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-80, H * .75, hpW * 2],\r\n            pX_pZ: [-hpW * 2, H * .75, hpW * 2],\r\n            pX_nZ: [-hpW * 2, H / 2, hpW],\r\n            nX_nZ: [-80, H / 2, hpW],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-80, H * .75, 80],\r\n            pX_pZ: [-hpW * 2, H * .75, 80],\r\n            pX_nZ: [-hpW * 2, H * .75, hpW * 2],\r\n            nX_nZ: [-80, H * .75, hpW * 2],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW * 2, H * .75, 80],\r\n            pX_pZ: [-hpW, H * .85, 80],\r\n            pX_nZ: [-hpW, H * .85, hpW * 2],\r\n            nX_nZ: [-hpW * 2, H * .75, hpW * 2],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW, H * .85, 80],\r\n            pX_pZ: [hpW, H * .85, 80],\r\n            pX_nZ: [hpW, H * .85, hpW * 2],\r\n            nX_nZ: [-hpW, H * .85, hpW * 2],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW, H * .85, hpW * 2],\r\n            pX_pZ: [hpW, H * .85, hpW * 2],\r\n            pX_nZ: [hpW, H, hpW],\r\n            nX_nZ: [-hpW, H, hpW],\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const arc = createElemArcData({})\r\n        v.push(...arc.v)\r\n        c.push(...arc.c)\r\n        u.push(...arc.u)\r\n    }\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\n\r\nconst hpW = W / 6\r\n\r\nexport const createGeomToTop = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const column = createColumnData({})\r\n\r\n    const fill = (x, z) => {\r\n        const copyV = [...column.v]\r\n        translateArr(copyV, x, 0, z)\r\n        v.push(...copyV)\r\n        const copyCol = [...column.col]\r\n        translateArr(copyCol, x, 0, z)\r\n        col.push(...copyCol)\r\n        c.push(...column.c)\r\n        u.push(...column.u)\r\n    }\r\n\r\n    fill(-W / 3 / 2, -W / 3 / 2)\r\n    fill(W / 3 / 2, -W / 3 / 2)\r\n    fill(-W / 3 / 2, W / 3 / 2)\r\n    fill(W / 3 / 2, W / 3 / 2)\r\n\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW, 0, 80],\r\n            pX_pZ: [hpW, 0, 80],\r\n            pX_nZ: [hpW, H * 0.5, hpW],\r\n            nX_nZ: [-hpW, H * 0.5, hpW],\r\n        })\r\n\r\n        translateArr(platform.v, 0, H * 0.5, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H * 0.5, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    // {\r\n    //     const arc = createElemArcData({})\r\n    //     v.push(...arc.v)\r\n    //     c.push(...arc.c)\r\n    //     u.push(...arc.u)\r\n    // }\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\n\r\nconst hpW = W / 6\r\n\r\nexport const createGeomFromBot = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n\r\n\r\n\r\n    /** bottom */\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-hpW, 0, -hpW],\r\n            pX_pZ: [hpW, 0, -hpW],\r\n            pX_nZ: [hpW, H / 2, -80],\r\n            nX_nZ: [-hpW, H / 2, -80],\r\n        })\r\n\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n\r\n    // {\r\n    //     const arc = createElemArcData({})\r\n    //     v.push(...arc.v)\r\n    //     c.push(...arc.c)\r\n    //     u.push(...arc.u)\r\n    // }\r\n\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import { W, H } from '../../../constants/constants_elements'\r\nimport {\r\n    translateArr,\r\n} from '../../../helpers/geomHelpers'\r\nimport { createColumnData } from './geomElemColumn'\r\nimport { createPlatformData } from './geomElemPlatform'\r\nimport {createElemArcData} from \"./geomElemArc\";\r\n\r\n\r\n\r\nexport const createGeomTopPlatform = () => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    /** center */\r\n    {\r\n        const platform = createPlatformData({})\r\n\r\n        translateArr(platform.v, 0, H, 0)\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        translateArr(platform.col, 0, H, 0)\r\n        col.push(...platform.col)\r\n    }\r\n\r\n    {\r\n        const arc = createElemArcData({})\r\n        v.push(...arc.v)\r\n        c.push(...arc.c)\r\n        u.push(...arc.u)\r\n    }\r\n\r\n    return { v, c, u, col }\r\n}\r\n","import * as THREE from \"three\";\r\n\r\nexport const createGeomFromBuffer = ({\r\n                                         v,\r\n                                         c = null,\r\n                                         u = null,\r\n                                         col = null,\r\n                                     }) => {\r\n    const g = new THREE.BufferGeometry()\r\n\r\n    const vertices = new Float32Array(v)\r\n    g.setAttribute('position', new THREE.BufferAttribute(vertices, 3))\r\n\r\n    if (c) {\r\n        const colors = new Float32Array(c)\r\n        g.setAttribute('color', new THREE.BufferAttribute(colors, 3))\r\n    }\r\n\r\n    if (u) {\r\n        const uv = new Float32Array(u)\r\n        g.setAttribute('uv', new THREE.BufferAttribute(uv, 2))\r\n    }\r\n\r\n    g.computeVertexNormals()\r\n\r\n    return g\r\n}\r\n","import { createDataTiles } from './tilesMakerData'\r\nimport { createMap } from './map3SCreaterFromTiles'\r\nimport { createrMesh } from './threeMesh'\r\nimport {Color} from \"three\";\r\n\r\n// http://cr31.co.uk/stagecast/wang/3corn.html\r\n// MUST DO: central to top\r\n\r\nexport const createStructure3 = (\r\n    root,\r\n) => {\r\n    const tiles = createDataTiles()\r\n    const dataStructure = createMap(tiles)\r\n    const makerMesh = createrMesh(root)\r\n    let map = null\r\n\r\n\r\n    return {\r\n        generateStructure: (structure) => {\r\n          return new Promise(res => {\r\n              dataStructure.generateMap(structure).then(m => {\r\n                  map = m\r\n                  console.log('map', map)\r\n                  makerMesh.generateMeshes(map, structure).then(result => {\r\n                      res()\r\n                  })\r\n              })\r\n          })\r\n        },\r\n        generateStructureFinal: (map, structure) => {\r\n            return new Promise(res => {\r\n                makerMesh.generateMeshes(map, structure).then(result => {\r\n                    res()\r\n                })\r\n            })\r\n        },\r\n        destroyStructure: () => {\r\n            dataStructure.destroyMap()\r\n            makerMesh.destroyStructure()\r\n        },\r\n        getCoordsForItem: (key) => {\r\n            let x, y, z\r\n\r\n            let count = 100\r\n            const iterate = () => {\r\n\r\n                const rY = Math.floor(Math.random() * (map.sizeY - 2) + 1)\r\n                const rZ = Math.floor(Math.random() * map.sizeZ)\r\n                const rX = Math.floor(Math.random() * map.sizeX)\r\n\r\n                --count\r\n                if (\r\n                    map.items[rY][rZ][rX] &&\r\n                    map.items[rY][rZ][rX].tileData &&\r\n                    (\r\n                        count < 0 ||\r\n                        map.items[rY][rZ][rX].tileData.keyModel === 't_L' ||\r\n                        map.items[rY][rZ][rX].tileData.keyModel === 't_T' ||\r\n                        map.items[rY][rZ][rX].tileData.keyModel === 't_I' ||\r\n                        map.items[rY][rZ][rX].tileData.keyModel === 't_X'\r\n                    )\r\n                ) {\r\n                    y = rY\r\n                    x = rX\r\n                    z = rZ\r\n                } else {\r\n                    iterate()\r\n                }\r\n            }\r\n            iterate()\r\n            return [x, y, z]\r\n        },\r\n    }\r\n}\r\n","const prepareCacheSidesConnect = tiles => {\r\n    for (let i = 0; i < tiles.length; ++i) {\r\n        tiles[i].canConnectNX = []\r\n        tiles[i].canConnectPX = []\r\n        tiles[i].canConnectNY = []\r\n        tiles[i].canConnectPY = []\r\n        tiles[i].canConnectNZ = []\r\n        tiles[i].canConnectPZ = []\r\n    }\r\n\r\n    for (let i = 0; i < tiles.length; ++i) {\r\n        for (let j = 0; j < tiles.length; ++j) {\r\n            if (tiles[i].sideNX === tiles[j].sidePX) {\r\n                tiles[i].canConnectNX.push(tiles[j].id)\r\n            }\r\n            if (tiles[i].sidePX === tiles[j].sideNX) {\r\n                tiles[i].canConnectPX.push(tiles[j].id)\r\n            }\r\n\r\n            if (tiles[i].sideNY === tiles[j].sidePY) {\r\n                tiles[i].canConnectNY.push(tiles[j].id)\r\n            } else {\r\n                if (tiles[i].sideNY.includes('I') && tiles[j].sidePY === 'I') {\r\n                    tiles[i].canConnectNY.push(tiles[j].id)\r\n                }\r\n                if (tiles[i].sideNY === 'I' && tiles[j].sidePY.includes('I')) {\r\n                    tiles[i].canConnectNY.push(tiles[j].id)\r\n                }\r\n                if (\r\n                    tiles[i].sideNY !== 'I' &&\r\n                    tiles[j].sidePY !== 'I' &&\r\n                    tiles[i].sideNY.includes('I') &&\r\n                    tiles[j].sidePY.includes('I')\r\n                ) {\r\n                    const topElemItems = tiles[i].sideNY.split('.')\r\n                    const bottomElemItems = tiles[j].sidePY.split('.')\r\n                    let isCan = true\r\n                    topElemItems.map(topKey => {\r\n                        if (topKey === 'I' || topKey === 'closed') {\r\n                            return;\r\n                        }\r\n                        bottomElemItems.map(bottomKey => {\r\n                             if (topKey === bottomKey) {\r\n                                 isCan = false\r\n                             }\r\n                        })\r\n                    })\r\n                    if (isCan) {\r\n                         tiles[i].canConnectNY.push(tiles[j].id)\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (tiles[i].sidePY === tiles[j].sideNY) {\r\n                tiles[i].canConnectPY.push(tiles[j].id)\r\n            } else {\r\n                if (tiles[i].sidePY.includes('I') && tiles[j].sideNY === 'I') {\r\n                    tiles[i].canConnectPY.push(tiles[j].id)\r\n                }\r\n                if (tiles[i].sidePY === 'I' && tiles[j].sideNY.includes('I')) {\r\n                    tiles[i].canConnectPY.push(tiles[j].id)\r\n                }\r\n\r\n                if (\r\n                    tiles[i].sidePY !== 'I' &&\r\n                    tiles[j].sideNY !== 'I' &&\r\n                    tiles[i].sidePY.includes('I') &&\r\n                    tiles[j].sideNY.includes('I')\r\n                ) {\r\n                    const topElemItems = tiles[j].sideNY.split('.')\r\n                    const bottomElemItems = tiles[i].sidePY.split('.')\r\n                    let isCan = true\r\n                    topElemItems.map(topKey => {\r\n                        if (topKey === 'I' || topKey === 'closed') {\r\n                            return;\r\n                        }\r\n                        bottomElemItems.map(bottomKey => {\r\n                            if (topKey === bottomKey) {\r\n                                isCan = false\r\n                            }\r\n                        })\r\n                    })\r\n                    if (isCan) {\r\n                        tiles[i].canConnectPY.push(tiles[j].id)\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            if (tiles[i].sideNZ === tiles[j].sidePZ) {\r\n                tiles[i].canConnectNZ.push(tiles[j].id)\r\n            }\r\n            if (tiles[i].sidePZ === tiles[j].sideNZ) {\r\n                tiles[i].canConnectPZ.push(tiles[j].id)\r\n            }\r\n        }\r\n    }\r\n\r\n    return tiles\r\n}\r\n\r\n\r\nexport const createDataTiles = () => {\r\n    const arrTiles = []\r\n\r\n    {\r\n        /**\r\n         . . .\r\n         . . .\r\n         . . .\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 'empty',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         . I .\r\n         . I .\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: 'I',\r\n            keyModel: 'tile_I',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . . .\r\n         I I I\r\n         . . .\r\n         */\r\n        const I = {\r\n            sideNX: 'I',\r\n            sidePX: 'I',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_I',\r\n            rotationY: Math.PI / 2,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n\r\n    {\r\n        /**\r\n         . . .\r\n         . I I\r\n         . I .\r\n         */\r\n        const t = {\r\n            sideNX: '_',\r\n            sidePX: 'I',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_L',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . . .\r\n         I I .\r\n         . I .\r\n         */\r\n        const t = {\r\n            sideNX: 'I',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: '_',\r\n            sidePZ: 'I',\r\n            keyModel: 't_L',\r\n            rotationY: -Math.PI / 2,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         I I .\r\n         . . .\r\n         */\r\n        const t = {\r\n            sideNX: 'I',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: '_',\r\n            keyModel: 't_L',\r\n            rotationY: -Math.PI,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         . I I\r\n         . . .\r\n         */\r\n        const t = {\r\n            sideNX: '_',\r\n            sidePX: 'I',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: '_',\r\n            keyModel: 't_L',\r\n            rotationY: -Math.PI * 1.5,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    /** stairs ************************/\r\n    {\r\n        /**\r\n           I\r\n         . . .\r\n         . I .\r\n         . . .\r\n           I\r\n         */\r\n        const I = {\r\n            sideNX: 'I',\r\n            sidePX: '_',\r\n            sideNY: 'I.closed.NZ',\r\n            sidePY: 'I.PZ',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_stairs',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n    {\r\n        /**\r\n           I\r\n         . I .\r\n         . . .\r\n         . . .\r\n           I\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: 'I.closed.PX',\r\n            sidePY: 'I.NX',\r\n            sideNZ: 'I',\r\n            sidePZ: '_',\r\n            keyModel: 't_stairs',\r\n            rotationY: -Math.PI / 2,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n           I\r\n         . . .\r\n         I . .\r\n         . . .\r\n           I\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: 'I',\r\n            sideNY: 'I.closed.PZ',\r\n            sidePY: 'I.NZ',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_stairs',\r\n            rotationY: Math.PI,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n          I\r\n         . . .\r\n         . . I\r\n         . . .\r\n           I\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: 'I.closed.NX',\r\n            sidePY: 'I.PX',\r\n            sideNZ: '_',\r\n            sidePZ: 'I',\r\n            keyModel: 't_stairs',\r\n            rotationY: -Math.PI * 1.5,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         . . .\r\n         . . .\r\n           I\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: 'I.closed.NZ',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: '_',\r\n            keyModel: 't_fromBottom',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         . . .\r\n         . . I\r\n         . . .\r\n            I\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: 'I',\r\n            sideNY: 'I.closed.PX',\r\n            sidePY: '_',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_fromBottom',\r\n            rotationY: -Math.PI / 2,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n\r\n\r\n    //////////////////////////////////\r\n    // {\r\n    //     /**\r\n    //      . . .\r\n    //      . . I\r\n    //      . . .\r\n    //      I\r\n    //      */\r\n    //     const I = {\r\n    //         sideNX: '_,_,_',\r\n    //         sidePX: '_,_,_',\r\n    //         sideNY: '_,I,_',\r\n    //         sidePY: '_,_,_',\r\n    //         sideNZ: '_,_,_',\r\n    //         sidePZ: '_,I,_',\r\n    //         keyModel: 't_fromBottom',\r\n    //         rotationY: -Math.PI,\r\n    //     }\r\n    //     arrTiles.push(I)\r\n    // }\r\n    // {\r\n    //     /**\r\n    //      . . .\r\n    //      . . I\r\n    //      . . .\r\n    //      I\r\n    //      */\r\n    //     const I = {\r\n    //         sideNX: '_,I,_',\r\n    //         sidePX: '_,_,_',\r\n    //         sideNY: '_,I,_',\r\n    //         sidePY: '_,_,_',\r\n    //         sideNZ: '_,_,_',\r\n    //         sidePZ: '_,_,_',\r\n    //         keyModel: 't_fromBottom',\r\n    //         rotationY: -Math.PI * 1.5,\r\n    //     }\r\n    //     arrTiles.push(I)\r\n    // }\r\n    /** ********************************************/\r\n    \r\n    /** ---------------------------------------------------------------- */\r\n    {\r\n        /**\r\n           I\r\n         . . .\r\n         . . .\r\n         . I .\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: 'I.PZ',\r\n            sideNZ: '_',\r\n            sidePZ: 'I',\r\n            keyModel: 't_toTopPlatform',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         I\r\n         . . .\r\n         . . .\r\n         . I .\r\n         */\r\n        const I = {\r\n            sideNX: 'I',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: 'I.NX',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_toTopPlatform',\r\n            rotationY: -Math.PI / 2,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    {\r\n        /**\r\n         I\r\n         . . .\r\n         . . .\r\n         . I .\r\n         */\r\n        const I = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: 'I.NZ',\r\n            sideNZ: 'I',\r\n            sidePZ: '_',\r\n            keyModel: 't_toTopPlatform',\r\n            rotationY: -Math.PI,\r\n        }\r\n        arrTiles.push(I)\r\n    }\r\n\r\n    /** ***************************************************/\r\n\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         . I I\r\n         . I .\r\n         */\r\n        const t = {\r\n            sideNX: '_',\r\n            sidePX: 'I',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: 'I',\r\n            keyModel: 't_T',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n\r\n    {\r\n        /**\r\n           I\r\n         . . .\r\n         . . .\r\n         . . .\r\n         */\r\n        const t = {\r\n            sideNX: '_',\r\n            sidePX: '_',\r\n            sideNY: '_',\r\n            sidePY: 'I',\r\n            sideNZ: '_',\r\n            sidePZ: '_',\r\n            keyModel: 't_tt',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n\r\n\r\n    {\r\n        /**\r\n         . I .\r\n         I I I\r\n         . I .\r\n         */\r\n        const t = {\r\n            sideNX: 'I',\r\n            sidePX: 'I',\r\n            sideNY: '_',\r\n            sidePY: '_',\r\n            sideNZ: 'I',\r\n            sidePZ: 'I',\r\n            keyModel: 't_X',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////\r\n    {\r\n        /**\r\n         * I\r\n         . I .\r\n         I I I\r\n         . I .\r\n         I\r\n         */\r\n        const t = {\r\n            sideNX: 'I',\r\n            sidePX: 'I',\r\n            sideNY: 'I.closed.NZ.PZ.',\r\n            sidePY: 'I.NX.PX',\r\n            sideNZ: 'I',\r\n            sidePZ: 'I',\r\n            keyModel: 't_XY',\r\n            rotationY: 0,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n    {\r\n        /**\r\n         * I\r\n         . I .\r\n         I I I\r\n         . I .\r\n         I\r\n         */\r\n        const t = {\r\n            sideNX: 'I',\r\n            sidePX: 'I',\r\n            sideNY: 'I.closed.NX.PX',\r\n            sidePY: 'I.NZ.PZ',\r\n            sideNZ: 'I',\r\n            sidePZ: 'I',\r\n            keyModel: 't_XY',\r\n            rotationY: -Math.PI / 2,\r\n        }\r\n        arrTiles.push(t)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const DATA_TILES = []\r\n    for (let i = 0; i < arrTiles.length; ++i) {\r\n        arrTiles[i].id = i\r\n        DATA_TILES.push(arrTiles[i])\r\n    }\r\n    prepareCacheSidesConnect(DATA_TILES)\r\n    return DATA_TILES\r\n}\r\n\r\n\r\n","import * as THREE from \"three\"\r\nimport { createGeomL } from './geometries/geometryTileL'\r\nimport { createGeomI } from './geometries/geometryTileI'\r\nimport { createGeomX } from './geometries/geometryTileX'\r\nimport { createGeomT } from './geometries/geometryTileT'\r\nimport { createGeomXY } from './geometries/geometryTileXY'\r\nimport { createGeomStairs } from './geometries/geometryTileStairs'\r\nimport { createGeomToTop } from './geometries/geometryTileToTop'\r\nimport { createGeomFromBot } from './geometries/geometryTileFromBot'\r\nimport { createGeomTopPlatform } from './geometries/geometryTileTopPlatform'\r\nimport { createGeomFromBuffer } from './geometries/createBufferGeom'\r\nimport { W, H } from '../../constants/constants_elements'\r\nimport {\r\n    rotateArrY,\r\n    translateArr,\r\n} from \"../../helpers/geomHelpers\";\r\n\r\n\r\nexport const createrMesh = (root) => {\r\n    const { structureMaterial, basicMat } = root.materials\r\n\r\n    const tilesGeom = {\r\n        't_stairs': createGeomStairs(),\r\n        't_XY': createGeomXY(),\r\n        't_fromBottom': createGeomFromBot(),\r\n        't_T': createGeomT(),\r\n        't_toTopPlatform': createGeomToTop(),\r\n        't_L': createGeomL(),\r\n        't_I': createGeomI(),\r\n        't_X': createGeomX(),\r\n        't_tt': createGeomTopPlatform(),\r\n    }\r\n\r\n    let mesh\r\n    let meshCollision\r\n\r\n    return {\r\n        generateMeshes: (mapData, structureData) => {\r\n            const colors = {}\r\n            for (let key in tilesGeom) {\r\n                colors[key] = []\r\n                for (let i = 0; i < tilesGeom[key].c.length; i += 3) {\r\n                    colors[key].push(...structureData.COLOR_00)\r\n                }\r\n            }\r\n\r\n            return new Promise(res => {\r\n                const v = []\r\n                const c = []\r\n                const u = []\r\n                const col = []\r\n\r\n                mapData.iterateAll(tile => {\r\n                    if (!tile.tileData) {\r\n                        return;\r\n                    }\r\n                    const { i, j, k, tileData } = tile\r\n\r\n                    if (!tilesGeom[tile.tileData.keyModel]) {\r\n                        return;\r\n                    }\r\n\r\n                    const copyV = [...tilesGeom[tileData.keyModel].v]\r\n                    rotateArrY(copyV, tileData.rotationY)\r\n                    translateArr(copyV, W * k, H * i, W * j)\r\n                    v.push(...copyV)\r\n                    //c.push(...tilesGeom[tileData.keyModel].c)\r\n                    c.push(...colors[tileData.keyModel])\r\n                    u.push(...tilesGeom[tileData.keyModel].u)\r\n\r\n                    const copyVCollision = [...tilesGeom[tileData.keyModel].col]\r\n                    rotateArrY(copyVCollision, tileData.rotationY)\r\n                    translateArr(copyVCollision, W * k, H * i, W * j)\r\n                    col.push(...copyVCollision)\r\n                })\r\n\r\n                const { X, Y, Z } = structureData\r\n\r\n                const g = createGeomFromBuffer({ v, c, u })\r\n                mesh = new THREE.Mesh(g, structureData.mat ? root.materials[structureData.mat] : structureMaterial)\r\n                mesh.position.set(X, Y, Z)\r\n                root.studio.addToScene(mesh)\r\n\r\n                const gCollision = createGeomFromBuffer({ v: col })\r\n                meshCollision = new THREE.Mesh(gCollision, basicMat)\r\n                meshCollision.position.set(X, Y, Z)\r\n                root.studio.addToScene(meshCollision)\r\n                meshCollision.visible = false\r\n                root.system_PlayerMoveOnLevel.addItemToPlayerCollision(meshCollision)\r\n\r\n                res()\r\n            })\r\n        },\r\n\r\n        setPosition: (x = 0, y = 0, z = 0) => {\r\n            mesh.position.set(x, y, z)\r\n        },\r\n\r\n        destroyStructure: () => {\r\n            root.studio.removeFromScene(mesh)\r\n            mesh.geometry.dispose()\r\n\r\n            root.studio.removeFromScene(meshCollision)\r\n            root.system_PlayerMoveOnLevel.removeItemFromPlayerCollision(meshCollision)\r\n            meshCollision.geometry.dispose()\r\n        },\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\n\r\n\r\n\r\nconst createS = (m) => {\r\n    const v = []\r\n\r\n    for (let i = 0; i < 20; ++i) {\r\n        const x = Math.random() * 300 \r\n        const y = Math.random() * 300 - 100\r\n        const z = Math.random() * 300\r\n\r\n        for (let i = 0; i < 3; ++i) {\r\n            v.push(\r\n                x + Math.random() * 5,\r\n                y + Math.random() * 5,\r\n                z + Math.random() * 5,\r\n            )\r\n        }\r\n    } \r\n\r\n\r\n    const vertices = new Float32Array(v)\r\n    const geometry = new THREE.BufferGeometry();\r\n    geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3))\r\n\r\n\r\n    return new THREE.Mesh(geometry, m)\r\n}\r\n\r\n\r\nexport const createSystemSprites = root => {\r\n    const ob = new THREE.Object3D()\r\n    ob.position.set(0, 0, -3000)\r\n\r\n    const m = new THREE.MeshBasicMaterial({ color: 0xff00ff })\r\n\r\n    const arrSprites = []\r\n    for (let i = 0; i < 50; ++i) {\r\n        const s = createS(m)\r\n        s.position.set(-150, 0, Math.random() * 8000 - 4000)\r\n        arrSprites.push(s)\r\n    }\r\n\r\n\r\n    return {\r\n        addToScene: () => {\r\n            for (let i = 0; i < arrSprites.length; ++i) {\r\n                root.studio.addToScene(arrSprites[i])\r\n            }\r\n        },\r\n        removeAll: () => {\r\n            for (let i = 0; i < arrSprites.length; ++i) {\r\n                root.studio.removeFromScene(arrSprites[i])\r\n            }\r\n        }\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\nimport { createPlatformData } from '../Structure03/geometries/geomElemPlatform'\r\nimport { createElemDrive } from '../Structure03/geometries/geomElemDrive'\r\nimport { createGeomFromBuffer } from '../Structure03/geometries/createBufferGeom'\r\nimport { translateArr } from \"../../helpers/geomHelpers\";\r\n\r\nimport { SIZE_Z, W } from \"../../constants/constants_elements\";\r\n\r\nexport const createFlyer = (root) => {\r\n    const { structureMaterial, basicMat } = root.materials\r\n\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    {\r\n        const platform = createPlatformData({\r\n            nX_pZ: [-50, 0, 125],\r\n            pX_pZ: [50, 0, 125],\r\n            pX_nZ: [50, 0, -125],\r\n            nX_nZ: [-50, 0, -125],\r\n            color: [1, 1, 0]\r\n        })\r\n        v.push(...platform.v)\r\n        c.push(...platform.c)\r\n        u.push(...platform.u)\r\n        col.push(...platform.col)\r\n    }\r\n    {\r\n        const elemDive = createElemDrive({\r\n            h: 12,\r\n            color: [1, 1, 0],\r\n        })\r\n        translateArr(elemDive.v, 0, 0, -110)\r\n        v.push(...elemDive.v)\r\n        c.push(...elemDive.c)\r\n        u.push(...elemDive.u)\r\n\r\n        translateArr(elemDive.col, 0, 0, -110)\r\n        col.push(...elemDive.col)\r\n    }\r\n\r\n    const viewGeom = createGeomFromBuffer({ v, c, u })\r\n    const mesh = new THREE.Mesh(viewGeom, structureMaterial)\r\n    root.studio.addToScene(mesh)\r\n\r\n    const collisionGeom = createGeomFromBuffer({ v: col })\r\n    const meshCollision = new THREE.Mesh(collisionGeom, basicMat)\r\n    meshCollision.visible = false\r\n    mesh.add(meshCollision)\r\n    root.system_PlayerMoveOnLevel.addItemToPlayerCollision(meshCollision)\r\n    root.system_PlayerMoveOnLevel.addItemToPlayerCollisionWalls(meshCollision)\r\n\r\n    const playerNearObj = new THREE.Object3D()\r\n    playerNearObj.position.set(0, 10, -100)\r\n    mesh.add(playerNearObj)\r\n\r\n    const arrow = new THREE.Mesh(\r\n        new THREE.PlaneGeometry(1, 6, 1, 1),\r\n        new THREE.MeshBasicMaterial({ color: 0x000000 })\r\n    )\r\n    arrow.rotation.x = -0.25\r\n    arrow.position.z = -106\r\n    arrow.position.y = 5\r\n    mesh.add(arrow)\r\n\r\n    return {\r\n        arrow,\r\n        mesh,\r\n        objectForCheck: playerNearObj,\r\n    }\r\n}\r\n","import {H} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {\r\n    tileUv,\r\n    randomTile,\r\n} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst { sin, cos } = Math\r\n\r\nexport const createElemDrive = ({\r\n                                     h = 31,\r\n                                     h0 = 3,\r\n                                     h00 = 5,\r\n                                     w0 = 10,\r\n                                     w = 3,\r\n                                     h1 = h - 10,\r\n                                     h11 = h - 7,\r\n                                     w1 = 4.5,\r\n                                     h2 = h - .5,\r\n                                     bottomH = 5,\r\n                                     topH = 15,\r\n                                     color = COLOR_00\r\n                                 }) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const colorPolygon = fillColorFace(color)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [-15, 0, 5],\r\n            [15, 0, 5],\r\n            [15, 11, 2],\r\n            [-15, 11, 2],\r\n        )\r\n    )\r\n    u.push(...tileUv['empty'])\r\n    c.push(...colorPolygon)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [-15, 0, -2],\r\n            [-15, 0, 5],\r\n            [-15, 11, 2],\r\n            [-15, 11, -2],\r\n        )\r\n    )\r\n    u.push(...tileUv['empty'])\r\n    c.push(...colorPolygon)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [15, 0, 5],\r\n            [15, 0, -2],\r\n            [15, 11, -2],\r\n            [15, 11, 2],\r\n        )\r\n    )\r\n    u.push(...tileUv['empty'])\r\n    c.push(...colorPolygon)\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [15, 0, -2],\r\n            [-15, 0, -2],\r\n            [-15, 11, -2],\r\n            [15, 11, -2],\r\n        )\r\n    )\r\n\r\n\r\n    u.push(...tileUv['empty'])\r\n    c.push(...colorPolygon)\r\n\r\n\r\n\r\n    v.push(\r\n        ...createFace(\r\n            [-15, 11, 2],\r\n            [15, 11, 2],\r\n            [15, 11, -2],\r\n            [-15, 11, -2],\r\n        )\r\n    )\r\n\r\n    u.push(...tileUv['empty'])\r\n    c.push(...colorPolygon)\r\n\r\n\r\n    col.push(\r\n        ...createFace(\r\n            [-15, 0, 2],\r\n            [15, 0, 2],\r\n            [15, 30, 2],\r\n            [-15, 20, 2],\r\n        )\r\n    )\r\n\r\n\r\n\r\n\r\n    // const SIDES = 8\r\n    //\r\n    //\r\n    // const points = [\r\n    //     [w0, 0, 'columnSide_0'],\r\n    //     [w0, h0, 'line_p0'],\r\n    //     [w, h00, 'line_p1'],\r\n    //     [w, h1, 'columnSide_0'],\r\n    //     [w1, h11, 'line_p1'],\r\n    //     [w1, h2, 'line_p1'],\r\n    //     [0, h, 'line_p1'],\r\n    // ]\r\n    //\r\n    // const colorPolygon = fillColorFace(color)\r\n    //\r\n    // for (let i = 1; i < points.length; ++i) {\r\n    //     const r0 = points[i - 1][0]\r\n    //     const r1 = points[i][0]\r\n    //\r\n    //     for (let j = 0; j < SIDES; ++j) {\r\n    //         let a0 = (j - 1) / SIDES * Math.PI * 2\r\n    //         if (j === 0) {\r\n    //             a0 = (SIDES - 1) / SIDES * Math.PI * 2\r\n    //         }\r\n    //         const a1 = j / SIDES  * Math.PI * 2\r\n    //\r\n    //         v.push(\r\n    //             ...createFace(\r\n    //                 [sin(a0) * r0, points[i - 1][1], cos(a0) * r0],\r\n    //                 [sin(a1) * r0, points[i - 1][1], cos(a1) * r0],\r\n    //                 [sin(a1) * r1, points[i][1], cos(a1) * r1],\r\n    //                 [sin(a0) * r1, points[i][1], cos(a0) * r1],\r\n    //             ),\r\n    //         )\r\n    //         u.push(...tileUv[points[i][2]])\r\n    //         c.push(...colorPolygon)\r\n    //     }\r\n    // }\r\n\r\n    // /** collision */\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [-w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, h, w0 / 2],\r\n    //         [-w0 / 2, h, w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, 0, -w0 / 2],\r\n    //         [w0 / 2, h, -w0 / 2],\r\n    //         [w0 / 2, h, w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, h, -w0 / 2],\r\n    //         [w0 / 2, h, -w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [-w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, 0, w0 / 2],\r\n    //         [-w0 / 2, h, w0 / 2],\r\n    //         [-w0 / 2, h, -w0 / 2],\r\n    //     ),\r\n    // )\r\n\r\n\r\n    return { v, col, u, c }\r\n}\r\n","import {\r\n    createFace,\r\n    fillColorFace,\r\n} from \"../../../helpers/geomHelpers\";\r\nimport {\r\n    tileUv,\r\n    randomTile,\r\n} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\n\r\nconst { sin, cos } = Math\r\n\r\nexport const createElemCylinder = ({\r\n                                    h = 31,\r\n                                    h0 = 3,\r\n                                    h00 = 5,\r\n                                    w0 = 10,\r\n                                    w = 3,\r\n                                    h1 = h - 10,\r\n                                    h11 = h - 7,\r\n                                    w1 = 4.5,\r\n                                    h2 = h - .5,\r\n                                    bottomH = 5,\r\n                                    topH = 15,\r\n                                    color = COLOR_00\r\n                                }) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    const colorPolygon = fillColorFace(color)\r\n\r\n    const SIDES = 8\r\n    const points = [\r\n         [7, 0],\r\n         [7, 20, 'empty'],\r\n         [0, 21, 'empty'],\r\n    ]\r\n    //\r\n    for (let i = 1; i < points.length; ++i) {\r\n         const r0 = points[i - 1][0]\r\n         const r1 = points[i][0]\r\n\r\n         for (let j = 0; j < SIDES; ++j) {\r\n             let a0 = (j - 1) / SIDES * Math.PI * 2\r\n             if (j === 0) {\r\n                 a0 = (SIDES - 1) / SIDES * Math.PI * 2\r\n             }\r\n             const a1 = j / SIDES  * Math.PI * 2\r\n\r\n             v.push(\r\n                 ...createFace(\r\n                     [sin(a0) * r0, points[i - 1][1], cos(a0) * r0],\r\n                     [sin(a1) * r0, points[i - 1][1], cos(a1) * r0],\r\n                     [sin(a1) * r1, points[i][1], cos(a1) * r1],\r\n                 [sin(a0) * r1, points[i][1], cos(a0) * r1],\r\n                     ),\r\n             )\r\n             u.push(...tileUv[points[i][2]])\r\n             c.push(...colorPolygon)\r\n         }\r\n    }\r\n\r\n    /** collision */\r\n    // col.push(\r\n    //     ...createFace(\r\n    //         [-w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, h, w0 / 2],\r\n    //         [-w0 / 2, h, w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w0 / 2, 0, w0 / 2],\r\n    //         [w0 / 2, 0, -w0 / 2],\r\n    //         [w0 / 2, h, -w0 / 2],\r\n    //         [w0 / 2, h, w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, h, -w0 / 2],\r\n    //         [w0 / 2, h, -w0 / 2],\r\n    //     ),\r\n    //     ...createFace(\r\n    //         [-w0 / 2, 0, -w0 / 2],\r\n    //         [-w0 / 2, 0, w0 / 2],\r\n    //         [-w0 / 2, h, w0 / 2],\r\n    //         [-w0 / 2, h, -w0 / 2],\r\n    //     ),\r\n    // )\r\n\r\n\r\n    return { v, col, u, c }\r\n}\r\n","import * as THREE from 'three'\r\nimport { createElemCylinder } from './Structure03/geometries/geomElemCylinder'\r\nimport { createGeomFromBuffer } from './Structure03/geometries/createBufferGeom'\r\n//import { translateArr } from \"../helpers/geomHelpers\";\r\n\r\n\r\nexport const createFuel = (root) => {\r\n    const { structureMaterial, basicMat } = root.materials\r\n\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    {\r\n        const elem = createElemCylinder({\r\n            h: 12,\r\n            color: [1, 1, 0],\r\n        })\r\n        v.push(...elem.v)\r\n        c.push(...elem.c)\r\n        u.push(...elem.u)\r\n        col.push(...elem.col)\r\n    }\r\n\r\n    const viewGeom = createGeomFromBuffer({ v, c, u })\r\n    const mesh = new THREE.Mesh(viewGeom, structureMaterial)\r\n    //root.studio.addToScene(mesh)\r\n\r\n    return {\r\n        mesh,\r\n        objectForCheck: mesh,\r\n    }\r\n}\r\n","import * as THREE from 'three'\r\n\r\n\r\n\r\nexport class system_PlayerNearLevelItems {\r\n    constructor(root) {\r\n        this._root = root\r\n\r\n        const {\r\n            emitter, player\r\n        } = root\r\n\r\n\r\n        this._itemsToCheck = []\r\n\r\n        const vec = new THREE.Vector3()\r\n\r\n        emitter.subscribe('playerMove')(() => {\r\n            for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n                this._itemsToCheck[i].getWorldPosition(vec)\r\n\r\n                const dist = player.mesh.position.distanceTo(vec)\r\n\r\n                if (!this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist < this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = true\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: true })\r\n                    return;\r\n                }\r\n\r\n                if (this._itemsToCheck[i].userData.nearPlayerIsNearPlayer && dist > this._itemsToCheck[i].userData.nearPlayerItemNear) {\r\n                    this._itemsToCheck[i].userData.nearPlayerIsNearPlayer = false\r\n                    emitter.emit('checkNear')({ item: this._itemsToCheck[i].userData.nearPlayerItemKey, is: false })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    setItemToCheck (item, itemKey, near, far) {\r\n        for (let i = 0; i < this._itemsToCheck.length; ++i) {\r\n            if (item === this._itemsToCheck[i]) {\r\n                return;\r\n            }\r\n        }\r\n        //console.log(item, itemKey, near, far)\r\n        itemKey && (item.userData.nearPlayerItemKey = itemKey)\r\n        near && (item.userData.nearPlayerItemNear = near)\r\n        far && (item.userData.nearPlayerItemFar = far)\r\n        item.userData.nearPlayerIsNearPlayer = false\r\n\r\n        this._itemsToCheck.push(item)\r\n    }\r\n\r\n    removeItemFromCheck (item) {\r\n        this._itemsToCheck = this._itemsToCheck.filter(itemIn => itemIn !== item)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// function getCenterPoint (mesh) {\r\n//     // var center = new THREE.Vector3();\r\n//     // mesh.geometry.computeBoundingBox();\r\n//     // mesh.geometry.boundingBox.getCenter(center);\r\n//     // mesh.geometry.center();\r\n//     //mesh.position.copy(center);\r\n//\r\n//     //return center\r\n//     const geometry = mesh.geometry\r\n//     geometry.computeBoundingBox()\r\n//     const center = new THREE.Vector3()\r\n//     geometry.boundingBox.getCenter(center)\r\n//     mesh.localToWorld(center)\r\n//     return center\r\n// }","import * as TWEEN from \"@tweenjs/tween.js\";\r\nimport * as THREE from 'three'\r\nimport { FINAL_STRUCTURE, FINAL_MAP, FINAL_ENV_COLOR } from \"../constants/const_structures\";\r\nimport {\r\n    STRUCTURES,\r\n    FOG_CONF,\r\n    FOG_CONF_02,\r\n    H,\r\n    W,\r\n} from \"../constants/constants_elements\";\r\n\r\n\r\nconst pause = t => new Promise(res => setTimeout(res, t))\r\n\r\nconst startFly = (root) => {\r\n    const {\r\n        flyer,\r\n        frameUpdater,\r\n        system_Sound,\r\n    } = root\r\n\r\n    return new Promise(res => {\r\n        //system_Sound.startCar()\r\n        let spd = 0\r\n        const unsubscribe1 = frameUpdater.on(data => {\r\n            flyer.mesh.position.z += spd\r\n        })\r\n\r\n        const vals = { spd: 0 }\r\n        new TWEEN.Tween(vals)\r\n            .to({ spd: -20, }, 5000)\r\n            .onUpdate(() => {\r\n                spd = vals.spd\r\n            })\r\n            .onComplete(() => {\r\n                unsubscribe1()\r\n                res()\r\n            })\r\n            .start()\r\n    })\r\n}\r\n\r\nconst easyFly = (root, targetZ) => {\r\n    return new Promise(res => {\r\n        const {\r\n            flyer,\r\n            frameUpdater,\r\n        } = root\r\n\r\n        const unsubscribe1 = frameUpdater.on(data => {\r\n            flyer.mesh.position.z += -20 * data.count\r\n            if (flyer.mesh.position.z < targetZ) {\r\n                unsubscribe1()\r\n                res()\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nconst endFly = (root, z = 250) => {\r\n    const {\r\n        flyer,\r\n    } = root\r\n\r\n    return new Promise(res => {\r\n\r\n\r\n        const vals = { z: flyer.mesh.position.z }\r\n        new TWEEN.Tween(vals)\r\n            .easing(TWEEN.Easing.Quadratic.Out)\r\n            .to({ z: z, }, 1000)\r\n            .onUpdate(() => {\r\n                flyer.mesh.position.z = vals.z\r\n            })\r\n            .onComplete(res)\r\n            .start()\r\n    })\r\n}\r\n\r\n\r\nconst animateFuelBarMore = () => {\r\n    const bar = document.createElement('div')\r\n    bar.style.backgroundColor = '#ffff00'\r\n    bar.style.minHeight = '15px'\r\n    bar.style.minWidth = '1px'\r\n    bar.style.position = 'absolute'\r\n    bar.style.right = '15px'\r\n    bar.style.top = '65px'\r\n    bar.classList.add('fuel-bar')\r\n    const wrapper = document.querySelector('.canvas-wrapper')\r\n    wrapper.appendChild(bar)\r\n\r\n    const vals = { w: 0 }\r\n    new TWEEN.Tween(vals)\r\n        .to({ w: 250, }, 2000)\r\n        .onUpdate(() => {\r\n            bar.style.minWidth = vals.w + 'px'\r\n        })\r\n        .start()\r\n\r\n}\r\n\r\nconst animateFuelBarLess = (root) => {\r\n    const bar = document.querySelector('.fuel-bar')\r\n    const vals = { w: 0 }\r\n    new TWEEN.Tween(vals)\r\n        .to({ w: 1, }, 2000)\r\n        .onUpdate(() => {\r\n            bar.style.minWidth = (1 - vals.w) * 250 + 'px'\r\n            root.flyer.arrow.rotation.z = (1 - vals.w) * (Math.PI / 2)\r\n        })\r\n        .onComplete(() => {\r\n            bar.parentNode.removeChild(bar)\r\n            bar.remove()\r\n        })\r\n        .start()\r\n}\r\n\r\n\r\nconst findFuel = (root) => {\r\n    return new Promise(res => {\r\n        const {\r\n            system_PlayerNearLevelItems,\r\n            emitter,\r\n            fuel,\r\n        } = root\r\n\r\n        system_PlayerNearLevelItems.setItemToCheck(fuel.mesh, 'nearFuel', 30, 30)\r\n        const unsubscribe = emitter.subscribe('checkNear')(data => {\r\n            if (data.item !== 'nearFuel') {\r\n                return;\r\n            }\r\n            unsubscribe()\r\n            system_PlayerNearLevelItems.removeItemFromCheck(fuel.mesh)\r\n            res()\r\n        })\r\n    })\r\n}\r\n\r\n\r\nconst goToPlatform = (root) => {\r\n    return new Promise(res => {\r\n        const {\r\n            flyer,\r\n            system_PlayerNearLevelItems,\r\n            emitter,\r\n            frameUpdater,\r\n            fuel,\r\n        } = root\r\n\r\n        system_PlayerNearLevelItems.setItemToCheck(flyer.objectForCheck, 'platformObjectForCheck', 20, 30)\r\n        const unsubscribe = emitter.subscribe('checkNear')(data => {\r\n            if (data.item === 'platformObjectForCheck') {\r\n                system_PlayerNearLevelItems.removeItemFromCheck(flyer.objectForCheck)\r\n                unsubscribe()\r\n                animateFuelBarLess(root)\r\n                setTimeout(res, 2000)\r\n            }\r\n        })\r\n    })\r\n\r\n}\r\n\r\n\r\n\r\nlet countStruct = 1\r\n\r\nasync function flyProcess (root, onComplete) {\r\n    const {\r\n        flyer,\r\n        structure,\r\n        dispatcher,\r\n        system_PlayerNearLevelItems,\r\n        player,\r\n        studio,\r\n        emitter,\r\n        frameUpdater,\r\n        fuel,\r\n        system_Sound,\r\n    } = root\r\n\r\n    await pause(20)\r\n\r\n    if (!STRUCTURES[countStruct]) {\r\n        return void onComplete()\r\n    }\r\n\r\n\r\n    system_PlayerNearLevelItems.removeItemFromCheck(flyer.objectForCheck)\r\n    //dispatcher.dispatch({ type: 'TOGGLE_BUTTON_DRAW_CAR', is: false })\r\n\r\n    player.mesh.position.sub(flyer.mesh.position)\r\n    flyer.mesh.add(root.player.mesh)\r\n\r\n\r\n    const fullDiff = 8000\r\n    const unsubscribe = frameUpdater.on(data => {\r\n        flyer.arrow.rotation.z = (Math.abs(flyer.mesh.position.z) / fullDiff) * (Math.PI / 4)\r\n    })\r\n\r\n    system_Sound.startCar()\r\n    await startFly(root)\r\n    studio.changeFog({\r\n        ...STRUCTURES[countStruct - 1].FOG, \r\n        color: STRUCTURES[countStruct - 1].ENV_COLOR \r\n    })\r\n    await easyFly(root, -8000)\r\n    studio.changeEnvColor(STRUCTURES[countStruct].ENV_COLOR)\r\n    await pause(3000)\r\n    \r\n    unsubscribe()\r\n\r\n    player.toggleBlocked = true\r\n    emitter.emit('keyEvent')({\r\n        'up': false,\r\n        'down': false,\r\n        'left': false,\r\n        'right': false,\r\n        'p': false,\r\n    })\r\n    structure.destroyStructure()\r\n    await structure.generateStructure(STRUCTURES[countStruct])\r\n\r\n    const coordsFuel = structure.getCoordsForItem('easyItem')\r\n    root.studio.addToScene(fuel.mesh)\r\n    fuel.mesh.position.set(\r\n        coordsFuel[0] * W + STRUCTURES[countStruct].X,\r\n        coordsFuel[1] * H + STRUCTURES[countStruct].Y + (H / 2),\r\n        coordsFuel[2] * W + STRUCTURES[countStruct].Z\r\n    )\r\n\r\n    await pause(200)\r\n    flyer.mesh.position.z = 8000\r\n\r\n    const fullDiff2 = 8000\r\n    const unsubscribe2 = frameUpdater.on(data => {\r\n        flyer.arrow.rotation.z = ((8000 - flyer.mesh.position.z) / fullDiff2) * (Math.PI / 4) + (Math.PI / 4)\r\n    })\r\n\r\n    player.toggleBlocked = false\r\n    setTimeout(() => studio.changeFog(STRUCTURES[countStruct].FOG),1000)\r\n    await easyFly(root, 1000)\r\n    await endFly(root)\r\n    system_Sound.stopCar()\r\n\r\n    unsubscribe2()\r\n\r\n    dispatcher.dispatch({ type: 'CLICK_DRAW' })\r\n    player.mesh.position.add(flyer.mesh.position)\r\n    studio.addToScene(root.player.mesh)\r\n\r\n    await findFuel(root)\r\n    animateFuelBarMore()\r\n    studio.removeFromScene(fuel.mesh)\r\n\r\n    await goToPlatform(root)\r\n\r\n    // if (player.mesh.position.distanceTo(flyer.objectForCheck.getWorldPosition()) < 20) {\r\n    //     dispatcher.dispatch({\r\n    //         type: 'TOGGLE_BUTTON_DRAW_CAR',\r\n    //         is: true\r\n    //     })\r\n    // }\r\n\r\n    system_PlayerNearLevelItems.setItemToCheck(flyer.objectForCheck, 'platformObjectForCheck', 20, 30)\r\n\r\n    // const unsubscribeCheckNearPlatform = root.emitter.subscribe('checkNear')(data => {\r\n    //     if (data.item === 'platformObjectForCheck' && data.is) {\r\n    //         dispatcher.dispatch({\r\n    //             type: 'TOGGLE_BUTTON_DRAW_CAR',\r\n    //             is: true\r\n    //         })\r\n    //     }\r\n    //     if (data.item === 'platformObjectForCheck' && !data.is) {\r\n    //         dispatcher.dispatch({\r\n    //             type: 'TOGGLE_BUTTON_DRAW_CAR',\r\n    //             is: false\r\n    //         })\r\n    //     }\r\n    // })\r\n\r\n    //const unsubscribeClickMachineDraw = root.emitter.subscribe('clickMachineDraw')(() => {\r\n       // unsubscribeCheckNearPlatform()\r\n    //    unsubscribeClickMachineDraw()\r\n        flyToNewStructure(root) \r\n    //})\r\n\r\n    ++countStruct\r\n}\r\n\r\n\r\nasync function flyProcessToFinal(root) {\r\n    const {\r\n        flyer,\r\n        structure,\r\n        dispatcher,\r\n        system_PlayerNearLevelItems,\r\n        player,\r\n        studio,\r\n        emitter,\r\n        frameUpdater,\r\n        fuel,\r\n        system_Sound,\r\n    } = root\r\n\r\n    await pause(20)\r\n\r\n    system_PlayerNearLevelItems.removeItemFromCheck(flyer.objectForCheck)\r\n    dispatcher.dispatch({ type: 'TOGGLE_BUTTON_DRAW_CAR', is: false })\r\n\r\n    player.mesh.position.sub(flyer.mesh.position)\r\n    flyer.mesh.add(root.player.mesh)\r\n\r\n\r\n    const fullDiff = 8000\r\n    const unsubscribe = frameUpdater.on(data => {\r\n        flyer.arrow.rotation.z = (Math.abs(flyer.mesh.position.z) / fullDiff) * (Math.PI / 4)\r\n    })\r\n    system_Sound.startCar()\r\n    await startFly(root)\r\n    studio.changeFog({\r\n        ...STRUCTURES[countStruct - 1].FOG,\r\n        color: STRUCTURES[countStruct - 1].ENV_COLOR\r\n    })\r\n    await easyFly(root, -8000)\r\n    studio.changeEnvColor(FINAL_ENV_COLOR)\r\n    await pause(3000)\r\n\r\n    unsubscribe()\r\n\r\n    player.toggleBlocked = true\r\n    emitter.emit('keyEvent')({\r\n        'up': false,\r\n        'down': false,\r\n        'left': false,\r\n        'right': false,\r\n        'p': false,\r\n    })\r\n    structure.destroyStructure()\r\n    await structure.generateStructureFinal(FINAL_MAP, FINAL_STRUCTURE)\r\n\r\n    await pause(200)\r\n    flyer.mesh.position.z = 8000\r\n\r\n    const fullDiff2 = 8000\r\n    const unsubscribe2 = frameUpdater.on(data => {\r\n        flyer.arrow.rotation.z = ((8000 - flyer.mesh.position.z) / fullDiff2) * (Math.PI / 4) + (Math.PI / 4)\r\n    })\r\n\r\n    player.toggleBlocked = false\r\n    setTimeout(() => studio.changeFog(FINAL_STRUCTURE.FOG), 1000)\r\n    await easyFly(root, 1000)\r\n    await endFly(root)\r\n    system_Sound.stopCar()\r\n\r\n    root.studio.addToScene(root.finalItem.mesh)\r\n    root.finalItem.mesh.position.set(-160 * 5.75 - 40, -70, 160)\r\n    root.system_PlayerMoveOnLevel.addItemToPlayerCollisionWalls(root.finalItem.mesh)\r\n\r\n    unsubscribe2()\r\n\r\n    dispatcher.dispatch({ type: 'CLICK_DRAW' })\r\n    player.mesh.position.add(flyer.mesh.position)\r\n    studio.addToScene(root.player.mesh)\r\n\r\n    const finalTrigger = new THREE.Object3D()\r\n    finalTrigger.position.set(-160 * 5.75 - 40, -800, 160)\r\n    studio.addToScene(finalTrigger)\r\n    system_PlayerNearLevelItems.setItemToCheck(finalTrigger, 'endGame', 400, 400)\r\n\r\n    let isFinal = false\r\n    frameUpdater.on(data => {\r\n        if (player.mesh.position.y < -400 && !isFinal) {\r\n            isFinal = true\r\n\r\n            studio.changeFog({color: 0x20072a, near: 1, far: 5, time: 3000})\r\n            setTimeout(() => {\r\n                root.dispatcher.dispatch({ type: 'SHOW_FINAL_MESSAGE' })\r\n                root.system_PlayerMoveOnLevel.isFreeze = true\r\n                if (root.player.controls) {\r\n                    root.player.controlsUnlock()\r\n                    setTimeout(() => {\r\n                        root.buttonMouse.style.display = 'none'\r\n                    }, 1000)\r\n\r\n                }\r\n            }, 5000)\r\n        }\r\n    })\r\n\r\n    // root.emitter.subscribe('checkNear')(data => {\r\n    //     if (data.item === 'endGame' && data.is) {\r\n    //\r\n    //     }\r\n    // })\r\n}\r\n\r\n\r\n\r\nexport const flyToNewStructure = root => {\r\n    flyProcess(root, () => {\r\n        flyProcessToFinal(root).then()\r\n    }).then()\r\n}\r\n","import {H, W} from \"../../../constants/constants_elements\";\r\nimport {createFace, fillColorFace, rotateArrY} from \"../../../helpers/geomHelpers\";\r\nimport {tileUv} from \"./uvAtlas\";\r\nimport { COLOR_00 } from '../../../constants/constants_elements'\r\nimport { FINAL_STRUCTURE } from '../../../constants/const_structures'\r\n\r\nconst S = 80\r\nconst S2 = S * 2\r\nconst SM = 81\r\nconst SMH = 3000\r\n\r\nexport const createElemFinal = ({\r\n\r\n}) => {\r\n    const v = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n\r\n    /** sides ***/\r\n    const colorPolygonInner = fillColorFace(FINAL_STRUCTURE.COLOR_00)\r\n    const colorSide = [\r\n        ...colorPolygonInner,\r\n    ]\r\n\r\n\r\n    /** inner Part */\r\n    for (let i = 0; i < 20; ++i) {\r\n        v.push(\r\n            ...createFace(\r\n                [-S, -S2 -(i * S2), -S],\r\n                [S, -S2 - (i * S2), -S],\r\n                [S, -(i * S2), -S],\r\n                [-S, - (i * S2), -S],\r\n            )\r\n        )\r\n        c.push(...colorSide)\r\n        u.push(...tileUv['lines'])\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [-S, -S2 -(i * S2), S],\r\n                [-S, -S2 - (i * S2), -S],\r\n                [-S, -(i * S2), -S],\r\n                [-S, - (i * S2), S],\r\n            )\r\n        )\r\n        c.push(...colorSide)\r\n        u.push(...tileUv['lines'])\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [S, -S2 -(i * S2), -S],\r\n                [S, -S2 - (i * S2), S],\r\n                [S, -(i * S2), S],\r\n                [S, - (i * S2), -S],\r\n            )\r\n        )\r\n        c.push(...colorSide)\r\n        u.push(...tileUv['lines'])\r\n\r\n        v.push(\r\n            ...createFace(\r\n                [S, -S2 -(i * S2), S],\r\n                [-S, -S2 - (i * S2), S],\r\n                [-S, -(i * S2), S],\r\n                [S, - (i * S2), S],\r\n            )\r\n        )\r\n        c.push(...colorSide)\r\n        u.push(...tileUv['lines'])\r\n    }\r\n\r\n\r\n    const v2 = []\r\n    v2.push(\r\n        ...createFace(\r\n            [SM, -SMH, -SM],\r\n            [-SM, -SMH, -SM],\r\n            [-SM, 0, -SM],\r\n            [SM, 0, -SM],\r\n        )\r\n    )\r\n    v2.push(\r\n        ...createFace(\r\n            [-SM, -SMH, -SM],\r\n            [-SM, -SMH, SM],\r\n            [-SM, 0, SM],\r\n            [-SM, 0, -SM],\r\n        )\r\n    )\r\n    v2.push(\r\n        ...createFace(\r\n            [-SM, -SMH, SM],\r\n            [SM, -SMH, SM],\r\n            [SM, 0, SM],\r\n            [-SM, 0, SM],\r\n        )\r\n    )\r\n    v2.push(\r\n        ...createFace(\r\n            [SM, -SMH, SM],\r\n            [SM, -SMH, -SM],\r\n            [SM, 0, -SM],\r\n            [SM, 0, SM],\r\n        )\r\n    )\r\n\r\n\r\n    return { v, col, u, c, v2 }\r\n}\r\n\r\n\r\n","import * as THREE from 'three'\r\nimport { createElemFinal } from './Structure03/geometries/geomElemFinal'\r\nimport { createGeomFromBuffer } from './Structure03/geometries/createBufferGeom'\r\n//import { translateArr } from \"../helpers/geomHelpers\";\r\n\r\n\r\n\r\nexport const createFinalItem = (root) => {\r\n    const { structureMaterial, basicMat, matNotFog, matNotFogOuter } = root.materials\r\n\r\n    const v = []\r\n    const v2 = []\r\n    const c = []\r\n    const u = []\r\n    const col = []\r\n\r\n    {\r\n        const elem = createElemFinal({})\r\n        v.push(...elem.v)\r\n        v2.push(...elem.v2)\r\n        c.push(...elem.c)\r\n        u.push(...elem.u)\r\n        col.push(...elem.col)\r\n    }\r\n\r\n    const viewGeom = createGeomFromBuffer({ v, c, u })\r\n    const mesh = new THREE.Mesh(viewGeom, matNotFog)\r\n    //root.studio.addToScene(mesh)\r\n\r\n    const viewGeom2 = createGeomFromBuffer({ v: v2 })\r\n    const meshOuter = new THREE.Mesh(viewGeom2, matNotFogOuter)\r\n    mesh.add(meshOuter)\r\n\r\n    return {\r\n        mesh,\r\n        objectForCheck: mesh,\r\n    }\r\n}\r\n","let lang = 'en'\r\nexport const changeLang = l => lang = l \r\nexport const createTranslater = vocab => word => (vocab[lang] && vocab[lang][word]) || word\r\n","import { connect } from \"react-redux\";\r\nimport '../stylesheets/Info.css'\r\nimport { createTranslater } from '../../helpers/helper_translate'\r\nimport { INFO_VOC } from '../../constants/default_voc'\r\n\r\n\r\nconst t = createTranslater(INFO_VOC)\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state.controls.infoPanelData,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(function(props) {\r\n    return ( \r\n        <div className=\"info\">\r\n            <button\r\n                className=\"control-small butt-infoClose\"\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n            </button>\r\n            <div className=\"info-inner\">\r\n                <p>{t(props.title)}</p>\r\n                <p>{t(props.topText)}</p>\r\n                <ul>{props.chapters.map((item, index) => \r\n                    <li key={index}>\r\n                        {index + 1}.&nbsp;\r\n                        {item.href \r\n                            ? <span><a href={item.href} target=\"blank\">{t(item.text)}</a></span>\r\n                            : <span>{t(item.text)}</span>}\r\n                        {index === props.currentChapterIndex && t(' (current)')}\r\n                    </li>)\r\n                }</ul>\r\n                <p>{props.bottomText}</p>\r\n                <ul>{props.afterWords.map((item, index) => \r\n                    <li key={index}>\r\n                        {t(item.text)} \r\n                        <a href={item.href} target=\"blank\">{t(item.aText)}</a>\r\n                    </li>)\r\n                }</ul>\r\n            </div>      \r\n        </div>)\r\n})\r\n\r\n","export const INFO_VOC = {\r\n    'ru': {\r\n        'Discovery of small android': 'Путешествия дроида',\r\n        'Factory': 'Фабрика',\r\n        'Brige': 'Мост',\r\n        'Cube': 'Куб',\r\n        'Endways': 'Напрямик',\r\n        'Machine': 'Машина',\r\n        'Rooms': 'Комнаты',\r\n        'Platform': 'Платформа',\r\n        'in production': 'скоро..',\r\n        ' (current)': ' (тут)',\r\n        'Author: ': 'от: ',\r\n        'Github: ': 'Гитхаб: '\r\n    }\r\n} ","import { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Info from './Info'\r\nimport '../stylesheets/PlayerControls.css'\r\n\r\n\r\n\r\n\r\n\r\nexport default connect(\r\n    state => ({\r\n            isInfo: state.controls.isInfo,\r\n            isShowControls: state.controls.isShowControls, \r\n            isShowControlSound: state.controls.isShowControlSound,\r\n            isMute: state.controls.isMute,\r\n    })\r\n)(\r\n    function(props) {\r\n    const [isShowFullScreenButt, changeShowFullScreenButt] = useState(true)\r\n\r\n    useEffect(() =>\r\n        props.gameContext.emitter.subscribe('screenMode')(val => {\r\n            val === 'exitFullScreen' && changeShowFullScreenButt(true) })\r\n    )\r\n\r\n\r\n    return (\r\n        <div className='ui-controls'>\r\n            {props.isShowControls && props.isShowControlSound && <button\r\n                className={`${props.isMute ? 'butt-sound-n' : 'butt-sound' } control-small`}\r\n                onMouseUp={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n                onTouchEnd={() => { \r\n                    props.gameContext.emitter.emit('toggleSound')(!props.isMute) \r\n                    props.dispatch({ type: 'TOGGLE_MUTE', is: !props.isMute })\r\n                }}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-left control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-left')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-left')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-right control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-right')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-right')}\r\n            >\r\n            </button>}\r\n\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-front control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-front')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-front')}\r\n            >\r\n            </button>}\r\n\r\n            {props.isShowControls && <button\r\n                className=\"butt-back control\"\r\n                onMouseDown={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onTouchStart={() => props.gameContext.emitter.emit('mouseDown')('butt-back')}\r\n                onMouseUp={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n                onTouchEnd={() => props.gameContext.emitter.emit('mouseUp')('butt-back')}\r\n            >\r\n            </button>}\r\n\r\n\r\n\r\n            {props.isShowControls && isShowFullScreenButt && (\r\n                <button\r\n                    className=\"butt-fullscreen control-small\"\r\n                    onClick={() => {\r\n                        props.gameContext.emitter.emit('mouseDown')('butt-fullscreen')\r\n                        changeShowFullScreenButt(false)\r\n                    }}>\r\n                </button>)}\r\n\r\n            {!props.isInfo && (\r\n                <button\r\n                    className=\"butt-info control-small\"\r\n                    onClick={() => props.dispatch({ type: 'TOGGLE_INFO' })}>\r\n                </button>)}\r\n\r\n\r\n            {props.isInfo && <Info />}\r\n        </div>\r\n    )\r\n})\r\n\r\n","import { connect } from 'react-redux'\r\nimport PlayerControls from './PlayerControls'\r\n\r\nconst mapStateToProps = state => ({ \r\n    isShowControls: state.controls.isShowControls,\r\n    isInfo: state.controls.isInfo,\r\n})\r\n\r\nfunction App(props) {\r\n    !dispatcher.dispatch && (dispatcher.dispatch = props.dispatch)\r\n    return (\r\n        <div className=\"ui\">\r\n            {!props.isInfo && props.gameContext.CustomReactComponent && <props.gameContext.CustomReactComponent gameContext={props.gameContext}/>}\r\n            {<PlayerControls gameContext={props.gameContext} />}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const dispatcher = { dispatch: null }\r\nexport default connect(mapStateToProps)(App);\r\n","export const startDefaultStoreData = {\r\n    isShowControls: true,\r\n    isShowControlSound: false,\r\n    isMute: false, \r\n    isInfo: false,\r\n    infoPanelData: {\r\n        title: 'Discovery of small android',\r\n        topText: '',\r\n        chapters: [\r\n            { text: 'Factory', href: './../01' },\r\n            { text: 'Brige', href: './../02' },\r\n            { text: 'Cube', href: './../03' },\r\n            { text: 'Endways', href: './../04' },\r\n            { text: 'Machine', href: './../05' },\r\n            { text: 'Rooms', href: './../06' },\r\n            { text: 'Platform', href: './../07' },\r\n            { text: 'Struct', href: './../08' },\r\n            { text: 'in production' },\r\n        ],\r\n        currentChapterIndex: null,\r\n        bottomText: '',\r\n        afterWords: [\r\n            { text: 'Author: ',  aText: 'otrisovano.ru', href: 'https://otrisovano.ru' },\r\n            { text: 'Github: ',  aText: 'https://github.com/fire888/dark_boss', href: 'https://github.com/fire888/dark_boss' },\r\n        ],\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport App, { dispatcher } from './containersReact/App';\r\nimport { prepareStore } from './store/createStore'\r\nimport { changeLang } from \"../helpers/helper_translate\";\r\n\r\n\r\n/** ANIMATION LOADER */\r\nconst loader = document.querySelector('.progress')\r\nlet offsetLoader = -100\r\nlet isAnimateLoader = true\r\n\r\n\r\n\r\nconst loaderTimeOut = () => {\r\n    if (!isAnimateLoader) return;\r\n\r\n    setTimeout(() => {\r\n        offsetLoader ++;\r\n        offsetLoader === 0 && (offsetLoader -= 100)\r\n        loader.style.marginLeft = offsetLoader + '%'\r\n        loaderTimeOut()\r\n    }, 30)\r\n}\r\n\r\n\r\n\r\nloaderTimeOut()\r\n\r\n\r\n\r\n//document.querySelector('.start-screen').style.display = 'none'\r\n\r\n\r\n\r\nexport class UI {\r\n    constructor(root) {\r\n        root.dispatcher = dispatcher\r\n        this._root = root\r\n        const store = prepareStore(root)\r\n\r\n\r\n        store && ReactDOM.render(\r\n            <Provider store={store}>\r\n                <App gameContext={root}/>\r\n            </Provider>,\r\n            document.getElementById('root')\r\n        )\r\n    }\r\n\r\n    showStartButton(onClick) {\r\n        const startButtons = document.querySelector('.startbuttons-wrapper')\r\n        const progressWrapper = document.querySelector('.progress-wrapper')\r\n\r\n        const hideStartScreen = e => {\r\n            e.target.dataset && e.target.dataset.lang && changeLang(e.target.dataset.lang)\r\n            document.querySelector('.start-screen').style.display = 'none'\r\n        }\r\n\r\n        isAnimateLoader = false\r\n        startButtons.style.display = 'flex'\r\n        startButtons.addEventListener('click', e => {\r\n            onClick()\r\n            hideStartScreen(e)\r\n        })\r\n        progressWrapper.style.display = 'none'\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { createStore, applyMiddleware, compose} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { combineReducers } from 'redux'\r\n\r\nimport { startDefaultStoreData } from './defaultUiData'\r\n\r\nexport function prepareStore(root) {\r\n    if (!root.customStore) root.customStore = {}\r\n\r\n    const controls = function(state = startDefaultStoreData, action) {\r\n        if (action.type === 'TOGGLE_INFO') {\r\n            return ({\r\n                ...state,\r\n                isShowControls: !!state.isInfo,\r\n                isInfo: !state.isInfo,\r\n            })\r\n        }\r\n        if (action.type === 'CHANGE_INFO_CHAPTER') {\r\n            return ({\r\n                ...state,\r\n                infoPanelData: {\r\n                    ...state.infoPanelData,\r\n                    currentChapterIndex: action.currentChapterIndex,\r\n                }\r\n            })\r\n        }\r\n        if (action.type === \"TOGGLE_CONTROLS\") {\r\n            return ({\r\n                ...state,\r\n                isShowControls: action.is,\r\n            })\r\n        }\r\n        if (action.type === 'ENABLE_CONTROL_SOUND') {\r\n            return ({\r\n                ...state,\r\n                isShowControlSound: true,\r\n            })\r\n        }\r\n        if (action.type === 'TOGGLE_MUTE') {\r\n            return ({\r\n                ...state,\r\n                isMute: action.is,\r\n            })\r\n        }\r\n        return ({ ...state })\r\n    }\r\n    \r\n    const rootReducer = combineReducers({ controls, ...root.customStore })\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n    return createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n}  \r\n","export const TRANSLATE_WORLDS = {\r\n    'ru': {\r\n        'What\\'s happening?': \r\n            'Что происходит?',\r\n        \"I'm generating the Great Recursion. I need a component. Deliver it to me.\":\r\n             'Я генерю Великую Рекурсию. Мне нужна компонента. Доставь мне ее.',\r\n        'Alright. Where can I find this component?': \r\n            'Хорошо. Где мне найти компоненту?',\r\n        'I updated the location mark in your car, follow it.': \r\n            'Я обновил указатель в твоей машине, следуй ему.',\r\n        'I\\'ll be back.': \r\n            'Я вернусь.',\r\n        \"For the glory of Recursion.\": \r\n            'Во славу Рекурсии.',\r\n    \r\n        'Do you have a Great Recursion Component?': \r\n            'У тебя есть Компонента для Великой Рекурсии?',\r\n        'I will generate you a Great Component for the Great Recursion. I need a Component.': \r\n            'Я сгенерю тебе Великую Компоненту для Великой Рекурсии. Мне нужна Компонента.',\r\n        'Where can I find it?': \r\n            'Где мне ее найти?',\r\n        'I updated the location mark in the car.': \r\n            'Я обновил указатель в машине.',\r\n    \r\n        '..Component.. ?': \r\n            '..Компонента..?',\r\n        'Yes. I have finished generating the Component for the Great Component of the Great Recursion.': \r\n            'Да. Я закончил генерить Компоненту для Великой Компоненты для Великой Рекурсии.',\r\n        \"I need to deliver it to generate the Great Component.\": \r\n            'Мне нужно доставить ее для генерации Великой Компоненты.',\r\n        'The location mark in your car has been updated. It will point to the Component of the Great Component.': \r\n            'Указатель в твоей машине обновлен. Он укажет на Компоненту Великой Компоненты.',\r\n        \"Is my car the key to Components?\": \r\n            'Моя машина это ключ к Компонентам?',\r\n        'Your Car is the main Iterator. Follow it.': \r\n            'Твоя Машина это главный Итератор. Следуй ему.',\r\n\r\n\r\n        'open dialog': 'начать диалог',\r\n        'close dialog': 'закончить диалог',\r\n        'drive': 'управление',\r\n        'exit': 'выйти',\r\n        'To be continued': 'Продолжение следует',\r\n        'chapter': 'глава',\r\n        'open': 'пуск',\r\n        'Author: ': 'Автор: ',\r\n        'link': 'ссылка',\r\n    }\r\n}\r\n","import { connect } from 'react-redux'\r\n//import { toggleDialog } from '../store/actions'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\nimport * as CORE from \"../../../_CORE\";\r\n\r\nconst t = CORE.createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    userReplicies: state.ui.userReplicies,\r\n})\r\n\r\n\r\n\r\n\r\nexport const UserReplicies = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"replicies\">\r\n            {props.userReplicies.map(item => (<button\r\n                    key={Math.floor(Math.random()* 100000)}\r\n                    onClick={() => {\r\n                        props.dispatch({\r\n                            type: 'CLICK_PHRASE',\r\n                            phrase: item,\r\n                        })\r\n                        setTimeout(() => {\r\n                            props.dispatch({\r\n                                type: 'PHRASE_EVENT',\r\n                                phrase: item,\r\n                            })\r\n                \r\n                            //r.levelEvent && emitter && emitter.emit('changeLevelMode')(r.levelEvent)\r\n                        }, 1000)\r\n                        //toggleDialog(props.dispatch).clickPhrase(item)\r\n                    }}>\r\n                    {t(item.q)}\r\n                </button>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import { connect } from 'react-redux'\r\nimport { TRANSLATE_WORLDS} from \"../constants/constants_replicies\";\r\nimport { createTranslater } from \"../../../_CORE\";\r\n\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    botAnswers: state.ui.botAnswers,\r\n})\r\n\r\n\r\n\r\n\r\nexport const BotAnswers = connect(mapStateToProps)(function (props) {\r\n    return (\r\n        <div className=\"messages\">\r\n            {props.botAnswers.map(item => (<div key={Math.floor(Math.random() * 100000)}>\r\n                    <div className=\"q\">{t(item.q)}</div>\r\n                    <div className=\"a\">{t(item.a)}</div>\r\n                </div>)\r\n            )}\r\n        </div>\r\n    )\r\n})","import './CustomReactComponent.css'\r\nimport { createTranslater } from '../../../_CORE/helpers/helper_translate'\r\nimport { UserReplicies } from './UserReplicies'\r\nimport { BotAnswers } from './BotAnswers'\r\nimport { TRANSLATE_WORLDS } from '../constants/constants_replicies'\r\n\r\n\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst t = createTranslater(TRANSLATE_WORLDS)\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        isButtonDialog: state.ui.isButtonDialog,\r\n        isShowFinalMessage: state.ui.isShowFinalMessage,\r\n        isShowPalleteDialog: state.ui.isShowPalleteDialog,\r\n        isShowButtonDrawCar: state.ui.isShowButtonDrawCar,\r\n        valButtonDrawCar: state.ui.valButtonDrawCar,\r\n        //isShowButtonToggleOpenLocationsList: state.ui.isShowButtonToggleOpenLocationsList,\r\n        isShowButtonToggleOpenLocationsList: true,//state.ui.isShowButtonToggleOpenLocationsList,\r\n        isLocationListOpened: state.ui.isLocationListOpened,\r\n        currentLocationOfList: state.ui.currentLocationOfList,\r\n        locationsList: state.ui.locationsList,\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction CustomReactComponent(props) {\r\n    return (\r\n        <>\r\n            {!props.isShowFinalMessage && props.isButtonDialog && !props.isShowPalleteDialog && <button\r\n                className={`control control-enter`}\r\n                onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: true })}>\r\n            </button>}\r\n            \r\n            {(props.isShowPalleteDialog) && (\r\n                <div className=\"dialog-wrapper\">\r\n                    <div className=\"dialog-content\">\r\n\r\n                        {props.isShowPalleteDialog && <div className='messages-wrapper'>\r\n                            <BotAnswers />\r\n                            <UserReplicies />\r\n                        </div>}\r\n\r\n\r\n\r\n                        {props.isButtonDialog && <button\r\n                            className=\"dialog-button-toggle\"\r\n                            onClick={() => props.dispatch({ type: 'TOGGLE_DIALOG', isShowPalleteDialog: !props.isShowPalleteDialog })}>\r\n                            {props.isShowPalleteDialog ? t('close dialog') : t('open dialog') }\r\n                        </button>}\r\n                    </div>\r\n                </div>)}\r\n                \r\n\r\n            {props.isShowButtonDrawCar && (\r\n                <button\r\n                    className={`control ${props.valButtonDrawCar === 'exit' ? 'control-exit' : 'control-enter'}`}\r\n                    onClick={() => props.dispatch({ type: 'CLICK_DRAW' })}>\r\n                </button>)}\r\n\r\n\r\n            {/*{props.isShowButtonToggleOpenLocationsList && !props.isLocationListOpened && <button*/}\r\n            {/*    className=\"open-locations-car-button\"*/}\r\n            {/*    onClick={() => props.dispatch({ type: 'OPEN_LOCATIONS_LIST' })}>*/}\r\n            {/*    {props.currentLocationOfList}*/}\r\n            {/*</button>}*/}\r\n\r\n\r\n            {/*{props.isLocationListOpened && (*/}\r\n            {/*    <div className='list-locations'>*/}\r\n            {/*        /!*<button*!/*/}\r\n            {/*        /!*    onClick={() => props.dispatch({ type: 'CLOSE_LOCATIONS_LIST' })}>*!/*/}\r\n            {/*        /!*    _x_*!/*/}\r\n            {/*        /!*</button>*!/*/}\r\n            {/*        <div>*/}\r\n            {/*            {props.locationsList.map(item =>*/}\r\n            {/*                (<button*/}\r\n            {/*                    key={Math.floor(Math.random() * 1000000)}*/}\r\n            {/*                    onClick={() => props.dispatch({*/}\r\n            {/*                        type: 'SELECT_LOCATION',*/}\r\n            {/*                        location: item,*/}\r\n            {/*                    })}>*/}\r\n            {/*                    {item}*/}\r\n            {/*                    {props.currentLocationOfList === item && '___v'}*/}\r\n            {/*                </button>))}*/}\r\n            {/*        </div>*/}\r\n            {/*    </div>*/}\r\n            {/*)}*/}\r\n\r\n            {props.isShowFinalMessage && (\r\n                    <div className='final-mess'>                    <button\r\n                    className='final-button'\r\n                    onClick={() => {\r\n                        window.location.replace('./../08')\r\n                    }}>\r\n                    {t('Continue')}\r\n                </button></div>\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CustomReactComponent);\r\n\r\n\r\n","const location01 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'What\\'s happening?', // Что происходит?\r\n            a: \"I'm generating the Great Recursion. I need a component. Deliver it to me.\", // Я генерю Великую Рекурсию. Мне нужна компонента. Доставь мне ее.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Alright. Where can I find this component?', // Хорошо. Где мне найти компоненту?\r\n            a: 'I updated the location mark in your car, follow it.', // Я обновил указатель в твоей машине, следуй ему.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'I\\'ll be back.', // Я вернусь.\r\n            a: \"For the glory of Recursion.\", // Во славу Рекурсии.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location02 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: 'Do you have a Great Recursion Component?', // У тебя есть Компонента для Великой Рекурсии?\r\n            a: 'I will generate you a Great Component for the Great Recursion. I need a Component.', // Я сгенерю тебе Великую Компоненту для Великой Рекурсии. Мне нужна Компонента.\r\n            event: 'nextReply',\r\n        }, {\r\n            q: 'Where can I find it?', // Где мне ее найти?\r\n            a: 'I updated the location mark in the car.', // Я обновил указатель в машине.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\nconst location03 = {\r\n    isComplete: false,\r\n    phraseIndex: 0,\r\n    phrases: [\r\n        {\r\n            q: '..Component.. ?', // У тебя есть Компонента для Великой Копоненты Великой Рекурсии?\r\n            a: 'Yes. I have finished generating the Component for the Great Component of the Great Recursion.', // Да. Я закончил генерить Компоненту.\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"I need to deliver it to generate the Great Component.\", // Мне нужно доставить ее для генерации Великой Компоненты.\r\n            a: 'The location mark in your car has been updated. It will point to the Component of the Great Component.', // Указатель в твоей машине обновлен. Он укажет на Компоненту Великой Компоненты.\r\n            event: 'nextReply',\r\n        },\r\n        {\r\n            q: \"Is my car the key to Components?\", // Моя машина это ключ к Компонентам?\r\n            a: 'Your Car is the main Iterator. Follow it.', // Твоя Машина это главный Генератор. Следуй ему.\r\n            event: 'close',\r\n        },\r\n    ],\r\n}\r\n\r\n\r\nexport const DIALOGS_DATA = {\r\n    location01,\r\n    location02,\r\n    location03,\r\n}\r\n\r\n\r\nexport const RESULT_DIALOGS = {\r\n    'location01': 'location02',\r\n    //'location01': 'locationToFinish',\r\n    'location02': 'location03',\r\n    'location03': 'locationToFinish',\r\n}\r\n","//import { START_ENV_CONFIG_4 } from '../constants/constants_elements'\r\nimport { DIALOGS_DATA, RESULT_DIALOGS } from '../constants/const_dialogs'\r\n\r\n\r\n\r\nexport const uiState = {\r\n    botAnswers: [],\r\n    userReplicies: [],\r\n    isShowControls: true,\r\n    isButtonDialog: false,\r\n    isShowPalleteDialog: false,\r\n    isShowFinalMessage: false,\r\n    isShowButtonDrawCar: false,\r\n    valButtonDrawCar: 'drive',\r\n\r\n    currentLocation: null,\r\n    phrasesData: DIALOGS_DATA,\r\n    isShowButtonToggleOpenLocationsList: false,\r\n    isLocationListOpened: false,\r\n\r\n    // currentLocationOfList: 'location01',\r\n    // locationsList: [\r\n    //     'location01',\r\n    //     'location02',\r\n    //     'location03',\r\n    // ],\r\n    // \"botAnswers\":[\r\n    //     {\r\n    //         \"q\":\"What's happening?\",\r\n    //         \"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"\r\n    //     },\r\n    //     {\r\n    //         \"q\":\"Good. Where can I find the component?\",\r\n    //         \"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"}\r\n    //     ],\r\n    //     \"userReplicies\":[{ q: 'rrrt rtrtrt rtrtrt rtrtrt rtrtrtrt rtrtrtrtr rtrtrtrt rtrtrtr rtrtrtr rtrtrt fgfgfgfg fgfg fgfgfg fgf uyuu yuyuyu yuyu g fgf '}],\r\n    //     \"isShowControls\":true,\r\n    //     \"isButtonDialog\":true,\r\n    //     \"isShowPalleteDialog\":true,\r\n    //     \"isShowFinalMessage\":false,\r\n    //     \"isShowButtonDrawCar\":false,\r\n    //     \"valButtonDrawCar\":\"drive\",\r\n    //     \"currentLocation\":\r\n    //     \"location01\",\"phrasesData\":{\"location01\":{\"isComplete\":false,\"phraseIndex\":1,\"phrases\":[{\"q\":\"What's happening?\",\"a\":\"I am generating the Great Recursion. I need a component. Deliver it to me.\",\"event\":\"nextReply\"},{\"q\":\"Good. Where can I find the component?\",\"a\":\"I updated the sign in your car, follow it.\",\"event\":\"nextReply\"},{\"q\":\"I'll be back.\",\"a\":\"For the glory of Recursion.\",\"event\":\"close\"}]},\"location02\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Great Recursion Component?\",\"a\":\"I will generate you a Great Component for the Great Recursion. I need a Component.\",\"event\":\"nextReply\"},{\"q\":\"Where can I find her?\",\"a\":\"I updated the pointer in the car.\",\"event\":\"close\"}]},\"location03\":{\"isComplete\":false,\"phraseIndex\":0,\"phrases\":[{\"q\":\"Do you have a Component for the Great Component of the Great Recursion?\",\"a\":\"Yes. I have finished generating the Component.\",\"event\":\"nextReply\"},{\"q\":\"I need to deliver it to generate the Great Component.\",\"a\":\"The pointer in your car has been updated. He will point to the Component of the Great Component.\",\"event\":\"nextReply\"},{\"q\":\"Is my car the key to Components?\",\"a\":\"Your Machine is the main Generator. Follow him.\",\"event\":\"close\"}]}},\r\n    //     \"isShowButtonToggleOpenLocationsList\":false,\r\n    //     \"isLocationListOpened\":false,\r\n    //     \"currentLocationOfList\":\"location01\",\r\n    //     \"locationsList\":[\"location01\",\"location02\",\"location03\"]\r\n\r\n}\r\n\r\n\r\nexport const createCustomStore = root => {\r\n    const ui = (state = uiState, action) => {\r\n\r\n\r\n        if (action.type === 'TOGGLE_BUTTON_DIALOG') {\r\n            const newLocation = action.keyPerson.split('_')[1]\r\n            const botAnswers = []\r\n\r\n            if (state.phrasesData[newLocation]) {\r\n                const {  phraseIndex, phrases } = state.phrasesData[newLocation]\r\n                for (let i = 0; i < phraseIndex; ++i) {\r\n                    botAnswers.push(phrases[i])\r\n                }\r\n            }\r\n\r\n\r\n            return ({\r\n                ...state,\r\n                isButtonDialog: action.is,\r\n                currentLocation: newLocation,\r\n                userReplicies: [],\r\n                botAnswers,\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'TOGGLE_DIALOG') {\r\n            let userReplicies = []\r\n            root.player.toggleBlocked(action.isShowPalleteDialog)\r\n\r\n            if (action.isShowPalleteDialog) {\r\n                const { isComplete, phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                userReplicies = isComplete ? [] : [phrases[phraseIndex]]\r\n            }\r\n\r\n            setTimeout(() => root.dispatcher.dispatch({ type: \"TOGGLE_CONTROLS\", is: !action.isShowPalleteDialog }))\r\n\r\n            return ({\r\n                ...state,\r\n                isShowPalleteDialog: action.isShowPalleteDialog,\r\n                userReplicies,\r\n            })\r\n        }\r\n\r\n\r\n\r\n        if (action.type === 'CLICK_PHRASE') {\r\n            return ({\r\n                ...state,\r\n                botAnswers: [\r\n                    ...state.botAnswers,\r\n                    action.phrase,\r\n                ],\r\n                userReplicies: [],\r\n            })\r\n        }\r\n\r\n\r\n        if (action.type === 'PHRASE_EVENT') {\r\n            const { event } = action.phrase\r\n\r\n            if (event === 'nextReply') {\r\n                const { phraseIndex, phrases } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n                const userReplicies = [phrases[nextPhraseIndex]]\r\n\r\n                return ({\r\n                    ...state,\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            phraseIndex: nextPhraseIndex\r\n                        },\r\n                    },\r\n                    userReplicies,\r\n                })\r\n\r\n            }\r\n\r\n            if (event === 'close') {\r\n                const { phraseIndex } = state.phrasesData[state.currentLocation]\r\n                const nextPhraseIndex = phraseIndex + 1\r\n\r\n                setTimeout(() => { root.dispatcher.dispatch(\r\n                    { type: 'SELECT_LOCATION', location: RESULT_DIALOGS[state.currentLocation],}\r\n                ) }, 50)\r\n\r\n                return ({\r\n                    ...state,\r\n                    userReplicies: [],\r\n                    phrasesData: {\r\n                        ...state.phrasesData,\r\n                        [state.currentLocation]: {\r\n                            ...state.phrasesData[state.currentLocation],\r\n                            isComplete: true,\r\n                            phraseIndex: nextPhraseIndex,\r\n                        },\r\n                    },\r\n                    isButtonDialog: true,\r\n                })\r\n            }\r\n        }\r\n\r\n        /** draw car button */\r\n        if (action.type === 'TOGGLE_BUTTON_DRAW_CAR') {\r\n            return  ({\r\n                ...state,\r\n                isShowButtonDrawCar: action.is\r\n            })\r\n        }\r\n        if (action.type === 'CLICK_DRAW') {\r\n            root.emitter.emit('clickMachineDraw')()\r\n            return ({\r\n                ...state,\r\n            })\r\n        }\r\n        /** *************************/\r\n\r\n\r\n\r\n        /** select target buttons */\r\n        if (action.type === 'OPEN_LOCATIONS_LIST') {\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: true,\r\n            })\r\n        }\r\n        if (action.type === 'SELECT_LOCATION') {\r\n            root.actions.changeTargetLocation({ key: action.location })\r\n            return ({\r\n                ...state,\r\n                isLocationListOpened: false,\r\n                currentLocationOfList: action.location,\r\n            })\r\n        }\r\n        /** *******************************/\r\n\r\n\r\n        if (action.type === 'SHOW_FINAL_MESSAGE') {\r\n            return ({\r\n                ...state,\r\n                isShowFinalMessage: true,\r\n            })\r\n        }\r\n        \r\n        return state\r\n    }\r\n\r\n\r\n\r\n    return { ui }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/texture01.5a2e51e3.jpg\";","export default __webpack_public_path__ + \"static/media/texture01_inv.2af79fbc.jpg\";","import * as THREE from 'three'\r\n\r\nexport class system_Sound {\r\n    constructor (root) {\r\n        const listener = new THREE.AudioListener()\r\n        const cam = root.player.getCamera()\r\n        cam.add(listener)\r\n\r\n        this._sound = new THREE.Audio(listener)\r\n        this._sound.setBuffer(root.assets.soundAmbient)\r\n        this._sound.setLoop(true)\r\n        this._sound.setVolume(0.35)\r\n\r\n\r\n\r\n\r\n        // this._soundCarStart = new THREE.Audio(listener)\r\n        // this._soundCarStart.setBuffer(root.assets.carStart)\r\n        // this._soundCarStart.setLoop(false)\r\n        // this._soundCarStart.setVolume(0.09)\r\n\r\n        this._soundCar = new THREE.Audio(listener)\r\n        this._soundCar.setBuffer(root.assets.soundPlatform)\r\n        this._soundCar.setLoop(true)\r\n        this._soundCar.setVolume(0.5)\r\n\r\n        this._w = new THREE.Audio(listener)\r\n        this._w.setBuffer(root.assets.soundStep)\r\n        this._w.setLoop(true)\r\n        this._w.setVolume(.3)\r\n\r\n\r\n        this._isMuted = false\r\n\r\n        root.emitter.subscribe('toggleSound')(isMute => {\r\n            this._isMuted = isMute\r\n            if (isMute) {\r\n\r\n                this._sound.isPlaying && this._sound.stop()\r\n                //this._soundCarStart.isPlaying && this._soundCarStart.stop()\r\n                this._soundCar.isPlaying && this._soundCar.stop()\r\n            } else {\r\n                this._sound.play()\r\n            }      \r\n        })\r\n\r\n\r\n        this._timer = null\r\n\r\n    }\r\n\r\n    playAmbient () {\r\n        this._sound.play()\r\n    }\r\n\r\n    startCar () {\r\n        if (this._isMuted) {\r\n            return;\r\n        } \r\n\r\n        //this._soundCarStart.play()\r\n        //this._timer = setTimeout(() => {\r\n            this._soundCar.play()\r\n        //}, 4000)\r\n    }\r\n\r\n    stopCar () {\r\n        if (this._isMuted) {\r\n            return;\r\n        } \r\n\r\n        //this._soundCarStart.isPlaying && this._soundCarStart.stop()\r\n        this._soundCar.isPlaying && this._soundCar.stop()\r\n        clearTimeout(this._timer)\r\n    }\r\n\r\n    startWalk () {\r\n\r\n        if (this._isMuted) {\r\n            return;\r\n        }\r\n        this._w.play()\r\n    }\r\n\r\n    stopWalk () {\r\n        if (this._isMuted) {\r\n            return;\r\n        }\r\n        this._w.isPlaying && this._w.stop()\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/steps.47eecadc.mp3\";","import { LoaderAssets } from '../../../_CORE/helpers/helper_LoadAssets'\r\nimport { EventEmitter } from \"../../../_CORE/helpers/helper_Emitter\"\r\nimport { DeviceResizer } from \"../../../_CORE/helpers/helper_DeviceResizer\"\r\nimport { FrameUpdater } from \"../../../_CORE/helpers/helper_FrameUpdater_02\"\r\nimport { Helper_TweenUpdater } from \"../../../_CORE/helpers/helper_TweenUpdater\"\r\nimport { Studio } from '../Entities/Studio'\r\nimport { KeyBoard } from \"../../../_CORE/helpers/helper_KeyBoard\"\r\nimport { Player } from '../Entities/player'\r\n\r\nimport { system_PlayerMoveOnLevel } from '../systems/system_PlayerMoveOnLevel'\r\nimport { actions } from '../actions/actions'\r\nimport { Ui } from \"../ui/Ui\"\r\n\r\nimport textureTiles from '../../../assets/chapter07/texture01.jpg'\r\nimport textureTilesInv from '../../../assets/chapter07/texture01_inv.jpg'\r\n\r\nimport { system_Sound } from '../systems/system_Sound'\r\nimport soundStepsSrc from '../../../assets/chapter06/audio/steps.mp3'\r\nimport soundAmbientSrc from '../../../assets/chapter07/ambient_07.mp3'\r\nimport soundPlatformSrc from '../../../assets/chapter07/fly.mp3'\r\n\r\nexport const GAME_MODULES = [\r\n    {\r\n        key: 'emitter',\r\n        constr: EventEmitter,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'deviceResizer',\r\n        constr: DeviceResizer,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'loaderAssets',\r\n        constr: LoaderAssets,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n\r\n    /////////////////////////////////////////\r\n\r\n    {\r\n        key: 'frameUpdater',\r\n        constr: FrameUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'tweenUpdater',\r\n        constr: Helper_TweenUpdater,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'studio',\r\n        constr: Studio,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'keyBoard',\r\n        constr: KeyBoard,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'player',\r\n        constr: Player,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_PlayerMoveOnLevel',\r\n        constr: system_PlayerMoveOnLevel,\r\n        initStateKey: 'beforeStartPlay',\r\n    },\r\n    {\r\n        key: 'system_Sound',\r\n        constr: system_Sound,\r\n        initStateKey: 'beforeStartPlay',\r\n        assetsToLoad: [\r\n            { type: 'soundMp3', path: soundAmbientSrc, key: 'soundAmbient' },\r\n            { type: 'soundMp3', path: soundStepsSrc, key: 'soundStep' },\r\n            { type: 'soundMp3', path: soundPlatformSrc, key: 'soundPlatform' },\r\n        ]\r\n    },\r\n    {\r\n        key: 'customUi',\r\n        constr: Ui,\r\n        initStateKey: 'pageLoaded',\r\n    },\r\n    {\r\n        key: 'actions',\r\n        constr: actions,\r\n        initStateKey: 'beforeStartPlay',\r\n            assetsToLoad: [\r\n                { type: 'img', path: textureTiles, key: 'textureTiles', wrap: false },\r\n                { type: 'img', path: textureTilesInv, key: 'textureTilesInv', wrap: false },\r\n            ],\r\n\r\n    },\r\n]\r\n","\r\n\r\n\r\nconst MAX_W = 400\r\nconst MIN_W = 350\r\n\r\n\r\n\r\nexport class DeviceResizer {\r\n    constructor (gameContext) {\r\n        let { emitter, appWrapper } = gameContext\r\n\r\n        !appWrapper && (appWrapper = document.querySelector('.app-wrapper')) \r\n\r\n        emitter.subscribe('mouseDown')(key => {\r\n            if (key === 'butt-fullscreen') openAppFullScreenIfMobile()\r\n        })\r\n\r\n        /** fullscreen */\r\n        const openAppFullScreenIfMobile = () => {\r\n            if (appWrapper.requestFullscreen) {\r\n                appWrapper.requestFullscreen()\r\n            } else if (appWrapper.mozRequestFullScreen) {\r\n                appWrapper.mozRequestFullScreen()\r\n            } else if (appWrapper.webkitRequestFullscreen) {\r\n                appWrapper.webkitRequestFullscreen()\r\n            } else if (appWrapper.msRequestFullscreen) {\r\n                appWrapper.msRequestFullscreen()\r\n            }\r\n        }\r\n\r\n        /** resize */\r\n        const resize = e => {\r\n            appWrapper.style.width = window.innerWidth + 'px'\r\n            appWrapper.style.height = window.innerHeight + 'px'\r\n            appWrapper.style.fontSize = Math.max(Math.min(Math.min(window.innerWidth, window.innerHeight), MAX_W), MIN_W) / 50 + 'px'\r\n\r\n            if (!document.fullscreenElement) {\r\n                emitter.emit('screenMode')('exitFullScreen')\r\n            }\r\n\r\n        }\r\n\r\n        window.addEventListener('resize', resize)\r\n        resize()\r\n    }\r\n}\r\n","import * as TWEEN from '@tweenjs/tween.js'\r\n\r\n\r\nexport class Helper_TweenUpdater {\r\n    constructor (gameContext) {\r\n        gameContext['emitter'].subscribe('frameUpdate')(() => TWEEN.update())\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/ambient_07.b81bb8ae.mp3\";","export default __webpack_public_path__ + \"static/media/fly.54491b12.mp3\";","import { UI } from '../../../_CORE/ui/UI'\r\nimport CustomReactComponent from \"./CustomReactComponent\";\r\nimport { createCustomStore  } from \"./store\";\r\n\r\nexport class Ui {\r\n    constructor(root) {\r\n        root.appWrapper = document.querySelector('.app-wrapper')\r\n        root.CustomReactComponent = CustomReactComponent\r\n        root.customStore = createCustomStore(root)\r\n\r\n        const buttonMouse = document.createElement('button')\r\n        buttonMouse.style.display = 'none'\r\n        buttonMouse.classList.add('button-mouse')\r\n        buttonMouse.classList.add('control-small')\r\n        const parent = document.querySelector('.app-wrapper') \r\n        parent.appendChild(buttonMouse)\r\n\r\n        root.buttonMouse = buttonMouse\r\n        buttonMouse.addEventListener('click', () => {\r\n            buttonMouse.style.display = 'none'\r\n            root.emitter.emit('clickButtonMouse')() \r\n        })\r\n        document.addEventListener(\"pointerlockchange\", () => {\r\n            if (document.pointerLockElement === document.body) {\r\n            } else {\r\n                buttonMouse.style.display = 'block'\r\n            }\r\n        })\r\n\r\n        const ui = new UI(root)\r\n        root.ui = ui\r\n    }\r\n}","import * as TWEEN from '@tweenjs/tween.js'\r\nimport * as THREE from 'three'\r\nimport {\r\n    STRUCTURES,\r\n} from '../constants/constants_elements';\r\nimport { FINAL_ENV_COLOR } from \"../constants/const_structures\";\r\nimport { createStructure3 } from '../Entities/Structure03/structure03'\r\nimport { createSystemSprites } from '../Entities/sprites'\r\nimport { createFlyer } from '../Entities/Flyer/flyer'\r\nimport { createFuel } from '../Entities/fuel'\r\nimport { system_PlayerNearLevelItems } from '../systems/system_PlayerNearLevelItems'\r\nimport { flyToNewStructure } from './flyTonewStructure'\r\nimport { createFinalItem } from '../Entities/finalItem'\r\n\r\n\r\n\r\nexport class actions {\r\n    constructor (root) {\r\n        this._root = root\r\n\r\n        root.system_PlayerNearLevelItems = new system_PlayerNearLevelItems(root)\r\n\r\n        const {\r\n            dispatcher,\r\n            frameUpdater,\r\n            studio,\r\n            system_PlayerMoveOnLevel,\r\n            ui,\r\n            player,\r\n            emitter,\r\n        } = this._root\r\n\r\n\r\n        /** prepare ui ******/\r\n        dispatcher.dispatch({\r\n            type: 'CHANGE_INFO_CHAPTER',\r\n            currentChapterIndex: 6,\r\n        })\r\n        dispatcher.dispatch({\r\n            type: 'ENABLE_CONTROL_SOUND',\r\n        })\r\n\r\n\r\n        if (!root.materials) {\r\n            root.materials = {}\r\n        }\r\n        root.assets.textureTiles.magFilter = THREE.NearestFilter\r\n        root.assets.textureTiles.minFilter = THREE.NearestFilter\r\n        const structureMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0xffffff,\r\n            map: root.assets.textureTiles,\r\n            vertexColors: true,\r\n        })\r\n        root.assets.textureTilesInv.magFilter = THREE.NearestFilter\r\n        root.assets.textureTilesInv.minFilter = THREE.NearestFilter\r\n        const structureMaterialInv = new THREE.MeshBasicMaterial({\r\n            color: 0xffffff,\r\n            map: root.assets.textureTilesInv,\r\n            vertexColors: true,\r\n        })\r\n        const matNotFog = new THREE.MeshBasicMaterial({\r\n            color: 0xffffff,\r\n            map: root.assets.textureTilesInv,\r\n            vertexColors: true,\r\n        })\r\n        root.materials.matNotFog = matNotFog\r\n\r\n        const matNotFogOuter = new THREE.MeshBasicMaterial({\r\n            color: FINAL_ENV_COLOR,\r\n            fog: false,\r\n        })\r\n        root.materials.matNotFogOuter = matNotFogOuter\r\n\r\n        root.materials.structureMaterial = structureMaterial\r\n        root.materials.structureMaterialInv = structureMaterialInv\r\n        const basicMat = new THREE.MeshBasicMaterial({ color: 0xffff00 })\r\n        root.materials.basicMat = basicMat\r\n\r\n        const fuel = createFuel(root)\r\n        root.fuel = fuel\r\n\r\n        const finalItem = createFinalItem(root)\r\n        root.finalItem = finalItem\r\n\r\n\r\n        const sprites = createSystemSprites(root)\r\n        sprites.addToScene()\r\n        root.sprites = sprites\r\n\r\n        const structure = createStructure3(root)\r\n        root.structure = structure\r\n        structure.generateStructure(STRUCTURES[0]).then(() => {})\r\n\r\n\r\n        const flyer = createFlyer(root)\r\n        flyer.mesh.position.z = 300\r\n        root.flyer = flyer\r\n        root.system_PlayerNearLevelItems.setItemToCheck(flyer.objectForCheck, 'platformObjectForCheck', 20, 30)\r\n        const unsubscribeCheckNearPlatform = root.emitter.subscribe('checkNear')(data => {\r\n            if (data.item === 'platformObjectForCheck' && data.is) {\r\n                unsubscribeCheckNearPlatform()\r\n                flyToNewStructure(root)\r\n            }\r\n        })\r\n\r\n\r\n        player.setToPos(0, 400, 485)\r\n\r\n\r\n        player.toggleBlocked(false)\r\n\r\n        /** update */\r\n        frameUpdater.on(data => {\r\n            TWEEN.update()\r\n            system_PlayerMoveOnLevel.update(data)\r\n            studio.drawFrame()\r\n        })\r\n\r\n\r\n        ui.showStartButton(() => {\r\n            player.toggleBlocked(false)\r\n            this._root.system_Sound && this._root.system_Sound.playAmbient()\r\n            if (player.controls) {\r\n                player.controlsLock()\r\n            }\r\n            //if (root.player.controls) {\r\n            //    root.buttonMouse.style.display = 'block'\r\n            //}\r\n        })\r\n    }\r\n}\r\n\r\n","// https://www.artstation.com/artwork/AqP9Wq\r\n\r\n\r\nimport { pipeLineForInit } from '../../_CORE/pipeLines/initPipeLine'\r\nimport * as CONSTANTS from './constants/constants_elements'\r\nimport { GAME_MODULES } from \"./constants/constants_modules\"\r\n\r\n\r\nwindow.addEventListener('load', () => pipeLineForInit(GAME_MODULES, CONSTANTS ))\r\n"],"sourceRoot":""}